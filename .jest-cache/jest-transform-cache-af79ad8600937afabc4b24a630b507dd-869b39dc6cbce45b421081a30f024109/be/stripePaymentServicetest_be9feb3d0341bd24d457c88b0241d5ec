943c5f1da9d3669155a2645b4b7de9c3
_getJestObj().mock('../../src/supabase', function () {
  return {
    supabase: {
      auth: {
        getSession: jest.fn()
      },
      from: jest.fn().mockReturnThis(),
      update: jest.fn().mockReturnThis(),
      insert: jest.fn().mockReturnThis(),
      eq: jest.fn().mockReturnThis(),
      select: jest.fn().mockReturnThis(),
      single: jest.fn()
    }
  };
});
_getJestObj().mock('../../src/services/subscriptionTypes', function () {
  var original = jest.requireActual('../../src/services/subscriptionTypes');
  return Object.assign({}, original, {
    SUBSCRIPTION_PLANS: [{
      id: 'dealer-monthly',
      name: 'MVP Dealer Monthly',
      description: 'Monthly subscription for MVP Dealers',
      price: 9.99,
      type: 'dealer',
      duration: 'monthly',
      features: ['Feature 1', 'Feature 2']
    }, {
      id: 'dealer-annual',
      name: 'MVP Dealer Annual',
      description: 'Annual subscription for MVP Dealers',
      price: 99.99,
      type: 'dealer',
      duration: 'annual',
      features: ['Feature 1', 'Feature 2', 'Feature 3']
    }, {
      id: 'organizer-monthly',
      name: 'Show Organizer Monthly',
      description: 'Monthly subscription for Show Organizers',
      price: 19.99,
      type: 'organizer',
      duration: 'monthly',
      features: ['Feature A', 'Feature B']
    }],
    SubscriptionPlanType: {
      DEALER: 'dealer',
      ORGANIZER: 'organizer'
    },
    SubscriptionDuration: {
      MONTHLY: 'monthly',
      ANNUAL: 'annual'
    },
    _calculateExpiryDate: jest.fn().mockImplementation(function () {
      var date = new Date();
      date.setDate(date.getDate() + 30);
      return date;
    })
  });
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _env2 = require("expo/virtual/env");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _subscriptionTypes = require("../../src/services/subscriptionTypes");
var _userRoleService = require("../../src/services/userRoleService");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var initializeStripe;
var createPaymentSheetForSubscription;
var processSubscriptionUpdate;
var originalEnv = process.env;
beforeEach(function () {
  jest.resetModules();
  process.env = Object.assign({}, originalEnv);
  process.env.EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY = 'pk_test_mock_key';
  process.env.EXPO_PUBLIC_SUPABASE_URL = 'https://mock-supabase-url.com';
  jest.clearAllMocks();
  jest.spyOn(console, 'error').mockImplementation(function () {});
  jest.spyOn(console, 'warn').mockImplementation(function () {});
});
afterEach(function () {
  process.env = originalEnv;
  jest.restoreAllMocks();
});
global.fetch = jest.fn();
describe('stripePaymentService', function () {
  var mockUserId = 'user-123';
  var mockPlanId = 'dealer-monthly';
  var mockInvalidPlanId = 'invalid-plan';
  var mockPaymentIntent = 'pi_mock_payment_intent';
  var mockEphemeralKey = 'ek_mock_ephemeral_key';
  var mockCustomer = 'cus_mock_customer';
  var mockPublishableKey = 'pk_test_mock_key';
  var mockPlan = {
    id: 'dealer-monthly',
    name: 'MVP Dealer Monthly',
    description: 'Monthly subscription for MVP Dealers',
    price: 9.99,
    type: _subscriptionTypes.SubscriptionPlanType.DEALER,
    duration: _subscriptionTypes.SubscriptionDuration.MONTHLY,
    features: ['Feature 1', 'Feature 2']
  };
  var mockInitPaymentSheet = jest.fn();
  var mockPresentPaymentSheet = jest.fn();
  var mockSupabase = require('../../src/supabase').supabase;
  beforeAll((0, _asyncToGenerator2.default)(function* () {
    var stripeService = yield import('../../src/services/stripePaymentService');
    initializeStripe = stripeService.initializeStripe;
    createPaymentSheetForSubscription = stripeService.createPaymentSheetForSubscription;
    processSubscriptionUpdate = stripeService.processSubscriptionUpdate;
  }));
  describe('initializeStripe', function () {
    test('should return true when publishable key is set', function () {
      process.env.EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY = 'pk_test_valid_key';
      var result = initializeStripe();
      expect(result).toBe(true);
    });
    test('should return false when publishable key is missing', function () {
      delete _env2.env.EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY;
      var result = initializeStripe();
      expect(result).toBe(false);
      expect(console.error).toHaveBeenCalledWith('Stripe publishable key is not set. Please check your environment variables.');
    });
    test('should return false when publishable key is empty', function () {
      process.env.EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY = '';
      var result = initializeStripe();
      expect(result).toBe(false);
      expect(console.error).toHaveBeenCalledWith('Stripe publishable key is not set. Please check your environment variables.');
    });
  });
  describe('createPaymentSheetForSubscription', function () {
    beforeEach(function () {
      mockSupabase.auth.getSession.mockResolvedValue({
        data: {
          session: {
            access_token: 'mock-access-token'
          }
        },
        error: null
      });
      global.fetch.mockResolvedValue({
        ok: true,
        json: jest.fn().mockResolvedValue({
          paymentIntent: mockPaymentIntent,
          ephemeralKey: mockEphemeralKey,
          customer: mockCustomer,
          publishableKey: mockPublishableKey
        })
      });
      mockInitPaymentSheet.mockResolvedValue({
        error: null
      });
      mockPresentPaymentSheet.mockResolvedValue({
        error: null
      });
    });
    test('should return error for invalid plan ID', (0, _asyncToGenerator2.default)(function* () {
      var result = yield createPaymentSheetForSubscription(mockUserId, mockInvalidPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result).toEqual({
        success: false,
        error: 'Subscription plan not found.'
      });
      expect(global.fetch).not.toHaveBeenCalled();
    }));
    test('should handle session retrieval failure', (0, _asyncToGenerator2.default)(function* () {
      mockSupabase.auth.getSession.mockResolvedValue({
        data: {
          session: null
        },
        error: {
          message: 'Failed to retrieve session'
        }
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toContain('Failed to retrieve session');
      expect(console.error).toHaveBeenCalled();
    }));
    test('should handle network failure during payment intent creation', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockRejectedValue(new Error('Network error'));
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Network error');
      expect(console.error).toHaveBeenCalled();
    }));
    test('should handle payment intent creation error (400)', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: false,
        status: 400,
        json: jest.fn().mockResolvedValue({
          error: 'Invalid request parameters'
        })
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Invalid request parameters');
    }));
    test('should handle payment intent creation error (401)', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: false,
        status: 401,
        json: jest.fn().mockResolvedValue({
          error: 'Unauthorized access'
        })
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Unauthorized access');
    }));
    test('should handle payment intent creation error (500)', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: false,
        status: 500,
        json: jest.fn().mockResolvedValue({
          error: 'Server error'
        })
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Server error');
    }));
    test('should handle malformed API response', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: true,
        json: jest.fn().mockResolvedValue({
          customer: mockCustomer
        })
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toContain('Cannot read properties of undefined');
    }));
    test('should handle Stripe initPaymentSheet error', (0, _asyncToGenerator2.default)(function* () {
      mockInitPaymentSheet.mockResolvedValue({
        error: {
          code: 'initialization_error',
          message: 'Failed to initialize payment sheet'
        }
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Initialization failed: Failed to initialize payment sheet');
      expect(console.error).toHaveBeenCalled();
    }));
    test('should handle Stripe presentPaymentSheet canceled error', (0, _asyncToGenerator2.default)(function* () {
      mockPresentPaymentSheet.mockResolvedValue({
        error: {
          code: 'Canceled',
          message: 'The payment was canceled'
        }
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Payment was canceled.');
    }));
    test('should handle Stripe presentPaymentSheet payment failure', (0, _asyncToGenerator2.default)(function* () {
      mockPresentPaymentSheet.mockResolvedValue({
        error: {
          code: 'payment_failed',
          message: 'The payment failed'
        }
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Payment failed: The payment failed');
      expect(console.error).toHaveBeenCalled();
    }));
    test('should handle post-payment processing failures', (0, _asyncToGenerator2.default)(function* () {
      jest.spyOn(global, 'Promise').mockImplementationOnce(function () {
        return {
          then: function then() {
            throw new Error('Failed to process subscription');
          }
        };
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toContain('Failed to process subscription');
    }));
    test('should handle timeout during payment intent creation', (0, _asyncToGenerator2.default)(function* () {
      jest.useFakeTimers();
      global.fetch.mockImplementation(function () {
        return new Promise(function (_, reject) {
          setTimeout(function () {
            reject(new Error('Request timed out'));
          }, 30000);
        });
      });
      var resultPromise = createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      jest.advanceTimersByTime(31000);
      var result = yield resultPromise;
      expect(result.success).toBe(false);
      expect(result.error).toBe('Request timed out');
      jest.useRealTimers();
    }));
    test('should handle expired session', (0, _asyncToGenerator2.default)(function* () {
      mockSupabase.auth.getSession.mockResolvedValue({
        data: {
          session: null
        },
        error: null
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toContain('Failed to create payment intent');
    }));
    test('should handle invalid user ID', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: false,
        status: 400,
        json: jest.fn().mockResolvedValue({
          error: 'Invalid user ID'
        })
      });
      var result = yield createPaymentSheetForSubscription('invalid-user-id', mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Invalid user ID');
    }));
    test('should handle successful payment flow', (0, _asyncToGenerator2.default)(function* () {
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(true);
      expect(result.transactionId).toBe(mockPaymentIntent);
      expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('/functions/v1/create-payment-intent'), expect.objectContaining({
        method: 'POST',
        headers: expect.objectContaining({
          'Content-Type': 'application/json',
          'Authorization': 'Bearer mock-access-token'
        }),
        body: expect.any(String)
      }));
    }));
  });
  describe('processSubscriptionUpdate', function () {
    beforeEach(function () {
      mockSupabase.from.mockReturnThis();
      mockSupabase.update.mockReturnThis();
      mockSupabase.eq.mockReturnThis();
      mockSupabase.select.mockReturnThis();
      mockSupabase.single.mockResolvedValue({
        data: {},
        error: null
      });
      mockSupabase.insert.mockResolvedValue({
        data: {},
        error: null
      });
    });
    test('should handle profile update failure', (0, _asyncToGenerator2.default)(function* () {
      mockSupabase.single.mockResolvedValueOnce({
        data: null,
        error: {
          message: 'Failed to update profile'
        }
      });
      yield expect(processSubscriptionUpdate(mockUserId, mockPlan, mockPaymentIntent)).resolves.not.toThrow();
      expect(console.error).toHaveBeenCalledWith(expect.stringContaining('Failed to process subscription update after payment:'), expect.anything());
    }));
    test('should handle payment logging failure', (0, _asyncToGenerator2.default)(function* () {
      mockSupabase.single.mockResolvedValueOnce({
        data: {},
        error: null
      });
      mockSupabase.insert.mockResolvedValueOnce({
        data: null,
        error: {
          message: 'Failed to log payment'
        }
      });
      yield expect(processSubscriptionUpdate(mockUserId, mockPlan, mockPaymentIntent)).resolves.not.toThrow();
      expect(console.error).toHaveBeenCalledWith('Error logging payment transaction:', expect.anything());
    }));
    test('should handle network timeout during profile update', (0, _asyncToGenerator2.default)(function* () {
      jest.useFakeTimers();
      mockSupabase.single.mockImplementationOnce(function () {
        return new Promise(function (_, reject) {
          setTimeout(function () {
            reject(new Error('Request timed out'));
          }, 30000);
        });
      });
      var updatePromise = processSubscriptionUpdate(mockUserId, mockPlan, mockPaymentIntent);
      jest.advanceTimersByTime(31000);
      yield expect(updatePromise).resolves.not.toThrow();
      expect(console.error).toHaveBeenCalled();
      jest.useRealTimers();
    }));
    test('should update user profile with correct subscription details', (0, _asyncToGenerator2.default)(function* () {
      yield processSubscriptionUpdate(mockUserId, mockPlan, mockPaymentIntent);
      expect(mockSupabase.from).toHaveBeenCalledWith('profiles');
      expect(mockSupabase.update).toHaveBeenCalledWith(expect.objectContaining({
        role: _userRoleService.UserRole.MVP_DEALER,
        subscription_status: 'active',
        payment_status: 'paid',
        subscription_expiry: expect.any(String)
      }));
      expect(mockSupabase.eq).toHaveBeenCalledWith('id', mockUserId);
    }));
    test('should log successful payment transaction', (0, _asyncToGenerator2.default)(function* () {
      yield processSubscriptionUpdate(mockUserId, mockPlan, mockPaymentIntent);
      expect(mockSupabase.from).toHaveBeenCalledWith('payments');
      expect(mockSupabase.insert).toHaveBeenCalledWith(expect.objectContaining({
        user_id: mockUserId,
        plan_id: mockPlan.id,
        amount: mockPlan.price,
        currency: 'usd',
        status: 'succeeded',
        transaction_id: mockPaymentIntent
      }));
    }));
    test('should log failed payment transaction on error', (0, _asyncToGenerator2.default)(function* () {
      mockSupabase.single.mockRejectedValueOnce(new Error('Database error'));
      yield processSubscriptionUpdate(mockUserId, mockPlan, mockPaymentIntent);
      expect(mockSupabase.from).toHaveBeenCalledWith('payments');
      expect(mockSupabase.insert).toHaveBeenCalledWith(expect.objectContaining({
        user_id: mockUserId,
        plan_id: mockPlan.id,
        amount: mockPlan.price,
        currency: 'usd',
        status: 'failed',
        transaction_id: mockPaymentIntent,
        error_message: 'Post-payment profile update failed.'
      }));
    }));
  });
  describe('Edge cases', function () {
    test('should handle missing Supabase URL environment variable', (0, _asyncToGenerator2.default)(function* () {
      delete _env2.env.EXPO_PUBLIC_SUPABASE_URL;
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toContain('Invalid URL');
    }));
    test('should handle concurrent payment attempts', (0, _asyncToGenerator2.default)(function* () {
      var callCount = 0;
      global.fetch.mockImplementation(function () {
        callCount++;
        if (callCount === 1) {
          return Promise.resolve({
            ok: true,
            json: function json() {
              return Promise.resolve({
                paymentIntent: mockPaymentIntent,
                ephemeralKey: mockEphemeralKey,
                customer: mockCustomer,
                publishableKey: mockPublishableKey
              });
            }
          });
        } else {
          return Promise.resolve({
            ok: false,
            json: function json() {
              return Promise.resolve({
                error: 'Payment already in progress'
              });
            }
          });
        }
      });
      var results = yield Promise.all([createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet), createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet)]);
      expect(results[0].success).toBe(true);
      expect(results[1].success).toBe(false);
      expect(results[1].error).toBe('Payment already in progress');
    }));
    test('should handle JSON parse errors in API response', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: true,
        json: jest.fn().mockRejectedValue(new SyntaxError('Unexpected token < in JSON'))
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toContain('Unexpected token < in JSON');
    }));
    test('should handle empty response from payment intent creation', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: true,
        json: jest.fn().mockResolvedValue(null)
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toContain('Cannot read properties of null');
    }));
    test('should handle rate limiting from Stripe API', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: false,
        status: 429,
        json: jest.fn().mockResolvedValue({
          error: 'Too many requests. Please try again later.'
        })
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Too many requests. Please try again later.');
    }));
    test('should handle Stripe API service outage', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: false,
        status: 503,
        json: jest.fn().mockResolvedValue({
          error: 'Stripe API is currently unavailable'
        })
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Stripe API is currently unavailable');
    }));
    test('should handle invalid currency code', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: false,
        status: 400,
        json: jest.fn().mockResolvedValue({
          error: 'Invalid currency code'
        })
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Invalid currency code');
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJzdXBhYmFzZSIsImF1dGgiLCJnZXRTZXNzaW9uIiwiamVzdCIsImZuIiwiZnJvbSIsIm1vY2tSZXR1cm5UaGlzIiwidXBkYXRlIiwiaW5zZXJ0IiwiZXEiLCJzZWxlY3QiLCJzaW5nbGUiLCJvcmlnaW5hbCIsInJlcXVpcmVBY3R1YWwiLCJPYmplY3QiLCJhc3NpZ24iLCJTVUJTQ1JJUFRJT05fUExBTlMiLCJpZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInByaWNlIiwidHlwZSIsImR1cmF0aW9uIiwiZmVhdHVyZXMiLCJTdWJzY3JpcHRpb25QbGFuVHlwZSIsIkRFQUxFUiIsIk9SR0FOSVpFUiIsIlN1YnNjcmlwdGlvbkR1cmF0aW9uIiwiTU9OVEhMWSIsIkFOTlVBTCIsIl9jYWxjdWxhdGVFeHBpcnlEYXRlIiwibW9ja0ltcGxlbWVudGF0aW9uIiwiZGF0ZSIsIkRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2VudjIiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfc3Vic2NyaXB0aW9uVHlwZXMiLCJfdXNlclJvbGVTZXJ2aWNlIiwiX3JlcXVpcmUiLCJpbml0aWFsaXplU3RyaXBlIiwiY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uIiwicHJvY2Vzc1N1YnNjcmlwdGlvblVwZGF0ZSIsIm9yaWdpbmFsRW52IiwicHJvY2VzcyIsImVudiIsImJlZm9yZUVhY2giLCJyZXNldE1vZHVsZXMiLCJFWFBPX1BVQkxJQ19TVFJJUEVfUFVCTElTSEFCTEVfS0VZIiwiRVhQT19QVUJMSUNfU1VQQUJBU0VfVVJMIiwiY2xlYXJBbGxNb2NrcyIsInNweU9uIiwiY29uc29sZSIsImFmdGVyRWFjaCIsInJlc3RvcmVBbGxNb2NrcyIsImdsb2JhbCIsImZldGNoIiwiZGVzY3JpYmUiLCJtb2NrVXNlcklkIiwibW9ja1BsYW5JZCIsIm1vY2tJbnZhbGlkUGxhbklkIiwibW9ja1BheW1lbnRJbnRlbnQiLCJtb2NrRXBoZW1lcmFsS2V5IiwibW9ja0N1c3RvbWVyIiwibW9ja1B1Ymxpc2hhYmxlS2V5IiwibW9ja1BsYW4iLCJtb2NrSW5pdFBheW1lbnRTaGVldCIsIm1vY2tQcmVzZW50UGF5bWVudFNoZWV0IiwibW9ja1N1cGFiYXNlIiwiYmVmb3JlQWxsIiwiZGVmYXVsdCIsInN0cmlwZVNlcnZpY2UiLCJ0ZXN0IiwicmVzdWx0IiwiZXhwZWN0IiwidG9CZSIsImVycm9yIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRhdGEiLCJzZXNzaW9uIiwiYWNjZXNzX3Rva2VuIiwib2siLCJqc29uIiwicGF5bWVudEludGVudCIsImVwaGVtZXJhbEtleSIsImN1c3RvbWVyIiwicHVibGlzaGFibGVLZXkiLCJ0b0VxdWFsIiwic3VjY2VzcyIsIm5vdCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJtZXNzYWdlIiwidG9Db250YWluIiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsInN0YXR1cyIsImNvZGUiLCJtb2NrSW1wbGVtZW50YXRpb25PbmNlIiwidGhlbiIsInVzZUZha2VUaW1lcnMiLCJQcm9taXNlIiwiXyIsInJlamVjdCIsInNldFRpbWVvdXQiLCJyZXN1bHRQcm9taXNlIiwiYWR2YW5jZVRpbWVyc0J5VGltZSIsInVzZVJlYWxUaW1lcnMiLCJ0cmFuc2FjdGlvbklkIiwic3RyaW5nQ29udGFpbmluZyIsIm9iamVjdENvbnRhaW5pbmciLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsImFueSIsIlN0cmluZyIsIm1vY2tSZXNvbHZlZFZhbHVlT25jZSIsInJlc29sdmVzIiwidG9UaHJvdyIsImFueXRoaW5nIiwidXBkYXRlUHJvbWlzZSIsInJvbGUiLCJVc2VyUm9sZSIsIk1WUF9ERUFMRVIiLCJzdWJzY3JpcHRpb25fc3RhdHVzIiwicGF5bWVudF9zdGF0dXMiLCJzdWJzY3JpcHRpb25fZXhwaXJ5IiwidXNlcl9pZCIsInBsYW5faWQiLCJhbW91bnQiLCJjdXJyZW5jeSIsInRyYW5zYWN0aW9uX2lkIiwibW9ja1JlamVjdGVkVmFsdWVPbmNlIiwiZXJyb3JfbWVzc2FnZSIsImNhbGxDb3VudCIsInJlc29sdmUiLCJyZXN1bHRzIiwiYWxsIiwiU3ludGF4RXJyb3IiXSwic291cmNlcyI6WyJzdHJpcGVQYXltZW50U2VydmljZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGVzdCBzdWl0ZSBmb3Igc3RyaXBlUGF5bWVudFNlcnZpY2UudHNcbiAqIFxuICogVGhpcyB0ZXN0IHN1aXRlIGZvY3VzZXMgb24gZmFpbHVyZSBwYXRocyBhbmQgZWRnZSBjYXNlcyB0byBlbnN1cmVcbiAqIHJvYnVzdCBlcnJvciBoYW5kbGluZyBpbiB0aGUgcGF5bWVudCBwcm9jZXNzaW5nIGZsb3cuXG4gKi9cblxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uUGxhbiwgU3Vic2NyaXB0aW9uUGxhblR5cGUsIFN1YnNjcmlwdGlvbkR1cmF0aW9uIH0gZnJvbSAnLi4vLi4vc3JjL3NlcnZpY2VzL3N1YnNjcmlwdGlvblR5cGVzJztcbmltcG9ydCB7IFVzZXJSb2xlIH0gZnJvbSAnLi4vLi4vc3JjL3NlcnZpY2VzL3VzZXJSb2xlU2VydmljZSc7XG5cbi8vIFRoZXNlIHdpbGwgYmUgcG9wdWxhdGVkIHZpYSBhIGR5bmFtaWMgaW1wb3J0ICoqYWZ0ZXIqKiB3ZSBmaW5pc2ggZW52LXZhciBzZXR1cFxubGV0IGluaXRpYWxpemVTdHJpcGU6IGFueTtcbmxldCBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb246IGFueTtcbmxldCBwcm9jZXNzU3Vic2NyaXB0aW9uVXBkYXRlOiBhbnk7XG5cbi8vIE1vY2sgdGhlIHN1cGFiYXNlIGNsaWVudFxuamVzdC5tb2NrKCcuLi8uLi9zcmMvc3VwYWJhc2UnLCAoKSA9PiAoe1xuICBzdXBhYmFzZToge1xuICAgIGF1dGg6IHtcbiAgICAgIGdldFNlc3Npb246IGplc3QuZm4oKSxcbiAgICB9LFxuICAgIGZyb206IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIHVwZGF0ZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgaW5zZXJ0OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICBzaW5nbGU6IGplc3QuZm4oKSxcbiAgfSxcbn0pKTtcblxuLy8gTW9jayB0aGUgc3Vic2NyaXB0aW9uVHlwZXMgaW1wb3J0c1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvc2VydmljZXMvc3Vic2NyaXB0aW9uVHlwZXMnLCAoKSA9PiB7XG4gIGNvbnN0IG9yaWdpbmFsID0gamVzdC5yZXF1aXJlQWN0dWFsKCcuLi8uLi9zcmMvc2VydmljZXMvc3Vic2NyaXB0aW9uVHlwZXMnKTtcbiAgcmV0dXJuIHtcbiAgICAuLi5vcmlnaW5hbCxcbiAgICBTVUJTQ1JJUFRJT05fUExBTlM6IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdkZWFsZXItbW9udGhseScsXG4gICAgICAgIG5hbWU6ICdNVlAgRGVhbGVyIE1vbnRobHknLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ01vbnRobHkgc3Vic2NyaXB0aW9uIGZvciBNVlAgRGVhbGVycycsXG4gICAgICAgIHByaWNlOiA5Ljk5LFxuICAgICAgICB0eXBlOiAnZGVhbGVyJyxcbiAgICAgICAgZHVyYXRpb246ICdtb250aGx5JyxcbiAgICAgICAgZmVhdHVyZXM6IFsnRmVhdHVyZSAxJywgJ0ZlYXR1cmUgMiddLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdkZWFsZXItYW5udWFsJyxcbiAgICAgICAgbmFtZTogJ01WUCBEZWFsZXIgQW5udWFsJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdBbm51YWwgc3Vic2NyaXB0aW9uIGZvciBNVlAgRGVhbGVycycsXG4gICAgICAgIHByaWNlOiA5OS45OSxcbiAgICAgICAgdHlwZTogJ2RlYWxlcicsXG4gICAgICAgIGR1cmF0aW9uOiAnYW5udWFsJyxcbiAgICAgICAgZmVhdHVyZXM6IFsnRmVhdHVyZSAxJywgJ0ZlYXR1cmUgMicsICdGZWF0dXJlIDMnXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnb3JnYW5pemVyLW1vbnRobHknLFxuICAgICAgICBuYW1lOiAnU2hvdyBPcmdhbml6ZXIgTW9udGhseScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTW9udGhseSBzdWJzY3JpcHRpb24gZm9yIFNob3cgT3JnYW5pemVycycsXG4gICAgICAgIHByaWNlOiAxOS45OSxcbiAgICAgICAgdHlwZTogJ29yZ2FuaXplcicsXG4gICAgICAgIGR1cmF0aW9uOiAnbW9udGhseScsXG4gICAgICAgIGZlYXR1cmVzOiBbJ0ZlYXR1cmUgQScsICdGZWF0dXJlIEInXSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBTdWJzY3JpcHRpb25QbGFuVHlwZToge1xuICAgICAgREVBTEVSOiAnZGVhbGVyJyxcbiAgICAgIE9SR0FOSVpFUjogJ29yZ2FuaXplcicsXG4gICAgfSxcbiAgICBTdWJzY3JpcHRpb25EdXJhdGlvbjoge1xuICAgICAgTU9OVEhMWTogJ21vbnRobHknLFxuICAgICAgQU5OVUFMOiAnYW5udWFsJyxcbiAgICB9LFxuICAgIF9jYWxjdWxhdGVFeHBpcnlEYXRlOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgMzApOyAvLyBEZWZhdWx0IHRvICszMCBkYXlzXG4gICAgICByZXR1cm4gZGF0ZTtcbiAgICB9KSxcbiAgfTtcbn0pO1xuXG4vLyBNb2NrIGVudmlyb25tZW50IHZhcmlhYmxlc1xuY29uc3Qgb3JpZ2luYWxFbnYgPSBwcm9jZXNzLmVudjtcbmJlZm9yZUVhY2goKCkgPT4ge1xuICBqZXN0LnJlc2V0TW9kdWxlcygpO1xuICBwcm9jZXNzLmVudiA9IHsgLi4ub3JpZ2luYWxFbnYgfTtcbiAgcHJvY2Vzcy5lbnYuRVhQT19QVUJMSUNfU1RSSVBFX1BVQkxJU0hBQkxFX0tFWSA9ICdwa190ZXN0X21vY2tfa2V5JztcbiAgcHJvY2Vzcy5lbnYuRVhQT19QVUJMSUNfU1VQQUJBU0VfVVJMID0gJ2h0dHBzOi8vbW9jay1zdXBhYmFzZS11cmwuY29tJztcblxuICAvLyBSZXNldCBhbGwgbW9ja3NcbiAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIFxuICAvLyBNb2NrIGNvbnNvbGUgbWV0aG9kcyB0byBwcmV2ZW50IG5vaXNlIGluIHRlc3Qgb3V0cHV0XG4gIGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcbiAgamVzdC5zcHlPbihjb25zb2xlLCAnd2FybicpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XG59KTtcblxuYWZ0ZXJFYWNoKCgpID0+IHtcbiAgcHJvY2Vzcy5lbnYgPSBvcmlnaW5hbEVudjtcbiAgamVzdC5yZXN0b3JlQWxsTW9ja3MoKTtcbn0pO1xuXG4vLyBNb2NrIGdsb2JhbCBmZXRjaFxuZ2xvYmFsLmZldGNoID0gamVzdC5mbigpO1xuXG5kZXNjcmliZSgnc3RyaXBlUGF5bWVudFNlcnZpY2UnLCAoKSA9PiB7XG4gIC8vIE1vY2sgZGF0YVxuICBjb25zdCBtb2NrVXNlcklkID0gJ3VzZXItMTIzJztcbiAgY29uc3QgbW9ja1BsYW5JZCA9ICdkZWFsZXItbW9udGhseSc7XG4gIGNvbnN0IG1vY2tJbnZhbGlkUGxhbklkID0gJ2ludmFsaWQtcGxhbic7XG4gIGNvbnN0IG1vY2tQYXltZW50SW50ZW50ID0gJ3BpX21vY2tfcGF5bWVudF9pbnRlbnQnO1xuICBjb25zdCBtb2NrRXBoZW1lcmFsS2V5ID0gJ2VrX21vY2tfZXBoZW1lcmFsX2tleSc7XG4gIGNvbnN0IG1vY2tDdXN0b21lciA9ICdjdXNfbW9ja19jdXN0b21lcic7XG4gIGNvbnN0IG1vY2tQdWJsaXNoYWJsZUtleSA9ICdwa190ZXN0X21vY2tfa2V5JztcbiAgXG4gIGNvbnN0IG1vY2tQbGFuOiBTdWJzY3JpcHRpb25QbGFuID0ge1xuICAgIGlkOiAnZGVhbGVyLW1vbnRobHknLFxuICAgIG5hbWU6ICdNVlAgRGVhbGVyIE1vbnRobHknLFxuICAgIGRlc2NyaXB0aW9uOiAnTW9udGhseSBzdWJzY3JpcHRpb24gZm9yIE1WUCBEZWFsZXJzJyxcbiAgICBwcmljZTogOS45OSxcbiAgICB0eXBlOiBTdWJzY3JpcHRpb25QbGFuVHlwZS5ERUFMRVIsXG4gICAgZHVyYXRpb246IFN1YnNjcmlwdGlvbkR1cmF0aW9uLk1PTlRITFksXG4gICAgZmVhdHVyZXM6IFsnRmVhdHVyZSAxJywgJ0ZlYXR1cmUgMiddLFxuICB9O1xuXG4gIC8vIE1vY2sgU3RyaXBlIGZ1bmN0aW9uc1xuICBjb25zdCBtb2NrSW5pdFBheW1lbnRTaGVldCA9IGplc3QuZm4oKTtcbiAgY29uc3QgbW9ja1ByZXNlbnRQYXltZW50U2hlZXQgPSBqZXN0LmZuKCk7XG5cbiAgLy8gTW9jayBTdXBhYmFzZSByZXNwb25zZXNcbiAgY29uc3QgbW9ja1N1cGFiYXNlID0gcmVxdWlyZSgnLi4vLi4vc3JjL3N1cGFiYXNlJykuc3VwYWJhc2U7XG5cbiAgLy8gSW1wb3J0IHRoZSBzdHJpcGUgc2VydmljZSBmdW5jdGlvbnMgKmFmdGVyKiBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHNldFxuICAvLyAodGhleSBhcmUgY29uZmlndXJlZCBpbiB0aGUgZ2xvYmFsIGBiZWZvcmVFYWNoYCBhYm92ZSkuICBUaGlzIGd1YXJhbnRlZXNcbiAgLy8gdGhhdCB0aGUgbW9kdWxlLWxldmVsIGNvbnN0YW50cyBpbnNpZGUgYHN0cmlwZVBheW1lbnRTZXJ2aWNlYCBwaWNrIHVwIHRoZVxuICAvLyBjb3JyZWN0IGBwcm9jZXNzLmVudmAgdmFsdWVzIGZvciBlYWNoIHRlc3QgcnVuLlxuICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHN0cmlwZVNlcnZpY2UgPSBhd2FpdCBpbXBvcnQoJy4uLy4uL3NyYy9zZXJ2aWNlcy9zdHJpcGVQYXltZW50U2VydmljZScpO1xuICAgIGluaXRpYWxpemVTdHJpcGUgPSBzdHJpcGVTZXJ2aWNlLmluaXRpYWxpemVTdHJpcGU7XG4gICAgY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uID1cbiAgICAgIHN0cmlwZVNlcnZpY2UuY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uO1xuICAgIHByb2Nlc3NTdWJzY3JpcHRpb25VcGRhdGUgPSBzdHJpcGVTZXJ2aWNlLnByb2Nlc3NTdWJzY3JpcHRpb25VcGRhdGU7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpbml0aWFsaXplU3RyaXBlJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gdHJ1ZSB3aGVuIHB1Ymxpc2hhYmxlIGtleSBpcyBzZXQnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBwcm9jZXNzLmVudi5FWFBPX1BVQkxJQ19TVFJJUEVfUFVCTElTSEFCTEVfS0VZID0gJ3BrX3Rlc3RfdmFsaWRfa2V5JztcbiAgICAgIFxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBpbml0aWFsaXplU3RyaXBlKCk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiBwdWJsaXNoYWJsZSBrZXkgaXMgbWlzc2luZycsICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5FWFBPX1BVQkxJQ19TVFJJUEVfUFVCTElTSEFCTEVfS0VZO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGluaXRpYWxpemVTdHJpcGUoKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChjb25zb2xlLmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ1N0cmlwZSBwdWJsaXNoYWJsZSBrZXkgaXMgbm90IHNldC4gUGxlYXNlIGNoZWNrIHlvdXIgZW52aXJvbm1lbnQgdmFyaWFibGVzLidcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGZhbHNlIHdoZW4gcHVibGlzaGFibGUga2V5IGlzIGVtcHR5JywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgcHJvY2Vzcy5lbnYuRVhQT19QVUJMSUNfU1RSSVBFX1BVQkxJU0hBQkxFX0tFWSA9ICcnO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGluaXRpYWxpemVTdHJpcGUoKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChjb25zb2xlLmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ1N0cmlwZSBwdWJsaXNoYWJsZSBrZXkgaXMgbm90IHNldC4gUGxlYXNlIGNoZWNrIHlvdXIgZW52aXJvbm1lbnQgdmFyaWFibGVzLidcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24nLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAvLyBEZWZhdWx0IG1vY2sgZm9yIHN1Y2Nlc3NmdWwgc2Vzc2lvbiByZXRyaWV2YWxcbiAgICAgIG1vY2tTdXBhYmFzZS5hdXRoLmdldFNlc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgYWNjZXNzX3Rva2VuOiAnbW9jay1hY2Nlc3MtdG9rZW4nLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIERlZmF1bHQgbW9jayBmb3Igc3VjY2Vzc2Z1bCBmZXRjaFxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgcGF5bWVudEludGVudDogbW9ja1BheW1lbnRJbnRlbnQsXG4gICAgICAgICAgZXBoZW1lcmFsS2V5OiBtb2NrRXBoZW1lcmFsS2V5LFxuICAgICAgICAgIGN1c3RvbWVyOiBtb2NrQ3VzdG9tZXIsXG4gICAgICAgICAgcHVibGlzaGFibGVLZXk6IG1vY2tQdWJsaXNoYWJsZUtleSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgLy8gRGVmYXVsdCBtb2NrcyBmb3IgU3RyaXBlIGZ1bmN0aW9uc1xuICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQubW9ja1Jlc29sdmVkVmFsdWUoeyBlcnJvcjogbnVsbCB9KTtcbiAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZXJyb3I6IG51bGwgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGVycm9yIGZvciBpbnZhbGlkIHBsYW4gSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgbW9ja0ludmFsaWRQbGFuSWQsXG4gICAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0LFxuICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnU3Vic2NyaXB0aW9uIHBsYW4gbm90IGZvdW5kLicsXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHNlc3Npb24gcmV0cmlldmFsIGZhaWx1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrU3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyBzZXNzaW9uOiBudWxsIH0sXG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gcmV0cmlldmUgc2Vzc2lvbicgfSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQsXG4gICAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0NvbnRhaW4oJ0ZhaWxlZCB0byByZXRyaWV2ZSBzZXNzaW9uJyk7XG4gICAgICBleHBlY3QoY29uc29sZS5lcnJvcikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBuZXR3b3JrIGZhaWx1cmUgZHVyaW5nIHBheW1lbnQgaW50ZW50IGNyZWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKTtcbiAgICAgIFxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24oXG4gICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgIG1vY2tQbGFuSWQsXG4gICAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0LFxuICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnTmV0d29yayBlcnJvcicpO1xuICAgICAgZXhwZWN0KGNvbnNvbGUuZXJyb3IpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgcGF5bWVudCBpbnRlbnQgY3JlYXRpb24gZXJyb3IgKDQwMCknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogZmFsc2UsXG4gICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICBqc29uOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIGVycm9yOiAnSW52YWxpZCByZXF1ZXN0IHBhcmFtZXRlcnMnLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQsXG4gICAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdJbnZhbGlkIHJlcXVlc3QgcGFyYW1ldGVycycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBwYXltZW50IGludGVudCBjcmVhdGlvbiBlcnJvciAoNDAxKScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAgc3RhdHVzOiA0MDEsXG4gICAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgZXJyb3I6ICdVbmF1dGhvcml6ZWQgYWNjZXNzJyxcbiAgICAgICAgfSksXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24oXG4gICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgIG1vY2tQbGFuSWQsXG4gICAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0LFxuICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnVW5hdXRob3JpemVkIGFjY2VzcycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBwYXltZW50IGludGVudCBjcmVhdGlvbiBlcnJvciAoNTAwKScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgZXJyb3I6ICdTZXJ2ZXIgZXJyb3InLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQsXG4gICAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdTZXJ2ZXIgZXJyb3InKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbWFsZm9ybWVkIEFQSSByZXNwb25zZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIC8vIE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzXG4gICAgICAgICAgY3VzdG9tZXI6IG1vY2tDdXN0b21lcixcbiAgICAgICAgfSksXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24oXG4gICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgIG1vY2tQbGFuSWQsXG4gICAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0LFxuICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9Db250YWluKCdDYW5ub3QgcmVhZCBwcm9wZXJ0aWVzIG9mIHVuZGVmaW5lZCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBTdHJpcGUgaW5pdFBheW1lbnRTaGVldCBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZXJyb3I6IHsgY29kZTogJ2luaXRpYWxpemF0aW9uX2Vycm9yJywgbWVzc2FnZTogJ0ZhaWxlZCB0byBpbml0aWFsaXplIHBheW1lbnQgc2hlZXQnIH0sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24oXG4gICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgIG1vY2tQbGFuSWQsXG4gICAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0LFxuICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnSW5pdGlhbGl6YXRpb24gZmFpbGVkOiBGYWlsZWQgdG8gaW5pdGlhbGl6ZSBwYXltZW50IHNoZWV0Jyk7XG4gICAgICBleHBlY3QoY29uc29sZS5lcnJvcikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBTdHJpcGUgcHJlc2VudFBheW1lbnRTaGVldCBjYW5jZWxlZCBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZXJyb3I6IHsgY29kZTogJ0NhbmNlbGVkJywgbWVzc2FnZTogJ1RoZSBwYXltZW50IHdhcyBjYW5jZWxlZCcgfSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQsXG4gICAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdQYXltZW50IHdhcyBjYW5jZWxlZC4nKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgU3RyaXBlIHByZXNlbnRQYXltZW50U2hlZXQgcGF5bWVudCBmYWlsdXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1ByZXNlbnRQYXltZW50U2hlZXQubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBlcnJvcjogeyBjb2RlOiAncGF5bWVudF9mYWlsZWQnLCBtZXNzYWdlOiAnVGhlIHBheW1lbnQgZmFpbGVkJyB9LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uKFxuICAgICAgICBtb2NrVXNlcklkLFxuICAgICAgICBtb2NrUGxhbklkLFxuICAgICAgICBtb2NrSW5pdFBheW1lbnRTaGVldCxcbiAgICAgICAgbW9ja1ByZXNlbnRQYXltZW50U2hlZXRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmUoJ1BheW1lbnQgZmFpbGVkOiBUaGUgcGF5bWVudCBmYWlsZWQnKTtcbiAgICAgIGV4cGVjdChjb25zb2xlLmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHBvc3QtcGF5bWVudCBwcm9jZXNzaW5nIGZhaWx1cmVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgLy8gTW9jayBwcm9jZXNzU3Vic2NyaXB0aW9uVXBkYXRlIHRvIGZhaWxcbiAgICAgIGplc3Quc3B5T24oZ2xvYmFsLCAnUHJvbWlzZScpLm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRoZW46ICgpID0+IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHByb2Nlc3Mgc3Vic2NyaXB0aW9uJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSBhcyBhbnk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24oXG4gICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgIG1vY2tQbGFuSWQsXG4gICAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0LFxuICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9Db250YWluKCdGYWlsZWQgdG8gcHJvY2VzcyBzdWJzY3JpcHRpb24nKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdGltZW91dCBkdXJpbmcgcGF5bWVudCBpbnRlbnQgY3JlYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBqZXN0LnVzZUZha2VUaW1lcnMoKTtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignUmVxdWVzdCB0aW1lZCBvdXQnKSk7XG4gICAgICAgICAgfSwgMzAwMDApO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdFByb21pc2UgPSBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24oXG4gICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgIG1vY2tQbGFuSWQsXG4gICAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0LFxuICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gRmFzdC1mb3J3YXJkIHRpbWVcbiAgICAgIGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZSgzMTAwMCk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzdWx0UHJvbWlzZTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdSZXF1ZXN0IHRpbWVkIG91dCcpO1xuICAgICAgXG4gICAgICBqZXN0LnVzZVJlYWxUaW1lcnMoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZXhwaXJlZCBzZXNzaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1N1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHsgc2Vzc2lvbjogbnVsbCB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQsXG4gICAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0NvbnRhaW4oJ0ZhaWxlZCB0byBjcmVhdGUgcGF5bWVudCBpbnRlbnQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCB1c2VyIElEJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAganNvbjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgdXNlciBJRCcsXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uKFxuICAgICAgICAnaW52YWxpZC11c2VyLWlkJyxcbiAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQsXG4gICAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdJbnZhbGlkIHVzZXIgSUQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgc3VjY2Vzc2Z1bCBwYXltZW50IGZsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQsXG4gICAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudHJhbnNhY3Rpb25JZCkudG9CZShtb2NrUGF5bWVudEludGVudCk7XG4gICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJy9mdW5jdGlvbnMvdjEvY3JlYXRlLXBheW1lbnQtaW50ZW50JyksXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyIG1vY2stYWNjZXNzLXRva2VuJyxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBib2R5OiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncHJvY2Vzc1N1YnNjcmlwdGlvblVwZGF0ZScsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIC8vIERlZmF1bHQgbW9jayBmb3Igc3VjY2Vzc2Z1bCBwcm9maWxlIHVwZGF0ZVxuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblRoaXMoKTtcbiAgICAgIG1vY2tTdXBhYmFzZS51cGRhdGUubW9ja1JldHVyblRoaXMoKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5lcS5tb2NrUmV0dXJuVGhpcygpO1xuICAgICAgbW9ja1N1cGFiYXNlLnNlbGVjdC5tb2NrUmV0dXJuVGhpcygpO1xuICAgICAgbW9ja1N1cGFiYXNlLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IHt9LCBlcnJvcjogbnVsbCB9KTtcbiAgICAgIG1vY2tTdXBhYmFzZS5pbnNlcnQubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiB7fSwgZXJyb3I6IG51bGwgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHByb2ZpbGUgdXBkYXRlIGZhaWx1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrU3VwYWJhc2Uuc2luZ2xlLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gdXBkYXRlIHByb2ZpbGUnIH0sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIHByb2Nlc3NTdWJzY3JpcHRpb25VcGRhdGUobW9ja1VzZXJJZCwgbW9ja1BsYW4sIG1vY2tQYXltZW50SW50ZW50KVxuICAgICAgKS5yZXNvbHZlcy5ub3QudG9UaHJvdygpO1xuICAgICAgXG4gICAgICBleHBlY3QoY29uc29sZS5lcnJvcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdGYWlsZWQgdG8gcHJvY2VzcyBzdWJzY3JpcHRpb24gdXBkYXRlIGFmdGVyIHBheW1lbnQ6JyksXG4gICAgICAgIGV4cGVjdC5hbnl0aGluZygpXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBwYXltZW50IGxvZ2dpbmcgZmFpbHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIC8vIEZpcnN0IGNhbGwgc3VjY2VlZHMgKHByb2ZpbGUgdXBkYXRlKVxuICAgICAgbW9ja1N1cGFiYXNlLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2Vjb25kIGNhbGwgZmFpbHMgKHBheW1lbnQgbG9nZ2luZylcbiAgICAgIG1vY2tTdXBhYmFzZS5pbnNlcnQubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBsb2cgcGF5bWVudCcgfSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgcHJvY2Vzc1N1YnNjcmlwdGlvblVwZGF0ZShtb2NrVXNlcklkLCBtb2NrUGxhbiwgbW9ja1BheW1lbnRJbnRlbnQpXG4gICAgICApLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjb25zb2xlLmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ0Vycm9yIGxvZ2dpbmcgcGF5bWVudCB0cmFuc2FjdGlvbjonLFxuICAgICAgICBleHBlY3QuYW55dGhpbmcoKVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbmV0d29yayB0aW1lb3V0IGR1cmluZyBwcm9maWxlIHVwZGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGplc3QudXNlRmFrZVRpbWVycygpO1xuICAgICAgbW9ja1N1cGFiYXNlLnNpbmdsZS5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1JlcXVlc3QgdGltZWQgb3V0JykpO1xuICAgICAgICAgIH0sIDMwMDAwKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCB1cGRhdGVQcm9taXNlID0gcHJvY2Vzc1N1YnNjcmlwdGlvblVwZGF0ZShcbiAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgbW9ja1BsYW4sXG4gICAgICAgIG1vY2tQYXltZW50SW50ZW50XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBGYXN0LWZvcndhcmQgdGltZVxuICAgICAgamVzdC5hZHZhbmNlVGltZXJzQnlUaW1lKDMxMDAwKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QodXBkYXRlUHJvbWlzZSkucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcbiAgICAgIGV4cGVjdChjb25zb2xlLmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBcbiAgICAgIGplc3QudXNlUmVhbFRpbWVycygpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHVwZGF0ZSB1c2VyIHByb2ZpbGUgd2l0aCBjb3JyZWN0IHN1YnNjcmlwdGlvbiBkZXRhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBwcm9jZXNzU3Vic2NyaXB0aW9uVXBkYXRlKG1vY2tVc2VySWQsIG1vY2tQbGFuLCBtb2NrUGF5bWVudEludGVudCk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5mcm9tKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgncHJvZmlsZXMnKTtcbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2UudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHJvbGU6IFVzZXJSb2xlLk1WUF9ERUFMRVIsXG4gICAgICAgICAgc3Vic2NyaXB0aW9uX3N0YXR1czogJ2FjdGl2ZScsXG4gICAgICAgICAgcGF5bWVudF9zdGF0dXM6ICdwYWlkJyxcbiAgICAgICAgICBzdWJzY3JpcHRpb25fZXhwaXJ5OiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5lcSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2lkJywgbW9ja1VzZXJJZCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgbG9nIHN1Y2Nlc3NmdWwgcGF5bWVudCB0cmFuc2FjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgcHJvY2Vzc1N1YnNjcmlwdGlvblVwZGF0ZShtb2NrVXNlcklkLCBtb2NrUGxhbiwgbW9ja1BheW1lbnRJbnRlbnQpO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2UuZnJvbSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3BheW1lbnRzJyk7XG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlLmluc2VydCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB1c2VyX2lkOiBtb2NrVXNlcklkLFxuICAgICAgICAgIHBsYW5faWQ6IG1vY2tQbGFuLmlkLFxuICAgICAgICAgIGFtb3VudDogbW9ja1BsYW4ucHJpY2UsXG4gICAgICAgICAgY3VycmVuY3k6ICd1c2QnLFxuICAgICAgICAgIHN0YXR1czogJ3N1Y2NlZWRlZCcsXG4gICAgICAgICAgdHJhbnNhY3Rpb25faWQ6IG1vY2tQYXltZW50SW50ZW50LFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBsb2cgZmFpbGVkIHBheW1lbnQgdHJhbnNhY3Rpb24gb24gZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrU3VwYWJhc2Uuc2luZ2xlLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yJykpO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IHByb2Nlc3NTdWJzY3JpcHRpb25VcGRhdGUobW9ja1VzZXJJZCwgbW9ja1BsYW4sIG1vY2tQYXltZW50SW50ZW50KTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlLmZyb20pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdwYXltZW50cycpO1xuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5pbnNlcnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdXNlcl9pZDogbW9ja1VzZXJJZCxcbiAgICAgICAgICBwbGFuX2lkOiBtb2NrUGxhbi5pZCxcbiAgICAgICAgICBhbW91bnQ6IG1vY2tQbGFuLnByaWNlLFxuICAgICAgICAgIGN1cnJlbmN5OiAndXNkJyxcbiAgICAgICAgICBzdGF0dXM6ICdmYWlsZWQnLFxuICAgICAgICAgIHRyYW5zYWN0aW9uX2lkOiBtb2NrUGF5bWVudEludGVudCxcbiAgICAgICAgICBlcnJvcl9tZXNzYWdlOiAnUG9zdC1wYXltZW50IHByb2ZpbGUgdXBkYXRlIGZhaWxlZC4nLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VkZ2UgY2FzZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBtaXNzaW5nIFN1cGFiYXNlIFVSTCBlbnZpcm9ubWVudCB2YXJpYWJsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5FWFBPX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG4gICAgICBcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uKFxuICAgICAgICBtb2NrVXNlcklkLFxuICAgICAgICBtb2NrUGxhbklkLFxuICAgICAgICBtb2NrSW5pdFBheW1lbnRTaGVldCxcbiAgICAgICAgbW9ja1ByZXNlbnRQYXltZW50U2hlZXRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQ29udGFpbignSW52YWxpZCBVUkwnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgY29uY3VycmVudCBwYXltZW50IGF0dGVtcHRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbGV0IGNhbGxDb3VudCA9IDA7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgY2FsbENvdW50Kys7XG4gICAgICAgIGlmIChjYWxsQ291bnQgPT09IDEpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgcGF5bWVudEludGVudDogbW9ja1BheW1lbnRJbnRlbnQsXG4gICAgICAgICAgICAgIGVwaGVtZXJhbEtleTogbW9ja0VwaGVtZXJhbEtleSxcbiAgICAgICAgICAgICAgY3VzdG9tZXI6IG1vY2tDdXN0b21lcixcbiAgICAgICAgICAgICAgcHVibGlzaGFibGVLZXk6IG1vY2tQdWJsaXNoYWJsZUtleSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgZXJyb3I6ICdQYXltZW50IGFscmVhZHkgaW4gcHJvZ3Jlc3MnLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgICBtb2NrVXNlcklkLFxuICAgICAgICAgIG1vY2tQbGFuSWQsXG4gICAgICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQsXG4gICAgICAgICAgbW9ja1ByZXNlbnRQYXltZW50U2hlZXRcbiAgICAgICAgKSxcbiAgICAgICAgY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uKFxuICAgICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgICBtb2NrSW5pdFBheW1lbnRTaGVldCxcbiAgICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgICApLFxuICAgICAgXSk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdHNbMF0uc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzWzFdLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdHNbMV0uZXJyb3IpLnRvQmUoJ1BheW1lbnQgYWxyZWFkeSBpbiBwcm9ncmVzcycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBKU09OIHBhcnNlIGVycm9ycyBpbiBBUEkgcmVzcG9uc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBTeW50YXhFcnJvcignVW5leHBlY3RlZCB0b2tlbiA8IGluIEpTT04nKSksXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24oXG4gICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgIG1vY2tQbGFuSWQsXG4gICAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0LFxuICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9Db250YWluKCdVbmV4cGVjdGVkIHRva2VuIDwgaW4gSlNPTicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSByZXNwb25zZSBmcm9tIHBheW1lbnQgaW50ZW50IGNyZWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQsXG4gICAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0NvbnRhaW4oJ0Nhbm5vdCByZWFkIHByb3BlcnRpZXMgb2YgbnVsbCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSByYXRlIGxpbWl0aW5nIGZyb20gU3RyaXBlIEFQSScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAgc3RhdHVzOiA0MjksXG4gICAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgZXJyb3I6ICdUb28gbWFueSByZXF1ZXN0cy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQsXG4gICAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdUb28gbWFueSByZXF1ZXN0cy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgU3RyaXBlIEFQSSBzZXJ2aWNlIG91dGFnZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAgc3RhdHVzOiA1MDMsXG4gICAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgZXJyb3I6ICdTdHJpcGUgQVBJIGlzIGN1cnJlbnRseSB1bmF2YWlsYWJsZScsXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uKFxuICAgICAgICBtb2NrVXNlcklkLFxuICAgICAgICBtb2NrUGxhbklkLFxuICAgICAgICBtb2NrSW5pdFBheW1lbnRTaGVldCxcbiAgICAgICAgbW9ja1ByZXNlbnRQYXltZW50U2hlZXRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmUoJ1N0cmlwZSBBUEkgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgY3VycmVuY3kgY29kZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIGN1cnJlbmN5IGNvZGUnLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQsXG4gICAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdJbnZhbGlkIGN1cnJlbmN5IGNvZGUnKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBZ0JBQSxXQUFBLEdBQUtDLElBQUksQ0FBQyxvQkFBb0IsRUFBRTtFQUFBLE9BQU87SUFDckNDLFFBQVEsRUFBRTtNQUNSQyxJQUFJLEVBQUU7UUFDSkMsVUFBVSxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQztNQUN0QixDQUFDO01BQ0RDLElBQUksRUFBRUYsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDRSxjQUFjLENBQUMsQ0FBQztNQUNoQ0MsTUFBTSxFQUFFSixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNFLGNBQWMsQ0FBQyxDQUFDO01BQ2xDRSxNQUFNLEVBQUVMLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0UsY0FBYyxDQUFDLENBQUM7TUFDbENHLEVBQUUsRUFBRU4sSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDRSxjQUFjLENBQUMsQ0FBQztNQUM5QkksTUFBTSxFQUFFUCxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNFLGNBQWMsQ0FBQyxDQUFDO01BQ2xDSyxNQUFNLEVBQUVSLElBQUksQ0FBQ0MsRUFBRSxDQUFDO0lBQ2xCO0VBQ0YsQ0FBQztBQUFBLENBQUMsQ0FBQztBQUdITixXQUFBLEdBQUtDLElBQUksQ0FBQyxzQ0FBc0MsRUFBRSxZQUFNO0VBQ3RELElBQU1hLFFBQVEsR0FBR1QsSUFBSSxDQUFDVSxhQUFhLENBQUMsc0NBQXNDLENBQUM7RUFDM0UsT0FBQUMsTUFBQSxDQUFBQyxNQUFBLEtBQ0tILFFBQVE7SUFDWEksa0JBQWtCLEVBQUUsQ0FDbEI7TUFDRUMsRUFBRSxFQUFFLGdCQUFnQjtNQUNwQkMsSUFBSSxF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