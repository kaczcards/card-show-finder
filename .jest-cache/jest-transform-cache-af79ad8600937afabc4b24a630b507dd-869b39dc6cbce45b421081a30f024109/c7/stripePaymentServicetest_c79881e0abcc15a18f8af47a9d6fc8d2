4a78da0fc72947e07d05259202a5e3a6
_getJestObj().mock('../../src/supabase', function () {
  return {
    supabase: {
      auth: {
        getSession: jest.fn()
      },
      from: jest.fn().mockReturnThis(),
      update: jest.fn().mockReturnThis(),
      insert: jest.fn().mockReturnThis(),
      eq: jest.fn().mockReturnThis(),
      select: jest.fn().mockReturnThis(),
      single: jest.fn()
    }
  };
});
_getJestObj().mock('../../src/services/subscriptionTypes', function () {
  var original = jest.requireActual('../../src/services/subscriptionTypes');
  return Object.assign({}, original, {
    SUBSCRIPTION_PLANS: [{
      id: 'dealer-monthly',
      name: 'MVP Dealer Monthly',
      description: 'Monthly subscription for MVP Dealers',
      price: 9.99,
      type: 'dealer',
      duration: 'monthly',
      features: ['Feature 1', 'Feature 2']
    }, {
      id: 'dealer-annual',
      name: 'MVP Dealer Annual',
      description: 'Annual subscription for MVP Dealers',
      price: 99.99,
      type: 'dealer',
      duration: 'annual',
      features: ['Feature 1', 'Feature 2', 'Feature 3']
    }, {
      id: 'organizer-monthly',
      name: 'Show Organizer Monthly',
      description: 'Monthly subscription for Show Organizers',
      price: 19.99,
      type: 'organizer',
      duration: 'monthly',
      features: ['Feature A', 'Feature B']
    }],
    SubscriptionPlanType: {
      DEALER: 'dealer',
      ORGANIZER: 'organizer'
    },
    SubscriptionDuration: {
      MONTHLY: 'monthly',
      ANNUAL: 'annual'
    },
    _calculateExpiryDate: jest.fn().mockImplementation(function () {
      var date = new Date();
      date.setDate(date.getDate() + 30);
      return date;
    })
  });
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _subscriptionTypes = require("../../src/services/subscriptionTypes");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var initializeStripe;
var createPaymentSheetForSubscription;
var processSubscriptionUpdate;
var originalEnv = process.env;
beforeEach(function () {
  jest.resetModules();
  process.env = Object.assign({}, originalEnv);
  process.env.EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY = 'pk_test_mock_key';
  process.env.EXPO_PUBLIC_SUPABASE_URL = 'https://mock-supabase-url.com';
  jest.clearAllMocks();
  var supabaseMock = require('../../src/supabase').supabase;
  supabaseMock.auth.getSession.mockResolvedValue({
    data: {
      session: {
        access_token: 'mock-access-token'
      }
    },
    error: null
  });
  jest.spyOn(console, 'error').mockImplementation(function () {});
  jest.spyOn(console, 'warn').mockImplementation(function () {});
  jest.isolateModules(function () {
    var stripeService = require('../../src/services/stripePaymentService');
    initializeStripe = stripeService.initializeStripe;
    createPaymentSheetForSubscription = stripeService.createPaymentSheetForSubscription;
    processSubscriptionUpdate = stripeService.processSubscriptionUpdate;
  });
});
afterEach(function () {
  process.env = originalEnv;
  jest.restoreAllMocks();
});
global.fetch = jest.fn();
describe('stripePaymentService', function () {
  var mockUserId = 'user-123';
  var mockPlanId = 'dealer-monthly';
  var mockInvalidPlanId = 'invalid-plan';
  var mockPaymentIntent = 'pi_mock_payment_intent';
  var mockEphemeralKey = 'ek_mock_ephemeral_key';
  var mockCustomer = 'cus_mock_customer';
  var mockPublishableKey = 'pk_test_mock_key';
  var mockPlan = {
    id: 'dealer-monthly',
    name: 'MVP Dealer Monthly',
    description: 'Monthly subscription for MVP Dealers',
    price: 9.99,
    type: _subscriptionTypes.SubscriptionPlanType.DEALER,
    duration: _subscriptionTypes.SubscriptionDuration.MONTHLY,
    features: ['Feature 1', 'Feature 2']
  };
  var mockInitPaymentSheet = jest.fn();
  var mockPresentPaymentSheet = jest.fn();
  var mockSupabase = require('../../src/supabase').supabase;
  describe('initializeStripe', function () {
    test('should return true when publishable key is set', function () {
      process.env.EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY = 'pk_test_valid_key';
      var result = initializeStripe();
      expect(result).toBe(true);
    });
    test('should return false when publishable key is empty', function () {
      process.env.EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY = '';
      var testInitializeStripe;
      jest.isolateModules(function () {
        var stripeService = require('../../src/services/stripePaymentService');
        testInitializeStripe = stripeService.initializeStripe;
      });
      var result = testInitializeStripe();
      expect(result).toBe(false);
      expect(console.error).toHaveBeenCalledWith('Stripe publishable key is not set. Please check your environment variables.');
    });
  });
  describe('createPaymentSheetForSubscription', function () {
    beforeEach(function () {
      mockSupabase.auth.getSession.mockResolvedValue({
        data: {
          session: {
            access_token: 'mock-access-token'
          }
        },
        error: null
      });
      global.fetch.mockResolvedValue({
        ok: true,
        json: jest.fn().mockResolvedValue({
          paymentIntent: mockPaymentIntent,
          ephemeralKey: mockEphemeralKey,
          customer: mockCustomer,
          publishableKey: mockPublishableKey
        })
      });
      mockInitPaymentSheet.mockResolvedValue({
        error: null
      });
      mockPresentPaymentSheet.mockResolvedValue({
        error: null
      });
    });
    test('should return error for invalid plan ID', (0, _asyncToGenerator2.default)(function* () {
      var result = yield createPaymentSheetForSubscription(mockUserId, mockInvalidPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result).toEqual({
        success: false,
        error: 'Subscription plan not found.'
      });
      expect(global.fetch).not.toHaveBeenCalled();
    }));
    test('should handle network failure during payment intent creation', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockRejectedValue(new Error('Network error'));
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Network error');
      expect(console.error).toHaveBeenCalled();
    }));
    test('should handle payment intent creation error (400)', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: false,
        status: 400,
        json: jest.fn().mockResolvedValue({
          error: 'Invalid request parameters'
        })
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Invalid request parameters');
    }));
    test('should handle payment intent creation error (401)', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: false,
        status: 401,
        json: jest.fn().mockResolvedValue({
          error: 'Unauthorized access'
        })
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Unauthorized access');
    }));
    test('should handle payment intent creation error (500)', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: false,
        status: 500,
        json: jest.fn().mockResolvedValue({
          error: 'Server error'
        })
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Server error');
    }));
    test('should handle Stripe initPaymentSheet error', (0, _asyncToGenerator2.default)(function* () {
      mockInitPaymentSheet.mockResolvedValue({
        error: {
          code: 'initialization_error',
          message: 'Failed to initialize payment sheet'
        }
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Initialization failed: Failed to initialize payment sheet');
      expect(console.error).toHaveBeenCalled();
    }));
    test('should handle Stripe presentPaymentSheet canceled error', (0, _asyncToGenerator2.default)(function* () {
      mockPresentPaymentSheet.mockResolvedValue({
        error: {
          code: 'Canceled',
          message: 'The payment was canceled'
        }
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Payment was canceled.');
    }));
    test('should handle Stripe presentPaymentSheet payment failure', (0, _asyncToGenerator2.default)(function* () {
      mockPresentPaymentSheet.mockResolvedValue({
        error: {
          code: 'payment_failed',
          message: 'The payment failed'
        }
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Payment failed: The payment failed');
      expect(console.error).toHaveBeenCalled();
    }));
    test('should handle timeout during payment intent creation', (0, _asyncToGenerator2.default)(function* () {
      jest.useFakeTimers();
      var mockFetchPromise = new Promise(function (_, reject) {
        setTimeout(function () {
          reject(new Error('Request timed out'));
        }, 30000);
      });
      global.fetch.mockReturnValue(mockFetchPromise);
      var resultPromise = createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      jest.advanceTimersByTime(31000);
      var result = yield resultPromise;
      expect(result.success).toBe(false);
      expect(result.error).toBe('Request timed out');
      jest.useRealTimers();
    }));
    test('should handle invalid user ID', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: false,
        status: 400,
        json: jest.fn().mockResolvedValue({
          error: 'Invalid user ID'
        })
      });
      var result = yield createPaymentSheetForSubscription('invalid-user-id', mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Invalid user ID');
    }));
    test('should handle successful payment flow', (0, _asyncToGenerator2.default)(function* () {
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(true);
      expect(result.transactionId).toBe(mockPaymentIntent);
      expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('/functions/v1/create-payment-intent'), expect.objectContaining({
        method: 'POST',
        headers: expect.objectContaining({
          'Content-Type': 'application/json',
          'Authorization': 'Bearer mock-access-token'
        }),
        body: expect.any(String)
      }));
    }));
  });
  describe('Edge cases', function () {
    test('should handle concurrent payment attempts', (0, _asyncToGenerator2.default)(function* () {
      var callCount = 0;
      global.fetch.mockImplementation(function () {
        callCount++;
        if (callCount === 1) {
          return Promise.resolve({
            ok: true,
            json: function json() {
              return Promise.resolve({
                paymentIntent: mockPaymentIntent,
                ephemeralKey: mockEphemeralKey,
                customer: mockCustomer,
                publishableKey: mockPublishableKey
              });
            }
          });
        } else {
          return Promise.resolve({
            ok: false,
            json: function json() {
              return Promise.resolve({
                error: 'Payment already in progress'
              });
            }
          });
        }
      });
      var results = yield Promise.all([createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet), createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet)]);
      expect(results[0].success).toBe(true);
      expect(results[1].success).toBe(false);
      expect(results[1].error).toBe('Payment already in progress');
    }));
    test('should handle JSON parse errors in API response', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: true,
        json: jest.fn().mockRejectedValue(new SyntaxError('Unexpected token < in JSON'))
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toContain('Unexpected token < in JSON');
    }));
    test('should handle empty response from payment intent creation', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: true,
        json: jest.fn().mockResolvedValue(null)
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toContain('Cannot read properties of null');
    }));
    test('should handle rate limiting from Stripe API', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: false,
        status: 429,
        json: jest.fn().mockResolvedValue({
          error: 'Too many requests. Please try again later.'
        })
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Too many requests. Please try again later.');
    }));
    test('should handle Stripe API service outage', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: false,
        status: 503,
        json: jest.fn().mockResolvedValue({
          error: 'Stripe API is currently unavailable'
        })
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Stripe API is currently unavailable');
    }));
    test('should handle invalid currency code', (0, _asyncToGenerator2.default)(function* () {
      global.fetch.mockResolvedValue({
        ok: false,
        status: 400,
        json: jest.fn().mockResolvedValue({
          error: 'Invalid currency code'
        })
      });
      var result = yield createPaymentSheetForSubscription(mockUserId, mockPlanId, mockInitPaymentSheet, mockPresentPaymentSheet);
      expect(result.success).toBe(false);
      expect(result.error).toBe('Invalid currency code');
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJzdXBhYmFzZSIsImF1dGgiLCJnZXRTZXNzaW9uIiwiamVzdCIsImZuIiwiZnJvbSIsIm1vY2tSZXR1cm5UaGlzIiwidXBkYXRlIiwiaW5zZXJ0IiwiZXEiLCJzZWxlY3QiLCJzaW5nbGUiLCJvcmlnaW5hbCIsInJlcXVpcmVBY3R1YWwiLCJPYmplY3QiLCJhc3NpZ24iLCJTVUJTQ1JJUFRJT05fUExBTlMiLCJpZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInByaWNlIiwidHlwZSIsImR1cmF0aW9uIiwiZmVhdHVyZXMiLCJTdWJzY3JpcHRpb25QbGFuVHlwZSIsIkRFQUxFUiIsIk9SR0FOSVpFUiIsIlN1YnNjcmlwdGlvbkR1cmF0aW9uIiwiTU9OVEhMWSIsIkFOTlVBTCIsIl9jYWxjdWxhdGVFeHBpcnlEYXRlIiwibW9ja0ltcGxlbWVudGF0aW9uIiwiZGF0ZSIsIkRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX3N1YnNjcmlwdGlvblR5cGVzIiwiX3JlcXVpcmUiLCJpbml0aWFsaXplU3RyaXBlIiwiY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uIiwicHJvY2Vzc1N1YnNjcmlwdGlvblVwZGF0ZSIsIm9yaWdpbmFsRW52IiwicHJvY2VzcyIsImVudiIsImJlZm9yZUVhY2giLCJyZXNldE1vZHVsZXMiLCJFWFBPX1BVQkxJQ19TVFJJUEVfUFVCTElTSEFCTEVfS0VZIiwiRVhQT19QVUJMSUNfU1VQQUJBU0VfVVJMIiwiY2xlYXJBbGxNb2NrcyIsInN1cGFiYXNlTW9jayIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiZGF0YSIsInNlc3Npb24iLCJhY2Nlc3NfdG9rZW4iLCJlcnJvciIsInNweU9uIiwiY29uc29sZSIsImlzb2xhdGVNb2R1bGVzIiwic3RyaXBlU2VydmljZSIsImFmdGVyRWFjaCIsInJlc3RvcmVBbGxNb2NrcyIsImdsb2JhbCIsImZldGNoIiwiZGVzY3JpYmUiLCJtb2NrVXNlcklkIiwibW9ja1BsYW5JZCIsIm1vY2tJbnZhbGlkUGxhbklkIiwibW9ja1BheW1lbnRJbnRlbnQiLCJtb2NrRXBoZW1lcmFsS2V5IiwibW9ja0N1c3RvbWVyIiwibW9ja1B1Ymxpc2hhYmxlS2V5IiwibW9ja1BsYW4iLCJtb2NrSW5pdFBheW1lbnRTaGVldCIsIm1vY2tQcmVzZW50UGF5bWVudFNoZWV0IiwibW9ja1N1cGFiYXNlIiwidGVzdCIsInJlc3VsdCIsImV4cGVjdCIsInRvQmUiLCJ0ZXN0SW5pdGlhbGl6ZVN0cmlwZSIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwib2siLCJqc29uIiwicGF5bWVudEludGVudCIsImVwaGVtZXJhbEtleSIsImN1c3RvbWVyIiwicHVibGlzaGFibGVLZXkiLCJkZWZhdWx0IiwidG9FcXVhbCIsInN1Y2Nlc3MiLCJub3QiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsInN0YXR1cyIsImNvZGUiLCJtZXNzYWdlIiwidXNlRmFrZVRpbWVycyIsIm1vY2tGZXRjaFByb21pc2UiLCJQcm9taXNlIiwiXyIsInJlamVjdCIsInNldFRpbWVvdXQiLCJtb2NrUmV0dXJuVmFsdWUiLCJyZXN1bHRQcm9taXNlIiwiYWR2YW5jZVRpbWVyc0J5VGltZSIsInVzZVJlYWxUaW1lcnMiLCJ0cmFuc2FjdGlvbklkIiwic3RyaW5nQ29udGFpbmluZyIsIm9iamVjdENvbnRhaW5pbmciLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsImFueSIsIlN0cmluZyIsImNhbGxDb3VudCIsInJlc29sdmUiLCJyZXN1bHRzIiwiYWxsIiwiU3ludGF4RXJyb3IiLCJ0b0NvbnRhaW4iXSwic291cmNlcyI6WyJzdHJpcGVQYXltZW50U2VydmljZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGVzdCBzdWl0ZSBmb3Igc3RyaXBlUGF5bWVudFNlcnZpY2UudHNcbiAqIFxuICogVGhpcyB0ZXN0IHN1aXRlIGZvY3VzZXMgb24gY29yZSBmdW5jdGlvbmFsaXR5IGFuZCByZWFsaXN0aWMgZXJyb3IgcGF0aHNcbiAqIGluIHRoZSBwYXltZW50IHByb2Nlc3NpbmcgZmxvdy5cbiAqL1xuXG5pbXBvcnQgeyBTdWJzY3JpcHRpb25QbGFuLCBTdWJzY3JpcHRpb25QbGFuVHlwZSwgU3Vic2NyaXB0aW9uRHVyYXRpb24gfSBmcm9tICcuLi8uLi9zcmMvc2VydmljZXMvc3Vic2NyaXB0aW9uVHlwZXMnO1xuaW1wb3J0IHsgVXNlclJvbGUgfSBmcm9tICcuLi8uLi9zcmMvc2VydmljZXMvdXNlclJvbGVTZXJ2aWNlJztcblxuLy8gVGhlc2Ugd2lsbCBiZSBwb3B1bGF0ZWQgdmlhIGEgZHluYW1pYyBpbXBvcnQgYWZ0ZXIgd2UgZmluaXNoIGVudi12YXIgc2V0dXBcbmxldCBpbml0aWFsaXplU3RyaXBlOiBhbnk7XG5sZXQgY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uOiBhbnk7XG5sZXQgcHJvY2Vzc1N1YnNjcmlwdGlvblVwZGF0ZTogYW55O1xuXG4vLyBNb2NrIHRoZSBzdXBhYmFzZSBjbGllbnRcbmplc3QubW9jaygnLi4vLi4vc3JjL3N1cGFiYXNlJywgKCkgPT4gKHtcbiAgc3VwYWJhc2U6IHtcbiAgICBhdXRoOiB7XG4gICAgICBnZXRTZXNzaW9uOiBqZXN0LmZuKCksXG4gICAgfSxcbiAgICBmcm9tOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICB1cGRhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIGluc2VydDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgc2luZ2xlOiBqZXN0LmZuKCksXG4gIH0sXG59KSk7XG5cbi8vIE1vY2sgdGhlIHN1YnNjcmlwdGlvblR5cGVzIGltcG9ydHNcbmplc3QubW9jaygnLi4vLi4vc3JjL3NlcnZpY2VzL3N1YnNjcmlwdGlvblR5cGVzJywgKCkgPT4ge1xuICBjb25zdCBvcmlnaW5hbCA9IGplc3QucmVxdWlyZUFjdHVhbCgnLi4vLi4vc3JjL3NlcnZpY2VzL3N1YnNjcmlwdGlvblR5cGVzJyk7XG4gIHJldHVybiB7XG4gICAgLi4ub3JpZ2luYWwsXG4gICAgU1VCU0NSSVBUSU9OX1BMQU5TOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiAnZGVhbGVyLW1vbnRobHknLFxuICAgICAgICBuYW1lOiAnTVZQIERlYWxlciBNb250aGx5JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdNb250aGx5IHN1YnNjcmlwdGlvbiBmb3IgTVZQIERlYWxlcnMnLFxuICAgICAgICBwcmljZTogOS45OSxcbiAgICAgICAgdHlwZTogJ2RlYWxlcicsXG4gICAgICAgIGR1cmF0aW9uOiAnbW9udGhseScsXG4gICAgICAgIGZlYXR1cmVzOiBbJ0ZlYXR1cmUgMScsICdGZWF0dXJlIDInXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnZGVhbGVyLWFubnVhbCcsXG4gICAgICAgIG5hbWU6ICdNVlAgRGVhbGVyIEFubnVhbCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQW5udWFsIHN1YnNjcmlwdGlvbiBmb3IgTVZQIERlYWxlcnMnLFxuICAgICAgICBwcmljZTogOTkuOTksXG4gICAgICAgIHR5cGU6ICdkZWFsZXInLFxuICAgICAgICBkdXJhdGlvbjogJ2FubnVhbCcsXG4gICAgICAgIGZlYXR1cmVzOiBbJ0ZlYXR1cmUgMScsICdGZWF0dXJlIDInLCAnRmVhdHVyZSAzJ10sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJ29yZ2FuaXplci1tb250aGx5JyxcbiAgICAgICAgbmFtZTogJ1Nob3cgT3JnYW5pemVyIE1vbnRobHknLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ01vbnRobHkgc3Vic2NyaXB0aW9uIGZvciBTaG93IE9yZ2FuaXplcnMnLFxuICAgICAgICBwcmljZTogMTkuOTksXG4gICAgICAgIHR5cGU6ICdvcmdhbml6ZXInLFxuICAgICAgICBkdXJhdGlvbjogJ21vbnRobHknLFxuICAgICAgICBmZWF0dXJlczogWydGZWF0dXJlIEEnLCAnRmVhdHVyZSBCJ10sXG4gICAgICB9LFxuICAgIF0sXG4gICAgU3Vic2NyaXB0aW9uUGxhblR5cGU6IHtcbiAgICAgIERFQUxFUjogJ2RlYWxlcicsXG4gICAgICBPUkdBTklaRVI6ICdvcmdhbml6ZXInLFxuICAgIH0sXG4gICAgU3Vic2NyaXB0aW9uRHVyYXRpb246IHtcbiAgICAgIE1PTlRITFk6ICdtb250aGx5JyxcbiAgICAgIEFOTlVBTDogJ2FubnVhbCcsXG4gICAgfSxcbiAgICBfY2FsY3VsYXRlRXhwaXJ5RGF0ZTogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIDMwKTsgLy8gRGVmYXVsdCB0byArMzAgZGF5c1xuICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfSksXG4gIH07XG59KTtcblxuLy8gTW9jayBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbmNvbnN0IG9yaWdpbmFsRW52ID0gcHJvY2Vzcy5lbnY7XG5iZWZvcmVFYWNoKCgpID0+IHtcbiAgamVzdC5yZXNldE1vZHVsZXMoKTtcbiAgcHJvY2Vzcy5lbnYgPSB7IC4uLm9yaWdpbmFsRW52IH07XG4gIHByb2Nlc3MuZW52LkVYUE9fUFVCTElDX1NUUklQRV9QVUJMSVNIQUJMRV9LRVkgPSAncGtfdGVzdF9tb2NrX2tleSc7XG4gIHByb2Nlc3MuZW52LkVYUE9fUFVCTElDX1NVUEFCQVNFX1VSTCA9ICdodHRwczovL21vY2stc3VwYWJhc2UtdXJsLmNvbSc7XG5cbiAgLy8gUmVzZXQgYWxsIG1vY2tzXG4gIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICBcbiAgLy8gUHJvdmlkZSBhIHNhbmUgZGVmYXVsdCBmb3IgYHN1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbmAgc28gdGVzdHMgc3RhcnQgd2l0aFxuICAvLyBhIHZhbGlkIHN0cnVjdHVyZSAoaW5kaXZpZHVhbCB0ZXN0cyBjYW4gb3ZlcnJpZGUgdGhpcyBhcyBuZWVkZWQpLlxuICBjb25zdCBzdXBhYmFzZU1vY2sgPSByZXF1aXJlKCcuLi8uLi9zcmMvc3VwYWJhc2UnKS5zdXBhYmFzZTtcbiAgc3VwYWJhc2VNb2NrLmF1dGguZ2V0U2Vzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgZGF0YTogeyBzZXNzaW9uOiB7IGFjY2Vzc190b2tlbjogJ21vY2stYWNjZXNzLXRva2VuJyB9IH0sXG4gICAgZXJyb3I6IG51bGwsXG4gIH0pO1xuICBcbiAgLy8gTW9jayBjb25zb2xlIG1ldGhvZHMgdG8gcHJldmVudCBub2lzZSBpbiB0ZXN0IG91dHB1dFxuICBqZXN0LnNweU9uKGNvbnNvbGUsICdlcnJvcicpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XG4gIGplc3Quc3B5T24oY29uc29sZSwgJ3dhcm4nKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuXG4gIC8qKlxuICAgKiBSZS1yZXF1aXJlIHRoZSBzdHJpcGVQYXltZW50U2VydmljZSBtb2R1bGUgKmFmdGVyKiB0aGUgZW52aXJvbm1lbnRcbiAgICogdmFyaWFibGVzIGhhdmUgYmVlbiAocmUpY29uZmlndXJlZCBhbmQgYGplc3QucmVzZXRNb2R1bGVzKClgIGhhcyBjbGVhcmVkXG4gICAqIHRoZSBtb2R1bGUgY2FjaGUuXG4gICAqL1xuICBqZXN0Lmlzb2xhdGVNb2R1bGVzKCgpID0+IHtcbiAgICBjb25zdCBzdHJpcGVTZXJ2aWNlID0gcmVxdWlyZSgnLi4vLi4vc3JjL3NlcnZpY2VzL3N0cmlwZVBheW1lbnRTZXJ2aWNlJyk7XG4gICAgaW5pdGlhbGl6ZVN0cmlwZSA9IHN0cmlwZVNlcnZpY2UuaW5pdGlhbGl6ZVN0cmlwZTtcbiAgICBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24gPSBzdHJpcGVTZXJ2aWNlLmNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbjtcbiAgICBwcm9jZXNzU3Vic2NyaXB0aW9uVXBkYXRlID0gc3RyaXBlU2VydmljZS5wcm9jZXNzU3Vic2NyaXB0aW9uVXBkYXRlO1xuICB9KTtcbn0pO1xuXG5hZnRlckVhY2goKCkgPT4ge1xuICBwcm9jZXNzLmVudiA9IG9yaWdpbmFsRW52O1xuICBqZXN0LnJlc3RvcmVBbGxNb2NrcygpO1xufSk7XG5cbi8vIE1vY2sgZ2xvYmFsIGZldGNoXG5nbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCk7XG5cbmRlc2NyaWJlKCdzdHJpcGVQYXltZW50U2VydmljZScsICgpID0+IHtcbiAgLy8gTW9jayBkYXRhXG4gIGNvbnN0IG1vY2tVc2VySWQgPSAndXNlci0xMjMnO1xuICBjb25zdCBtb2NrUGxhbklkID0gJ2RlYWxlci1tb250aGx5JztcbiAgY29uc3QgbW9ja0ludmFsaWRQbGFuSWQgPSAnaW52YWxpZC1wbGFuJztcbiAgY29uc3QgbW9ja1BheW1lbnRJbnRlbnQgPSAncGlfbW9ja19wYXltZW50X2ludGVudCc7XG4gIGNvbnN0IG1vY2tFcGhlbWVyYWxLZXkgPSAnZWtfbW9ja19lcGhlbWVyYWxfa2V5JztcbiAgY29uc3QgbW9ja0N1c3RvbWVyID0gJ2N1c19tb2NrX2N1c3RvbWVyJztcbiAgY29uc3QgbW9ja1B1Ymxpc2hhYmxlS2V5ID0gJ3BrX3Rlc3RfbW9ja19rZXknO1xuICBcbiAgY29uc3QgbW9ja1BsYW46IFN1YnNjcmlwdGlvblBsYW4gPSB7XG4gICAgaWQ6ICdkZWFsZXItbW9udGhseScsXG4gICAgbmFtZTogJ01WUCBEZWFsZXIgTW9udGhseScsXG4gICAgZGVzY3JpcHRpb246ICdNb250aGx5IHN1YnNjcmlwdGlvbiBmb3IgTVZQIERlYWxlcnMnLFxuICAgIHByaWNlOiA5Ljk5LFxuICAgIHR5cGU6IFN1YnNjcmlwdGlvblBsYW5UeXBlLkRFQUxFUixcbiAgICBkdXJhdGlvbjogU3Vic2NyaXB0aW9uRHVyYXRpb24uTU9OVEhMWSxcbiAgICBmZWF0dXJlczogWydGZWF0dXJlIDEnLCAnRmVhdHVyZSAyJ10sXG4gIH07XG5cbiAgLy8gTW9jayBTdHJpcGUgZnVuY3Rpb25zXG4gIGNvbnN0IG1vY2tJbml0UGF5bWVudFNoZWV0ID0gamVzdC5mbigpO1xuICBjb25zdCBtb2NrUHJlc2VudFBheW1lbnRTaGVldCA9IGplc3QuZm4oKTtcblxuICAvLyBNb2NrIFN1cGFiYXNlIHJlc3BvbnNlc1xuICBjb25zdCBtb2NrU3VwYWJhc2UgPSByZXF1aXJlKCcuLi8uLi9zcmMvc3VwYWJhc2UnKS5zdXBhYmFzZTtcblxuICBkZXNjcmliZSgnaW5pdGlhbGl6ZVN0cmlwZScsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIHRydWUgd2hlbiBwdWJsaXNoYWJsZSBrZXkgaXMgc2V0JywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgcHJvY2Vzcy5lbnYuRVhQT19QVUJMSUNfU1RSSVBFX1BVQkxJU0hBQkxFX0tFWSA9ICdwa190ZXN0X3ZhbGlkX2tleSc7XG4gICAgICBcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gaW5pdGlhbGl6ZVN0cmlwZSgpO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGZhbHNlIHdoZW4gcHVibGlzaGFibGUga2V5IGlzIGVtcHR5JywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgcHJvY2Vzcy5lbnYuRVhQT19QVUJMSUNfU1RSSVBFX1BVQkxJU0hBQkxFX0tFWSA9ICcnO1xuICAgICAgLy8gUmUtaW1wb3J0IHRoZSBtb2R1bGUgd2l0aCB0aGUgdXBkYXRlZCBlbnZpcm9ubWVudFxuICAgICAgbGV0IHRlc3RJbml0aWFsaXplU3RyaXBlOiBhbnk7XG4gICAgICBqZXN0Lmlzb2xhdGVNb2R1bGVzKCgpID0+IHtcbiAgICAgICAgY29uc3Qgc3RyaXBlU2VydmljZSA9IHJlcXVpcmUoJy4uLy4uL3NyYy9zZXJ2aWNlcy9zdHJpcGVQYXltZW50U2VydmljZScpO1xuICAgICAgICB0ZXN0SW5pdGlhbGl6ZVN0cmlwZSA9IHN0cmlwZVNlcnZpY2UuaW5pdGlhbGl6ZVN0cmlwZTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRlc3RJbml0aWFsaXplU3RyaXBlKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoY29uc29sZS5lcnJvcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdTdHJpcGUgcHVibGlzaGFibGUga2V5IGlzIG5vdCBzZXQuIFBsZWFzZSBjaGVjayB5b3VyIGVudmlyb25tZW50IHZhcmlhYmxlcy4nXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgLy8gRGVmYXVsdCBtb2NrIGZvciBzdWNjZXNzZnVsIHNlc3Npb24gcmV0cmlldmFsXG4gICAgICBtb2NrU3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICAgIGFjY2Vzc190b2tlbjogJ21vY2stYWNjZXNzLXRva2VuJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBEZWZhdWx0IG1vY2sgZm9yIHN1Y2Nlc3NmdWwgZmV0Y2hcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIHBheW1lbnRJbnRlbnQ6IG1vY2tQYXltZW50SW50ZW50LFxuICAgICAgICAgIGVwaGVtZXJhbEtleTogbW9ja0VwaGVtZXJhbEtleSxcbiAgICAgICAgICBjdXN0b21lcjogbW9ja0N1c3RvbWVyLFxuICAgICAgICAgIHB1Ymxpc2hhYmxlS2V5OiBtb2NrUHVibGlzaGFibGVLZXksXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIERlZmF1bHQgbW9ja3MgZm9yIFN0cmlwZSBmdW5jdGlvbnNcbiAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZXJyb3I6IG51bGwgfSk7XG4gICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGVycm9yOiBudWxsIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBlcnJvciBmb3IgaW52YWxpZCBwbGFuIElEJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24oXG4gICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgIG1vY2tJbnZhbGlkUGxhbklkLFxuICAgICAgICBtb2NrSW5pdFBheW1lbnRTaGVldCxcbiAgICAgICAgbW9ja1ByZXNlbnRQYXltZW50U2hlZXRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ1N1YnNjcmlwdGlvbiBwbGFuIG5vdCBmb3VuZC4nLFxuICAgICAgfSk7XG4gICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBuZXR3b3JrIGZhaWx1cmUgZHVyaW5nIHBheW1lbnQgaW50ZW50IGNyZWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKTtcbiAgICAgIFxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24oXG4gICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgIG1vY2tQbGFuSWQsXG4gICAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0LFxuICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnTmV0d29yayBlcnJvcicpO1xuICAgICAgZXhwZWN0KGNvbnNvbGUuZXJyb3IpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgcGF5bWVudCBpbnRlbnQgY3JlYXRpb24gZXJyb3IgKDQwMCknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogZmFsc2UsXG4gICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICBqc29uOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIGVycm9yOiAnSW52YWxpZCByZXF1ZXN0IHBhcmFtZXRlcnMnLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQsXG4gICAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdJbnZhbGlkIHJlcXVlc3QgcGFyYW1ldGVycycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBwYXltZW50IGludGVudCBjcmVhdGlvbiBlcnJvciAoNDAxKScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAgc3RhdHVzOiA0MDEsXG4gICAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgZXJyb3I6ICdVbmF1dGhvcml6ZWQgYWNjZXNzJyxcbiAgICAgICAgfSksXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24oXG4gICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgIG1vY2tQbGFuSWQsXG4gICAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0LFxuICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnVW5hdXRob3JpemVkIGFjY2VzcycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBwYXltZW50IGludGVudCBjcmVhdGlvbiBlcnJvciAoNTAwKScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgZXJyb3I6ICdTZXJ2ZXIgZXJyb3InLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQsXG4gICAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdTZXJ2ZXIgZXJyb3InKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgU3RyaXBlIGluaXRQYXltZW50U2hlZXQgZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrSW5pdFBheW1lbnRTaGVldC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdpbml0aWFsaXphdGlvbl9lcnJvcicsIG1lc3NhZ2U6ICdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBwYXltZW50IHNoZWV0JyB9LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uKFxuICAgICAgICBtb2NrVXNlcklkLFxuICAgICAgICBtb2NrUGxhbklkLFxuICAgICAgICBtb2NrSW5pdFBheW1lbnRTaGVldCxcbiAgICAgICAgbW9ja1ByZXNlbnRQYXltZW50U2hlZXRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmUoJ0luaXRpYWxpemF0aW9uIGZhaWxlZDogRmFpbGVkIHRvIGluaXRpYWxpemUgcGF5bWVudCBzaGVldCcpO1xuICAgICAgZXhwZWN0KGNvbnNvbGUuZXJyb3IpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgU3RyaXBlIHByZXNlbnRQYXltZW50U2hlZXQgY2FuY2VsZWQgZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdDYW5jZWxlZCcsIG1lc3NhZ2U6ICdUaGUgcGF5bWVudCB3YXMgY2FuY2VsZWQnIH0sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24oXG4gICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgIG1vY2tQbGFuSWQsXG4gICAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0LFxuICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnUGF5bWVudCB3YXMgY2FuY2VsZWQuJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIFN0cmlwZSBwcmVzZW50UGF5bWVudFNoZWV0IHBheW1lbnQgZmFpbHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZXJyb3I6IHsgY29kZTogJ3BheW1lbnRfZmFpbGVkJywgbWVzc2FnZTogJ1RoZSBwYXltZW50IGZhaWxlZCcgfSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQsXG4gICAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdQYXltZW50IGZhaWxlZDogVGhlIHBheW1lbnQgZmFpbGVkJyk7XG4gICAgICBleHBlY3QoY29uc29sZS5lcnJvcikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB0aW1lb3V0IGR1cmluZyBwYXltZW50IGludGVudCBjcmVhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGplc3QudXNlRmFrZVRpbWVycygpO1xuICAgICAgY29uc3QgbW9ja0ZldGNoUHJvbWlzZSA9IG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignUmVxdWVzdCB0aW1lZCBvdXQnKSk7XG4gICAgICAgIH0sIDMwMDAwKTtcbiAgICAgIH0pO1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrRmV0Y2hQcm9taXNlKTtcbiAgICAgIFxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHRQcm9taXNlID0gY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uKFxuICAgICAgICBtb2NrVXNlcklkLFxuICAgICAgICBtb2NrUGxhbklkLFxuICAgICAgICBtb2NrSW5pdFBheW1lbnRTaGVldCxcbiAgICAgICAgbW9ja1ByZXNlbnRQYXltZW50U2hlZXRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIEZhc3QtZm9yd2FyZCB0aW1lXG4gICAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoMzEwMDApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3VsdFByb21pc2U7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnUmVxdWVzdCB0aW1lZCBvdXQnKTtcbiAgICAgIFxuICAgICAgamVzdC51c2VSZWFsVGltZXJzKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgdXNlciBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIHVzZXIgSUQnLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgJ2ludmFsaWQtdXNlci1pZCcsXG4gICAgICAgIG1vY2tQbGFuSWQsXG4gICAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0LFxuICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnSW52YWxpZCB1c2VyIElEJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHN1Y2Nlc3NmdWwgcGF5bWVudCBmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24oXG4gICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgIG1vY2tQbGFuSWQsXG4gICAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0LFxuICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LnRyYW5zYWN0aW9uSWQpLnRvQmUobW9ja1BheW1lbnRJbnRlbnQpO1xuICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCcvZnVuY3Rpb25zL3YxL2NyZWF0ZS1wYXltZW50LWludGVudCcpLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciBtb2NrLWFjY2Vzcy10b2tlbicsXG4gICAgICAgICAgfSksXG4gICAgICAgICAgYm9keTogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VkZ2UgY2FzZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IHBheW1lbnQgYXR0ZW1wdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBsZXQgY2FsbENvdW50ID0gMDtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICBjYWxsQ291bnQrKztcbiAgICAgICAgaWYgKGNhbGxDb3VudCA9PT0gMSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICBwYXltZW50SW50ZW50OiBtb2NrUGF5bWVudEludGVudCxcbiAgICAgICAgICAgICAgZXBoZW1lcmFsS2V5OiBtb2NrRXBoZW1lcmFsS2V5LFxuICAgICAgICAgICAgICBjdXN0b21lcjogbW9ja0N1c3RvbWVyLFxuICAgICAgICAgICAgICBwdWJsaXNoYWJsZUtleTogbW9ja1B1Ymxpc2hhYmxlS2V5LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICBlcnJvcjogJ1BheW1lbnQgYWxyZWFkeSBpbiBwcm9ncmVzcycsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uKFxuICAgICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgICBtb2NrSW5pdFBheW1lbnRTaGVldCxcbiAgICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgICApLFxuICAgICAgICBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24oXG4gICAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgICBtb2NrUGxhbklkLFxuICAgICAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0LFxuICAgICAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0XG4gICAgICAgICksXG4gICAgICBdKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0c1swXS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdHNbMV0uc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0c1sxXS5lcnJvcikudG9CZSgnUGF5bWVudCBhbHJlYWR5IGluIHByb2dyZXNzJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIEpTT04gcGFyc2UgZXJyb3JzIGluIEFQSSByZXNwb25zZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBqZXN0LmZuKCkubW9ja1JlamVjdGVkVmFsdWUobmV3IFN5bnRheEVycm9yKCdVbmV4cGVjdGVkIHRva2VuIDwgaW4gSlNPTicpKSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVBheW1lbnRTaGVldEZvclN1YnNjcmlwdGlvbihcbiAgICAgICAgbW9ja1VzZXJJZCxcbiAgICAgICAgbW9ja1BsYW5JZCxcbiAgICAgICAgbW9ja0luaXRQYXltZW50U2hlZXQsXG4gICAgICAgIG1vY2tQcmVzZW50UGF5bWVudFNoZWV0XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0NvbnRhaW4oJ1VuZXhwZWN0ZWQgdG9rZW4gPCBpbiBKU09OJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHJlc3BvbnNlIGZyb20gcGF5bWVudCBpbnRlbnQgY3JlYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uKFxuICAgICAgICBtb2NrVXNlcklkLFxuICAgICAgICBtb2NrUGxhbklkLFxuICAgICAgICBtb2NrSW5pdFBheW1lbnRTaGVldCxcbiAgICAgICAgbW9ja1ByZXNlbnRQYXltZW50U2hlZXRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQ29udGFpbignQ2Fubm90IHJlYWQgcHJvcGVydGllcyBvZiBudWxsJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHJhdGUgbGltaXRpbmcgZnJvbSBTdHJpcGUgQVBJJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBzdGF0dXM6IDQyOSxcbiAgICAgICAganNvbjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICBlcnJvcjogJ1RvbyBtYW55IHJlcXVlc3RzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicsXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uKFxuICAgICAgICBtb2NrVXNlcklkLFxuICAgICAgICBtb2NrUGxhbklkLFxuICAgICAgICBtb2NrSW5pdFBheW1lbnRTaGVldCxcbiAgICAgICAgbW9ja1ByZXNlbnRQYXltZW50U2hlZXRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmUoJ1RvbyBtYW55IHJlcXVlc3RzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBTdHJpcGUgQVBJIHNlcnZpY2Ugb3V0YWdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBzdGF0dXM6IDUwMyxcbiAgICAgICAganNvbjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICBlcnJvcjogJ1N0cmlwZSBBUEkgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlJyxcbiAgICAgICAgfSksXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24oXG4gICAgICAgIG1vY2tVc2VySWQsXG4gICAgICAgIG1vY2tQbGFuSWQsXG4gICAgICAgIG1vY2tJbml0UGF5bWVudFNoZWV0LFxuICAgICAgICBtb2NrUHJlc2VudFBheW1lbnRTaGVldFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnU3RyaXBlIEFQSSBpcyBjdXJyZW50bHkgdW5hdmFpbGFibGUnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBjdXJyZW5jeSBjb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAganNvbjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgY3VycmVuY3kgY29kZScsXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uKFxuICAgICAgICBtb2NrVXNlcklkLFxuICAgICAgICBtb2NrUGxhbklkLFxuICAgICAgICBtb2NrSW5pdFBheW1lbnRTaGVldCxcbiAgICAgICAgbW9ja1ByZXNlbnRQYXltZW50U2hlZXRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmUoJ0ludmFsaWQgY3VycmVuY3kgY29kZScpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFnQkFBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLG9CQUFvQixFQUFFO0VBQUEsT0FBTztJQUNyQ0MsUUFBUSxFQUFFO01BQ1JDLElBQUksRUFBRTtRQUNKQyxVQUFVLEVBQUVDLElBQUksQ0FBQ0MsRUFBRSxDQUFDO01BQ3RCLENBQUM7TUFDREMsSUFBSSxFQUFFRixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNFLGNBQWMsQ0FBQyxDQUFDO01BQ2hDQyxNQUFNLEVBQUVKLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0UsY0FBYyxDQUFDLENBQUM7TUFDbENFLE1BQU0sRUFBRUwsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDRSxjQUFjLENBQUMsQ0FBQztNQUNsQ0csRUFBRSxFQUFFTixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENB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