{"version":3,"names":["_ref","cov_13d4jsc0gq","s","require","createClient","config","_supabaseUrl","b","process","env","SUPABASE_URL","REACT_APP_SUPABASE_URL","_supabaseKey","SUPABASE_ANON_KEY","REACT_APP_SUPABASE_ANON_KEY","console","error","exit","_supabase","_USER_ID","checkDealerRole","_checkDealerRole","apply","arguments","_asyncToGenerator","f","warn","_ref2","from","select","eq","single","profileData","data","profileError","_ref3","authData","authError","id","first_name","last_name","email","role","account_type","subscription_status","subscription_expiry","JSON","stringify","_err","then","catch","err"],"sources":["check_dealer_role.js"],"sourcesContent":["// src/scripts/check_dealer_role.js\n/**\n * This script directly queries the Supabase database to check the role and subscription\n * status of a specific dealer account to diagnose why they might be showing as MVP dealer\n * when they shouldn't be.\n * \n * Usage:\n * node src/scripts/check_dealer_role.js\n * \n * Requires SUPABASE_URL and SUPABASE_ANON_KEY environment variables to be set\n */\n\nconst { createClient } = require('@supabase/supabase-js');\nrequire('dotenv').config();\n\n// Initialize Supabase client\nconst _supabaseUrl = process.env.SUPABASE_URL || process.env.REACT_APP_SUPABASE_URL;\nconst _supabaseKey = process.env.SUPABASE_ANON_KEY || process.env.REACT_APP_SUPABASE_ANON_KEY;\n\nif (!_supabaseUrl || !_supabaseKey) {\n  console.error('Error: Supabase URL or key not found in environment variables');\n  console.error('Please set SUPABASE_URL and SUPABASE_ANON_KEY in your .env file');\n  process.exit(1);\n}\n\nconst _supabase = createClient(_supabaseUrl, _supabaseKey);\n\n// User ID to check\nconst _USER_ID = '7d792f27-9112-4837-926f-42e4eb1f0577';\n\n/**\n * Check user role and subscription status in the database\n */\nasync function checkDealerRole() {\n   \nconsole.warn(`\\nüîç Checking database for user ID: ${_USER_ID}\\n`);\n  \n  try {\n    // Query the profiles table for the user\n    const { data: profileData, error: profileError } = await _supabase\n      .from('profiles')\n      .select('*')\n      .eq('id', _USER_ID)\n      .single();\n    \n    if (profileError) {\n      console.error('‚ùå Error fetching profile data:', profileError);\n      return;\n    }\n    \n    if (!profileData) {\n       \nconsole.warn(`‚ùå No profile found for user ID: ${_USER_ID}`);\n      return;\n    }\n    \n    // Query the auth.users table for additional info\n    const { data: authData, error: authError } = await _supabase\n      .from('auth.users')\n      .select('*')\n      .eq('id', _USER_ID)\n      .single();\n    \n    // Format and display the results\n     \nconsole.warn('üìã USER PROFILE DATA:');\n     \nconsole.warn('====================');\n     \nconsole.warn(`ID: ${profileData.id}`);\n     \nconsole.warn(`Name: ${profileData.first_name} ${profileData.last_name || ''}`);\n     \nconsole.warn(`Email: ${profileData.email}`);\n     \nconsole.warn(`Role: ${profileData.role}`);\n     \nconsole.warn(`Account Type: ${profileData.account_type}`);\n     \nconsole.warn(`Subscription Status: ${profileData.subscription_status}`);\n     \nconsole.warn(`Subscription Expiry: ${profileData.subscription_expiry || 'N/A'}`);\n    \n    // Check for role-subscription mismatches\n     \nconsole.warn('\\nüîç DIAGNOSIS:');\n     \nconsole.warn('====================');\n    \n    // Check if role is dealer but showing as MVP\n    if (profileData.role === 'dealer' && profileData.account_type === 'dealer') {\n       \nconsole.warn('‚úÖ User has correct role \"dealer\" in the database');\n    } else if (profileData.role === 'mvp_dealer') {\n       \nconsole.warn('‚ö†Ô∏è User has \"mvp_dealer\" role in the database but should be \"dealer\"');\n       \nconsole.warn('   This explains why they are showing as MVP Dealer in the UI');\n    } else {\n       \nconsole.warn(`‚ö†Ô∏è User has unexpected role \"${profileData.role}\" with account type \"${profileData.account_type}\"`);\n    }\n    \n    // Check subscription status\n    if (profileData.subscription_status === 'active' && profileData.account_type === 'dealer') {\n       \nconsole.warn('‚úÖ User has active subscription as expected for a dealer');\n    } else if (profileData.subscription_status !== 'active') {\n       \nconsole.warn(`‚ö†Ô∏è User has \"${profileData.subscription_status}\" subscription status`);\n    }\n    \n    // Check for any UI display logic issues\n     \nconsole.warn('\\nüîß POSSIBLE FIXES:');\n     \nconsole.warn('====================');\n     \nconsole.warn('1. If role is \"mvp_dealer\" but should be \"dealer\", update the role in the database:');\n     \nconsole.warn(`   UPDATE profiles SET role = 'dealer' WHERE id = '${_USER_ID}';`);\n     \nconsole.warn('\\n2. If the UI is incorrectly displaying the role, check the ProfileScreen.tsx file');\n     \nconsole.warn('   for any logic that might be overriding the role display.');\n     \nconsole.warn('\\n3. Check the getRoleDisplayName function in ProfileScreen.tsx to ensure');\n     \nconsole.warn('   it correctly maps UserRole.DEALER to \"Dealer\" and not \"MVP Dealer\".');\n    \n    // Raw data for debugging\n     \nconsole.warn('\\nüìä RAW PROFILE DATA:');\n     \nconsole.warn('====================');\n     \nconsole.warn(JSON.stringify(profileData, null, 2));\n    \n    if (authData && !authError) {\n       \nconsole.warn('\\nüìä RAW AUTH DATA:');\n       \nconsole.warn('====================');\n       \nconsole.warn(JSON.stringify(authData, null, 2));\n    }\n    \n  } catch (_err) {\n    console.error('‚ùå Unexpected error:', _err);\n  }\n}\n\n// Run the function\ncheckDealerRole()\n   \n  .then(() => console.warn('\\n‚úÖ Check completed'))\n  .catch(err => console.error('‚ùå Fatal error:', err));\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}