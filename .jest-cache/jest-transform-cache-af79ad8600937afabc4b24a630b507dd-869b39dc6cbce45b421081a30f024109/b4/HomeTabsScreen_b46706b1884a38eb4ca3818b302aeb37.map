{"version":3,"names":["React","useState","useEffect","useCallback","View","StyleSheet","createMaterialTopTabNavigator","AsyncStorage","HomeScreen","MapScreen","getCurrentLocation","useAuth","jsx","_jsx","jsxs","_jsxs","Tab","cov_180pdatppx","s","HomeTabsScreen","_ref","navigation","f","_ref2","authState","_ref3","user","defaultFilters","radius","startDate","Date","endDate","setDate","getDate","_ref4","_ref5","_slicedToArray","filters","setFilters","_ref6","_ref7","userLocation","setUserLocation","_ref8","_ref9","activeTab","setActiveTab","loadFilters","_ref0","_asyncToGenerator","stored","getItem","b","parsed","JSON","parse","Object","assign","e","console","warn","apply","arguments","setItem","stringify","catch","fetchLocation","_ref1","location","error","handleFilterChange","newFilters","handleShowPress","showId","navigate","handleTabChange","index","style","styles","container","children","Navigator","screenOptions","tabBarActiveTintColor","tabBarInactiveTintColor","tabBarIndicatorStyle","backgroundColor","tabBarStyle","tabBar","tabBarLabelStyle","tabLabel","screenListeners","state","_e$data$state","data","Screen","name","props","onFilterChange","onShowPress","create","flex","elevation","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","fontWeight","textTransform","fontSize"],"sources":["HomeTabsScreen.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport { createMaterialTopTabNavigator } from '@react-navigation/material-top-tabs';\nimport { NativeStackScreenProps } from '@react-navigation/native-stack';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport HomeScreen from './HomeScreen';\nimport MapScreen from '../Map/MapScreen';\nimport { ShowFilters, Coordinates } from '../../types';\nimport { getCurrentLocation } from '../../services/locationService';\nimport { useAuth } from '../../contexts/AuthContext';\n\n// Define the main stack param list type\ntype MainStackParamList = {\n  MainTabs: undefined;\n  ShowDetail: { showId: string };\n};\n\ntype Props = NativeStackScreenProps<MainStackParamList>;\n\n// Create top tab navigator\nconst Tab = createMaterialTopTabNavigator();\n\n/**\n * HomeTabsScreen\n * \n * Container component that provides a tabbed interface between list and map views.\n * Manages shared state (filters, location) between the views and handles persistence.\n */\nconst HomeTabsScreen: React.FC<Props> = ({ navigation }) => {\n  const { authState } = useAuth();\n  const { user } = authState;\n\n  // Default filters\n  const defaultFilters: ShowFilters = {\n    radius: 25,\n    startDate: new Date(),\n    endDate: new Date(new Date().setDate(new Date().getDate() + 30)),\n  };\n\n  // Shared state\n  const [filters, setFilters] = useState<ShowFilters>(defaultFilters);\n  const [userLocation, setUserLocation] = useState<Coordinates | null>(null);\n  const [activeTab, setActiveTab] = useState<'list' | 'map'>('list');\n\n  // Load persisted filters on mount\n  useEffect(() => {\n    const loadFilters = async () => {\n      try {\n        const stored = await AsyncStorage.getItem('homeFilters');\n        if (stored) {\n          const parsed: ShowFilters = JSON.parse(stored);\n          // Convert date strings back to Date objects\n          if (parsed.startDate) {\n            parsed.startDate = new Date(parsed.startDate);\n          }\n          if (parsed.endDate) {\n            parsed.endDate = new Date(parsed.endDate);\n          }\n          setFilters({ ...defaultFilters, ...parsed });\n        }\n      } catch (e) {\n        console.warn('Failed to load stored filters', e);\n      }\n    };\n\n    loadFilters();\n  }, []);\n\n  // Persist filters whenever they change\n  useEffect(() => {\n    AsyncStorage.setItem('homeFilters', JSON.stringify(filters)).catch(() =>\n      console.warn('Failed to persist filters')\n    );\n  }, [filters]);\n\n  // Get user location on mount\n  useEffect(() => {\n    const fetchLocation = async () => {\n      try {\n        const location = await getCurrentLocation();\n        if (location) {\n          setUserLocation(location);\n        }\n      } catch (error) {\n        console.error('Error getting user location:', error);\n      }\n    };\n\n    fetchLocation();\n  }, []);\n\n  // Handle filter changes\n  const handleFilterChange = useCallback((newFilters: ShowFilters) => {\n    setFilters(newFilters);\n  }, []);\n\n  // Handle show selection\n  const handleShowPress = useCallback((showId: string) => {\n    navigation.navigate('ShowDetail', { showId });\n  }, [navigation]);\n\n  // Handle tab change\n  const handleTabChange = (index: number) => {\n    setActiveTab(index === 0 ? 'list' : 'map');\n  };\n\n  return (\n    <View style={styles.container}>\n      <Tab.Navigator\n        screenOptions={{\n          tabBarActiveTintColor: '#007AFF',\n          tabBarInactiveTintColor: '#666',\n          tabBarIndicatorStyle: { backgroundColor: '#007AFF' },\n          tabBarStyle: styles.tabBar,\n          tabBarLabelStyle: styles.tabLabel,\n        }}\n        screenListeners={{\n          state: (e) => {\n            const index = e.data.state?.index || 0;\n            handleTabChange(index);\n          },\n        }}\n      >\n        <Tab.Screen name=\"List\">\n          {(props) => (\n            <HomeScreen\n              {...props}\n              onFilterChange={handleFilterChange}\n              onShowPress={handleShowPress}\n              userLocation={userLocation}\n            />\n          )}\n        </Tab.Screen>\n        <Tab.Screen name=\"Map\">\n          {(props) => <MapScreen {...props} />}\n        </Tab.Screen>\n      </Tab.Navigator>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f8f8',\n  },\n  tabBar: {\n    backgroundColor: 'white',\n    elevation: 2,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n  },\n  tabLabel: {\n    fontWeight: '600',\n    textTransform: 'none',\n    fontSize: 14,\n  },\n});\n\nexport default HomeTabsScreen;\n"],"mappings":"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","ignoreList":[]}