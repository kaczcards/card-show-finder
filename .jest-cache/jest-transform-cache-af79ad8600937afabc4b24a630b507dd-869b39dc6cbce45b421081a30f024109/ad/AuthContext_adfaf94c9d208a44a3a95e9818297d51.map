{"version":3,"names":["React","createContext","useState","useEffect","useContext","supabase","UserRole","AsyncStorage","supabaseAuthService","refreshUserSession","jsx","_jsx","BYPASS_PROFILE_FETCH","cov_1jiijzbd8t","s","defaultAuthState","user","isLoading","error","isAuthenticated","AuthContext","authState","Object","assign","favoriteCount","login","_login","_asyncToGenerator","f","Error","apply","arguments","register","_register","logout","_logout","resetPassword","_resetPassword","updateProfile","_updateProfile","addFavoriteShow","_addFavoriteShow","removeFavoriteShow","_removeFavoriteShow","clearError","refreshUserRole","_refreshUserRole","AuthProvider","_ref","_ref31","_ref32","_ref33","children","_ref2","_ref3","_slicedToArray","setAuthState","_ref4","_ref5","setFavoriteCount","fetchFavoriteCount","_ref6","userId","b","_ref7","from","select","eq","single","data","console","count","favorite_shows_count","log","_x","initializeAuth","_ref8","_ref9","auth","getSession","session","_ref0","id","profileData","profileError","userData","email","firstName","first_name","lastName","last_name","undefined","homeZipCode","home_zip_code","role","createdAt","created_at","updatedAt","updated_at","isEmailVerified","email_confirmed_at","accountType","account_type","subscriptionStatus","subscription_status","subscriptionExpiry","subscription_expiry","favoriteShows","favorite_shows","attendedShows","attended_shows","phoneNumber","phone_number","profileImageUrl","profile_image_url","favoriteShowsCount","message","_ref1","onAuthStateChange","_ref10","event","_ref11","prev","_x2","_x3","subscription","unsubscribe","_ref12","credentials","result","signIn","newState","hasError","Promise","reject","_ref13","warn","nowIso","Date","toISOString","mockUser","MVP_DEALER","now","getCurrentUser","forceRefreshAndFetchProfile","msg","_x4","_ref14","password","registerUser","_x5","_x6","_x7","_x8","_x9","_x0","_ref15","signOut","_ref16","_x1","_ref17","userDataWithId","updatedUser","updateUserProfile","_x10","_ref18","showId","addShowToFavorites","_x11","_ref19","removeShowFromFavorites","_x12","_ref20","_ref23","_ref24","_ref25","_ref26","_ref27","_ref28","_ref29","keys","getAllKeys","supabaseKeys","filter","k","includes","length","multiRemove","clearErr","_ref21","success","refreshErr","_ref22","profile","mapped","ATTENDEE","is_email_verified","err","_x13","_ref30","fresh","e","contextValue","Provider","value","useAuth","context"],"sources":["AuthContext.tsx"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { supabase } from '../supabase';\nimport { User, UserRole, AuthState, AuthCredentials } from '../types';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport * as supabaseAuthService from '../services/supabaseAuthService';\nimport { signIn } from '../services/supabaseAuthService';\nimport { refreshUserSession } from '../services/sessionService';\n\n/* ------------------------------------------------------------------\n * Build-time / runtime dev flag to bypass profile fetch\n * ------------------------------------------------------------------\n * • Enabled automatically in Expo dev (`__DEV__`)\n * • Or via env  EXPO_PUBLIC_BYPASS_PROFILE_FETCH=true\n *   Lets developers log in with Auth only, even if the\n *   `profiles` row hasn't been created yet.\n * ------------------------------------------------------------------ */\n/**\n * BYPASS_PROFILE_FETCH disabled.\n * ---------------------------------------------------------------\n * This flag was intended for development convenience.  Leaving it\n * enabled in production caused ALL users to be treated as\n * MVP_DEALER, granting unintended access.  We now hard-disable it\n * to ensure each user’s role is always read from the database.\n */\nconst BYPASS_PROFILE_FETCH = false;\n\n// Define the shape of our auth context\ninterface AuthContextType {\n  authState: AuthState & { favoriteCount: number };\n  /**\n   * Convenience getters exposed alongside the full `authState`,\n   * so that consuming components can access them directly without\n   * drilling into `authState`.\n   */\n  error: string | null;\n  isLoading: boolean;\n  isAuthenticated: boolean;\n  login: (credentials: AuthCredentials) => Promise<User>;\n  register: (\n    email: string,\n    password: string,\n    firstName: string,\n    lastName: string,\n    homeZipCode: string,\n    role: UserRole\n  ) => Promise<User>;\n  logout: () => Promise<void>;\n  resetPassword: (email: string) => Promise<void>;\n  updateProfile: (userData: Partial<User>) => Promise<void>;\n  addFavoriteShow: (showId: string) => Promise<void>;\n  removeFavoriteShow: (showId: string) => Promise<void>;\n  clearError: () => void;\n  refreshUserRole: () => Promise<boolean>;\n}\n\n// Default auth state\nconst defaultAuthState: AuthState = {\n  user: null,\n  isLoading: true,\n  error: null,\n  isAuthenticated: false,\n};\n\n// Create the context with default values\nconst AuthContext = createContext<AuthContextType>({\n  authState: { ...defaultAuthState, favoriteCount: 0 },\n  error: defaultAuthState.error,\n  isLoading: defaultAuthState.isLoading,\n  isAuthenticated: defaultAuthState.isAuthenticated,\n  login: async () => { throw new Error('AuthContext not initialized'); },\n  register: async () => { throw new Error('AuthContext not initialized'); },\n  logout: async () => { throw new Error('AuthContext not initialized'); },\n  resetPassword: async () => { throw new Error('AuthContext not initialized'); },\n  updateProfile: async () => { throw new Error('AuthContext not initialized'); },\n  addFavoriteShow: async () => { throw new Error('AuthContext not initialized'); },\n  removeFavoriteShow: async () => { throw new Error('AuthContext not initialized'); },\n  clearError: () => {},\n  refreshUserRole: async () => false,\n});\n\n// Provider component\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [authState, setAuthState] = useState<AuthState>(defaultAuthState);\n  const [favoriteCount, setFavoriteCount] = useState(0);\n\n  // Function to fetch the count of user's favorite shows\n  const fetchFavoriteCount = async (userId: string) => {\n    if (!userId) {\n      setFavoriteCount(0);\n      return;\n    }\n\n    try {\n      // Get the favorite_shows_count directly from the profiles table\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('favorite_shows_count')\n        .eq('id', userId)\n        .single();\n\n      if (error) {\n        console.error('[AuthContext] Error fetching favorite_shows_count:', error);\n        return;\n      }\n\n      // Set the count from the profile data\n      const count = data?.favorite_shows_count || 0;\n      console.log('[AuthContext] Fetched favorite_shows_count:', count);\n      setFavoriteCount(count);\n    } catch (error) {\n      console.error('[AuthContext] Unexpected error in fetchFavoriteCount:', error);\n      // Keep the current count on error\n    }\n  };\n\n  // Initialize auth state on app start\n  useEffect(() => {\n    const initializeAuth = async () => {\n      try {\n        // Check if we have a stored session\n        const { data: { session }, error } = await supabase.auth.getSession();\n        \n        if (error) {\n          throw error;\n        }\n        \n        if (session) {\n          // Get user profile from the database\n          const { data: profileData, error: profileError } = await supabase\n            .from('profiles')\n            .select('*')\n            .eq('id', session.user.id)\n            .single();\n          \n          if (profileError) {\n            throw profileError;\n          }\n          \n          // Convert from Supabase format to our app's User format\n          const userData: User = {\n            id: session.user.id,\n            email: session.user.email || '',\n            firstName: profileData.first_name,\n            lastName: profileData.last_name || undefined,\n            homeZipCode: profileData.home_zip_code,\n            role: profileData.role as UserRole,\n            createdAt: profileData.created_at,\n            updatedAt: profileData.updated_at,\n            isEmailVerified: session.user.email_confirmed_at !== null,\n            accountType: profileData.account_type,\n            subscriptionStatus: profileData.subscription_status,\n            subscriptionExpiry: profileData.subscription_expiry,\n            favoriteShows: profileData.favorite_shows || [],\n            attendedShows: profileData.attended_shows || [],\n            phoneNumber: profileData.phone_number,\n            profileImageUrl: profileData.profile_image_url,\n            favoriteShowsCount: profileData.favorite_shows_count || 0,\n          };\n          \n          setAuthState({\n            user: userData,\n            isLoading: false,\n            error: null,\n            isAuthenticated: true,\n          });\n\n          // Set favorite count from profile data\n          setFavoriteCount(profileData.favorite_shows_count || 0);\n        } else {\n          // No session found\n          setAuthState({\n            user: null,\n            isLoading: false,\n            error: null,\n            isAuthenticated: false,\n          });\n        }\n      } catch (error: any) {\n        console.error('Error initializing auth:', error);\n        setAuthState({\n          user: null,\n          isLoading: false,\n          error: error.message || 'Failed to initialize authentication',\n          isAuthenticated: false,\n        });\n      }\n    };\n    \n    // Set up auth state change listener\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\n      async (event, session) => {\n        if (event === 'SIGNED_IN' && session) {\n          try {\n            // Get user profile from the database\n            const { data: profileData, error: profileError } = await supabase\n              .from('profiles')\n              .select('*')\n              .eq('id', session.user.id)\n              .single();\n            \n            if (profileError) {\n              throw profileError;\n            }\n            \n            // Convert from Supabase format to our app's User format\n            const userData: User = {\n              id: session.user.id,\n              email: session.user.email || '',\n              firstName: profileData.first_name,\n              lastName: profileData.last_name || undefined,\n              homeZipCode: profileData.home_zip_code,\n              role: profileData.role as UserRole,\n              createdAt: profileData.created_at,\n              updatedAt: profileData.updated_at,\n              isEmailVerified: session.user.email_confirmed_at !== null,\n              accountType: profileData.account_type,\n              subscriptionStatus: profileData.subscription_status,\n              subscriptionExpiry: profileData.subscription_expiry,\n              favoriteShows: profileData.favorite_shows || [],\n              attendedShows: profileData.attended_shows || [],\n              phoneNumber: profileData.phone_number,\n              profileImageUrl: profileData.profile_image_url,\n              favoriteShowsCount: profileData.favorite_shows_count || 0,\n            };\n            \n            setAuthState({\n              user: userData,\n              isLoading: false,\n              error: null,\n              isAuthenticated: true,\n            });\n\n            // Set favorite count from profile data\n            setFavoriteCount(profileData.favorite_shows_count || 0);\n          } catch (error: any) {\n            console.error('Error handling auth state change:', error);\n            setAuthState(prev => ({\n              ...prev,\n              isLoading: false,\n              error: error.message || 'Failed to get user data on auth change',\n            }));\n          }\n        } else if (event === 'SIGNED_OUT') {\n          setAuthState({\n            user: null,\n            isLoading: false,\n            error: null,\n            isAuthenticated: false,\n          });\n          setFavoriteCount(0);\n        }\n      }\n    );\n    \n    // Initialize auth\n    initializeAuth();\n    \n    // Cleanup subscription on unmount\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, []);\n  \n  // Login method\n  const login = async (credentials: AuthCredentials): Promise<User> => {\n    // 1. Immediately set the app to a \"loading\" state and clear old errors.\n    console.log('[AuthContext] Login attempt started for email:', credentials.email);\n    setAuthState(prev => ({ ...prev, isLoading: true, error: null }));\n\n    // 2. Call the Supabase service to attempt the login.\n    const result = await supabaseAuthService.signIn(credentials);\n\n    // 3. Handle the response directly.\n    if (result.error) {\n      // FAILURE: If the service returns an error, update the state.\n      console.error('[AuthContext] Login failed with error:', result.error.message);\n      \n      // Set the error message and turn off the loading indicator.\n      const newState = {\n        ...authState,\n        isLoading: false,\n        error: result.error.message,\n        isAuthenticated: false\n      };\n      \n      setAuthState(newState);\n      console.log('[AuthContext] Auth state updated after login failure:', \n        { isAuthenticated: newState.isAuthenticated, hasError: !!newState.error });\n      \n      return Promise.reject(new Error(result.error.message));\n    } else if (result.user) {\n      // SUCCESS: If the service returns a user, get their profile and update state.\n      console.log('[AuthContext] Auth login succeeded – id:', result.user.id);\n\n      // ---- Optional bypass for dev -------------------------------------------------\n      if (BYPASS_PROFILE_FETCH) {\n        console.warn(\n          '[AuthContext] BYPASS_PROFILE_FETCH active – skipping profile lookup, using auth payload only.'\n        );\n        const nowIso = new Date().toISOString();\n        \n        // Create a complete mock user with all fields that might be used elsewhere\n        const mockUser: User = {\n          id: result.user.id,\n          email: result.user.email ?? credentials.email,\n          firstName: 'Dev',\n          lastName: 'User',\n          homeZipCode: '00000',\n          role: UserRole.MVP_DEALER, // Use MVP_DEALER to access all features\n          createdAt: nowIso,\n          updatedAt: nowIso,\n          isEmailVerified: true, // Always verified in dev mode\n          accountType: 'collector',\n          subscriptionStatus: 'active', // Active subscription in dev mode\n          subscriptionExpiry: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toISOString(), // 1 year from now\n          favoriteShows: [],\n          attendedShows: [],\n          phoneNumber: '555-123-4567', // Add mock phone number\n          profileImageUrl: 'https://ui-avatars.com/api/?name=Dev+User&background=0D8ABC&color=fff', // Add mock profile image\n          favoriteShowsCount: 0, // Start with 0 favorites\n        };\n        \n        // Update state with the mock user\n        const newState = {\n          user: mockUser,\n          isLoading: false,\n          error: null,\n          isAuthenticated: true,\n        };\n        \n        setAuthState(newState);\n        console.log('[AuthContext] Auth state updated with mock user:', \n          { isAuthenticated: newState.isAuthenticated, userId: mockUser.id, role: mockUser.role });\n        \n        // Set favorite count to 0 for mock user\n        setFavoriteCount(0);\n        \n        return mockUser;\n      }\n\n      // ---- Normal profile fetch ----------------------------------------------------\n      console.log('[AuthContext] Fetching user profile from database...');\n      let userData = await supabaseAuthService.getCurrentUser(result.user.id);\n      \n      if (userData) {\n        console.log('[AuthContext] Profile fetch successful:', \n          { userId: userData.id, role: userData.role });\n        \n        // Create new state with the user data\n        const newState = {\n          user: userData,\n          isLoading: false,\n          error: null,\n          isAuthenticated: true\n        };\n        \n        setAuthState(newState);\n        console.log('[AuthContext] Auth state updated after successful login:', \n          { isAuthenticated: newState.isAuthenticated, userId: userData.id });\n        \n        // Fetch favorite count for the logged in user\n        fetchFavoriteCount(userData.id);\n        \n        return userData;\n      } else {\n        console.warn(\n          '[AuthContext] getCurrentUser returned null – attempting forceRefreshAndFetchProfile'\n        );\n        userData = await forceRefreshAndFetchProfile(result.user.id);\n\n        if (userData) {\n          console.log('[AuthContext] Fallback profile fetch succeeded:', \n            { userId: userData.id, role: userData.role });\n          \n          // Create new state with the user data from fallback\n          const newState = {\n            user: userData,\n            isLoading: false,\n            error: null,\n            isAuthenticated: true,\n          };\n          \n          setAuthState(newState);\n          console.log('[AuthContext] Auth state updated after fallback profile fetch:', \n            { isAuthenticated: newState.isAuthenticated, userId: userData.id });\n          \n          fetchFavoriteCount(userData.id);\n          return userData;\n        }\n\n        // EDGE CASE: Still no profile after fallback\n        console.error('[AuthContext] All profile fetch attempts failed');\n        const msg =\n          'We were unable to load your profile information. Please try again later or contact support.';\n        \n        const newState = {\n          ...authState,\n          isLoading: false,\n          error: msg,\n          isAuthenticated: false,\n        };\n        \n        setAuthState(newState);\n        console.log('[AuthContext] Auth state updated after all profile fetch attempts failed:', \n          { isAuthenticated: newState.isAuthenticated, hasError: !!newState.error });\n        \n        return Promise.reject(new Error(msg));\n      }\n    } else {\n      // EDGE CASE: If there's no error but also no user, handle it.\n      console.error('[AuthContext] No error but no user returned from auth service');\n      const msg = \"An unexpected error occurred. Please try again.\";\n      \n      const newState = {\n        ...authState,\n        isLoading: false,\n        error: msg,\n        isAuthenticated: false\n      };\n      \n      setAuthState(newState);\n      console.log('[AuthContext] Auth state updated after unexpected error:', \n        { isAuthenticated: newState.isAuthenticated, hasError: !!newState.error });\n      \n      return Promise.reject(new Error(msg));\n    }\n  };\n  \n  // Register method\n  const register = async (\n    email: string,\n    password: string,\n    firstName: string,\n    lastName: string,\n    homeZipCode: string,\n    role: UserRole\n  ): Promise<User> => {\n    try {\n      setAuthState(prev => ({ ...prev, isLoading: true, error: null }));\n      \n      const userData = await supabaseAuthService.registerUser(\n        email,\n        password,\n        firstName,\n        lastName,\n        homeZipCode,\n        role\n      );\n      \n      const newState = {\n        user: userData,\n        isLoading: false,\n        error: null,\n        isAuthenticated: true,\n      };\n      \n      setAuthState(newState);\n      console.log('[AuthContext] Auth state updated after registration:', \n        { isAuthenticated: newState.isAuthenticated, userId: userData.id });\n      \n      // New user has no favorites yet\n      setFavoriteCount(0);\n      \n      return userData;\n    } catch (error: any) {\n      console.error('Registration error:', error);\n      setAuthState(prev => ({\n        ...prev,\n        isLoading: false,\n        error: error.message || 'Failed to register',\n        isAuthenticated: false,\n      }));\n      throw error;\n    }\n  };\n  \n  // Logout method\n  const logout = async (): Promise<void> => {\n    try {\n      setAuthState(prev => ({ ...prev, isLoading: true, error: null }));\n      \n      await supabaseAuthService.signOut();\n      \n      const newState = {\n        user: null,\n        isLoading: false,\n        error: null,\n        isAuthenticated: false,\n      };\n      \n      setAuthState(newState);\n      console.log('[AuthContext] Auth state updated after logout:', \n        { isAuthenticated: newState.isAuthenticated });\n      \n      // Reset favorite count on logout\n      setFavoriteCount(0);\n    } catch (error: any) {\n      console.error('Logout error:', error);\n      setAuthState(prev => ({\n        ...prev,\n        isLoading: false,\n        error: error.message || 'Failed to sign out',\n      }));\n      throw error;\n    }\n  };\n  \n  // Reset password method\n  const resetPassword = async (email: string): Promise<void> => {\n    try {\n      setAuthState(prev => ({ ...prev, isLoading: true, error: null }));\n      \n      await supabaseAuthService.resetPassword(email);\n      \n      setAuthState(prev => ({\n        ...prev,\n        isLoading: false,\n        error: null,\n      }));\n    } catch (error: any) {\n      console.error('Reset password error:', error);\n      setAuthState(prev => ({\n        ...prev,\n        isLoading: false,\n        error: error.message || 'Failed to reset password',\n      }));\n      throw error;\n    }\n  };\n  \n  // Update profile method\n  const updateProfile = async (userData: Partial<User>): Promise<void> => {\n    try {\n      setAuthState(prev => ({ ...prev, isLoading: true, error: null }));\n      \n      if (!authState.user) {\n        throw new Error('User not authenticated');\n      }\n      \n      // Include the user ID in the userData object\n      const userDataWithId: Partial<User> = {\n        ...userData,\n        id: authState.user.id\n      };\n      \n      // Call the updated service with the userData that now includes ID\n      const updatedUser = await supabaseAuthService.updateUserProfile(userDataWithId);\n      \n      setAuthState(prev => ({\n        ...prev,\n        user: updatedUser,\n        isLoading: false,\n        error: null,\n      }));\n    } catch (error: any) {\n      console.error('Update profile error:', error);\n      setAuthState(prev => ({\n        ...prev,\n        isLoading: false,\n        error: error.message || 'Failed to update profile',\n      }));\n      throw error;\n    }\n  };\n  \n  // Add favorite show method\n  const addFavoriteShow = async (showId: string): Promise<void> => {\n    try {\n      if (!authState.user) {\n        throw new Error('User not authenticated');\n      }\n      \n      console.log('[AuthContext] Adding show to favorites:', showId);\n      \n      // Call the service to add the show to favorites\n      // The database trigger will automatically update the favorite_shows_count\n      await supabaseAuthService.addShowToFavorites(authState.user.id, showId);\n      \n      // Refresh the favorite count from the database\n      fetchFavoriteCount(authState.user.id);\n      \n      console.log('[AuthContext] Show added to favorites successfully');\n    } catch (error: any) {\n      console.error('[AuthContext] Error adding show to favorites:', error);\n      setAuthState(prev => ({\n        ...prev,\n        error: error.message || 'Failed to add show to favorites',\n      }));\n      throw error;\n    }\n  };\n  \n  // Remove favorite show method\n  const removeFavoriteShow = async (showId: string): Promise<void> => {\n    try {\n      if (!authState.user) {\n        throw new Error('User not authenticated');\n      }\n      \n      console.log('[AuthContext] Removing show from favorites:', showId);\n      \n      // Call the service to remove the show from favorites\n      // The database trigger will automatically update the favorite_shows_count\n      await supabaseAuthService.removeShowFromFavorites(authState.user.id, showId);\n      \n      // Refresh the favorite count from the database\n      fetchFavoriteCount(authState.user.id);\n      \n      console.log('[AuthContext] Show removed from favorites successfully');\n    } catch (error: any) {\n      console.error('[AuthContext] Error removing show from favorites:', error);\n      setAuthState(prev => ({\n        ...prev,\n        error: error.message || 'Failed to remove show from favorites',\n      }));\n      throw error;\n    }\n  };\n  \n  // Clear error method\n  const clearError = () => {\n    setAuthState(prev => ({\n      ...prev,\n      error: null,\n    }));\n  };\n\n  /**\n   * Helper util that guarantees we have the *latest* profile information\n   * from Supabase in three steps:\n   *   1. Clear any cached JWT/session entries in AsyncStorage (defensive)\n   *   2. Force‐refresh the JWT via `refreshUserSession`\n   *   3. Fetch a fresh profile row from the DB and map it to the `User` shape\n   *\n   * If any step fails we fall back to directly hitting the `profiles` table.\n   * Detailed console logs are provided to aid troubleshooting in production.\n   */\n  const forceRefreshAndFetchProfile = async (userId: string): Promise<User | null> => {\n    try {\n      // 1) Clear stale auth tokens from AsyncStorage (best-effort)\n      try {\n        const keys = await AsyncStorage.getAllKeys();\n        const supabaseKeys = keys.filter(k => k.includes('supabase'));\n        if (supabaseKeys.length) {\n          await AsyncStorage.multiRemove(supabaseKeys);\n          /* eslint-disable no-console */\n          console.log('[AuthContext] Cleared cached Supabase tokens', supabaseKeys);\n        }\n      } catch (clearErr) {\n        console.warn('[AuthContext] Failed to clear cached tokens', clearErr);\n      }\n\n      // 2) Force the session to refresh\n      const { success, error: refreshErr } = await refreshUserSession();\n      if (!success) {\n        console.warn('[AuthContext] Session refresh failed – falling back to direct DB fetch', refreshErr);\n      }\n\n      // 3) Fetch the latest profile data directly\n      const { data: profile, error } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', userId)\n        .single();\n\n      if (error || !profile) {\n        console.error('[AuthContext] Failed to fetch profile after refresh', error);\n        return null;\n      }\n\n      // Map DB → App `User`\n      const mapped: User = {\n        id: profile.id,\n        email: profile.email ?? '',\n        firstName: profile.first_name,\n        lastName: profile.last_name ?? undefined,\n        homeZipCode: profile.home_zip_code,\n        role: (profile.role as UserRole) ?? UserRole.ATTENDEE,\n        createdAt: profile.created_at,\n        updatedAt: profile.updated_at,\n        isEmailVerified: !!profile.is_email_verified,\n        accountType: profile.account_type ?? 'collector',\n        subscriptionStatus: profile.subscription_status ?? 'none',\n        subscriptionExpiry: profile.subscription_expiry,\n        favoriteShows: profile.favorite_shows || [],\n        attendedShows: profile.attended_shows || [],\n        phoneNumber: profile.phone_number ?? undefined,\n        profileImageUrl: profile.profile_image_url ?? undefined,\n        favoriteShowsCount: profile.favorite_shows_count || 0,\n      };\n      console.log('[AuthContext] Fetched fresh profile', mapped.role, mapped.accountType);\n\n      return mapped;\n    } catch (err) {\n      console.error('[AuthContext] Unexpected error in forceRefreshAndFetchProfile', err);\n      return null;\n    }\n  };\n\n  const refreshUserRole = async (): Promise<boolean> => {\n    try {\n      if (!authState.user) return false;\n\n      // Use the new robust helper\n      const fresh = await forceRefreshAndFetchProfile(authState.user.id);\n      if (!fresh) {\n        return false;\n      }\n\n      setAuthState(prev => {\n        if (!prev.user) return prev;\n        return {\n          ...prev,\n          user: fresh,\n        };\n      });\n      \n      // Also refresh the favorite count\n      fetchFavoriteCount(authState.user.id);\n      \n      return true;\n    } catch (e) {\n      console.error('An unexpected error occurred in refreshUserRole:', e);\n      return false;\n    }\n  };\n  \n  // Context value - ensuring error, isLoading, and isAuthenticated are always defined\n  const contextValue: AuthContextType = {\n    authState: { ...authState, favoriteCount },\n    // Explicitly extract these properties from authState with fallbacks to ensure they're never undefined\n    error: authState?.error ?? null,\n    isLoading: authState?.isLoading ?? false,\n    isAuthenticated: authState?.isAuthenticated ?? false,\n    login,\n    register,\n    logout,\n    resetPassword,\n    updateProfile,\n    addFavoriteShow,\n    removeFavoriteShow,\n    clearError,\n    refreshUserRole,\n  };\n  \n  return (\n    <AuthContext.Provider value={contextValue}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\n// Custom hook for using the auth context\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  \n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  \n  return context;\n};\n\nexport default AuthContext;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}