{"version":3,"names":["_ref","cov_13d4jsc0gq","s","require","createClient","config","supabaseUrl","b","process","env","SUPABASE_URL","REACT_APP_SUPABASE_URL","supabaseKey","SUPABASE_ANON_KEY","REACT_APP_SUPABASE_ANON_KEY","console","error","exit","supabase","USER_ID","checkDealerRole","_checkDealerRole","apply","arguments","_asyncToGenerator","f","log","_ref2","from","select","eq","single","profileData","data","profileError","_ref3","authData","authError","id","first_name","last_name","email","role","account_type","subscription_status","subscription_expiry","JSON","stringify","err","then","catch"],"sources":["check_dealer_role.js"],"sourcesContent":["// src/scripts/check_dealer_role.js\n/**\n * This script directly queries the Supabase database to check the role and subscription\n * status of a specific dealer account to diagnose why they might be showing as MVP dealer\n * when they shouldn't be.\n * \n * Usage:\n * node src/scripts/check_dealer_role.js\n * \n * Requires SUPABASE_URL and SUPABASE_ANON_KEY environment variables to be set\n */\n\nconst { createClient } = require('@supabase/supabase-js');\nrequire('dotenv').config();\n\n// Initialize Supabase client\nconst supabaseUrl = process.env.SUPABASE_URL || process.env.REACT_APP_SUPABASE_URL;\nconst supabaseKey = process.env.SUPABASE_ANON_KEY || process.env.REACT_APP_SUPABASE_ANON_KEY;\n\nif (!supabaseUrl || !supabaseKey) {\n  console.error('Error: Supabase URL or key not found in environment variables');\n  console.error('Please set SUPABASE_URL and SUPABASE_ANON_KEY in your .env file');\n  process.exit(1);\n}\n\nconst supabase = createClient(supabaseUrl, supabaseKey);\n\n// User ID to check\nconst USER_ID = '7d792f27-9112-4837-926f-42e4eb1f0577';\n\n/**\n * Check user role and subscription status in the database\n */\nasync function checkDealerRole() {\n  console.log(`\\nüîç Checking database for user ID: ${USER_ID}\\n`);\n  \n  try {\n    // Query the profiles table for the user\n    const { data: profileData, error: profileError } = await supabase\n      .from('profiles')\n      .select('*')\n      .eq('id', USER_ID)\n      .single();\n    \n    if (profileError) {\n      console.error('‚ùå Error fetching profile data:', profileError);\n      return;\n    }\n    \n    if (!profileData) {\n      console.log(`‚ùå No profile found for user ID: ${USER_ID}`);\n      return;\n    }\n    \n    // Query the auth.users table for additional info\n    const { data: authData, error: authError } = await supabase\n      .from('auth.users')\n      .select('*')\n      .eq('id', USER_ID)\n      .single();\n    \n    // Format and display the results\n    console.log('üìã USER PROFILE DATA:');\n    console.log('====================');\n    console.log(`ID: ${profileData.id}`);\n    console.log(`Name: ${profileData.first_name} ${profileData.last_name || ''}`);\n    console.log(`Email: ${profileData.email}`);\n    console.log(`Role: ${profileData.role}`);\n    console.log(`Account Type: ${profileData.account_type}`);\n    console.log(`Subscription Status: ${profileData.subscription_status}`);\n    console.log(`Subscription Expiry: ${profileData.subscription_expiry || 'N/A'}`);\n    \n    // Check for role-subscription mismatches\n    console.log('\\nüîç DIAGNOSIS:');\n    console.log('====================');\n    \n    // Check if role is dealer but showing as MVP\n    if (profileData.role === 'dealer' && profileData.account_type === 'dealer') {\n      console.log('‚úÖ User has correct role \"dealer\" in the database');\n    } else if (profileData.role === 'mvp_dealer') {\n      console.log('‚ö†Ô∏è User has \"mvp_dealer\" role in the database but should be \"dealer\"');\n      console.log('   This explains why they are showing as MVP Dealer in the UI');\n    } else {\n      console.log(`‚ö†Ô∏è User has unexpected role \"${profileData.role}\" with account type \"${profileData.account_type}\"`);\n    }\n    \n    // Check subscription status\n    if (profileData.subscription_status === 'active' && profileData.account_type === 'dealer') {\n      console.log('‚úÖ User has active subscription as expected for a dealer');\n    } else if (profileData.subscription_status !== 'active') {\n      console.log(`‚ö†Ô∏è User has \"${profileData.subscription_status}\" subscription status`);\n    }\n    \n    // Check for any UI display logic issues\n    console.log('\\nüîß POSSIBLE FIXES:');\n    console.log('====================');\n    console.log('1. If role is \"mvp_dealer\" but should be \"dealer\", update the role in the database:');\n    console.log(`   UPDATE profiles SET role = 'dealer' WHERE id = '${USER_ID}';`);\n    console.log('\\n2. If the UI is incorrectly displaying the role, check the ProfileScreen.tsx file');\n    console.log('   for any logic that might be overriding the role display.');\n    console.log('\\n3. Check the getRoleDisplayName function in ProfileScreen.tsx to ensure');\n    console.log('   it correctly maps UserRole.DEALER to \"Dealer\" and not \"MVP Dealer\".');\n    \n    // Raw data for debugging\n    console.log('\\nüìä RAW PROFILE DATA:');\n    console.log('====================');\n    console.log(JSON.stringify(profileData, null, 2));\n    \n    if (authData && !authError) {\n      console.log('\\nüìä RAW AUTH DATA:');\n      console.log('====================');\n      console.log(JSON.stringify(authData, null, 2));\n    }\n    \n  } catch (err) {\n    console.error('‚ùå Unexpected error:', err);\n  }\n}\n\n// Run the function\ncheckDealerRole()\n  .then(() => console.log('\\n‚úÖ Check completed'))\n  .catch(err => console.error('‚ùå Fatal error:', err));\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}