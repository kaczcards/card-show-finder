{"version":3,"names":["useQuery","useMutation","useQueryClient","Alert","Share","Linking","supabase","useAuth","handleSupabaseError","cov_tz6l8rh26","s","useShowDetailQuery","showId","_authContext$authStat","_data$show","f","queryClient","authContext","user","b","authState","fetchShowDetails","_ref","_asyncToGenerator","_ref2","rpc","show_id","data","error","Error","message","enhanceWithSocialMediaLinks","_ref3","privilegedDealers","participatingDealers","filter","dealer","role","length","_ref4","from","select","in","map","id","profiles","console","profileMap","Map","forEach","profile","set","facebookUrl","facebook_url","instagramUrl","instagram_url","twitterUrl","twitter_url","whatnotUrl","whatnot_url","ebayStoreUrl","ebay_store_url","enhancedDealers","has","Object","assign","get","err","_x","apply","arguments","enhancedData","_ref5","queryKey","queryFn","staleTime","retry","isLoading","isError","refetch","isCurrentUserOrganizer","show","organizer_id","isShowOrganizer","checkIfFavorite","_ref6","_session$user","_ref7","auth","getSession","session","_ref8","eq","single","_ref9","enabled","_ref9$data","isFavorite","refetchFavorite","toggleFavoriteMutation","mutationFn","_mutationFn","_ref0","sessionError","userId","_ref1","delete","_ref10","insert","user_id","onSuccess","newFavoriteStatus","setQueryData","invalidateQueries","onError","appError","alert","toggleFavorite","_ref11","mutate","formatShowDate","start_date","startDate","Date","options","weekday","year","month","day","toLocaleDateString","shareShow","_ref12","title","location","address","share","openMapLocation","encodedAddress","encodeURIComponent","url","openURL","catch","googleUrl","handleClaimShow","organizer","loading","isClaimingShow"],"sources":["useShowDetailQuery.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Alert, Share, Linking } from 'react-native';\nimport { supabase } from '../supabase';\nimport { useAuth } from '../contexts/AuthContext';\nimport { handleSupabaseError } from '../services/errorService';\n\n// Define types for better type safety\ntype UserRole = 'SHOW_ORGANIZER' | 'MVP_DEALER' | 'DEALER' | 'USER';\n\ninterface Dealer {\n  id: string;\n  name: string;\n  profileImageUrl?: string;\n  role: UserRole;\n  accountType?: string;\n  boothLocation?: string;\n  // --- Social Media & Marketplace links (added for Task 8) ------------------\n  facebookUrl?: string;\n  instagramUrl?: string;\n  twitterUrl?: string;\n  whatnotUrl?: string;\n  ebayStoreUrl?: string;\n}\n\ninterface ShowDetails {\n  id: string;\n  title: string;\n  description?: string;\n  location?: string;\n  address?: string;\n  start_date?: string;\n  end_date?: string;\n  start_time?: string;\n  end_time?: string;\n  entry_fee?: number | string;\n  organizer_id?: string;\n  claimed_by?: string;\n  [key: string]: any; // For additional properties\n}\n\ninterface OrganizerProfile {\n  id?: string;\n  first_name?: string;\n  last_name?: string;\n  profile_image_url?: string;\n  username?: string;\n  full_name?: string;\n  avatar_url?: string;\n  [key: string]: any; // For additional properties\n}\n\ninterface ShowDetailResponse {\n  show: ShowDetails;\n  organizer: OrganizerProfile | null;\n  participatingDealers: Dealer[];\n  isFavoriteCount: number;\n}\n\n/**\n * Custom hook to fetch show details using React Query and the get_show_details_by_id RPC function\n * @param showId The ID of the show to fetch\n */\nexport const useShowDetailQuery = (showId: string) => {\n  const queryClient = useQueryClient();\n  const authContext = useAuth();\n  const user = authContext.authState?.user || null;\n  \n  // Function to fetch show details from the RPC\n  const fetchShowDetails = async () => {\n    const { data, error } = await supabase.rpc('get_show_details_by_id', { \n      show_id: showId \n    });\n    \n    if (error) {\n      throw new Error(error.message);\n    }\n    \n    if (!data || data.error) {\n      throw new Error(data?.error || 'Failed to load show details');\n    }\n    \n    // Enhanced version that adds social media links for MVP Dealers\n    const enhanceWithSocialMediaLinks = async (data: ShowDetailResponse) => {\n      // Find any dealers with elevated privileges (MVP Dealers or Show Organizers)\n      const privilegedDealers = data.participatingDealers.filter(\n        dealer =>\n          dealer.role === 'MVP_DEALER' ||\n          dealer.role === 'SHOW_ORGANIZER'\n      );\n      \n      if (privilegedDealers.length === 0) return data; // No privileged dealers to enhance\n      \n      try {\n        // Fetch profiles for all MVP dealers in a single batch\n        const { data: profiles, error } = await supabase\n          .from('profiles')\n          .select('id, facebook_url, instagram_url, twitter_url, whatnot_url, ebay_store_url')\n          .in('id', privilegedDealers.map(dealer => dealer.id));\n        \n        if (error || !profiles) {\n          console.error('Error fetching dealer social media:', error);\n          return data; // Return original data if there's an error\n        }\n        \n        // Create a map for easy lookup\n        const profileMap = new Map();\n        profiles.forEach(profile => {\n          profileMap.set(profile.id, {\n            facebookUrl: profile.facebook_url,\n            instagramUrl: profile.instagram_url,\n            twitterUrl: profile.twitter_url,\n            whatnotUrl: profile.whatnot_url,\n            ebayStoreUrl: profile.ebay_store_url\n          });\n        });\n        \n        // Enhance the dealers with social media links\n        const enhancedDealers = data.participatingDealers.map(dealer => {\n          if (\n            (dealer.role === 'MVP_DEALER' || dealer.role === 'SHOW_ORGANIZER') &&\n            profileMap.has(dealer.id)\n          ) {\n            return {\n              ...dealer,\n              ...profileMap.get(dealer.id)\n            };\n          }\n          return dealer;\n        });\n        \n        return {\n          ...data,\n          participatingDealers: enhancedDealers\n        };\n      } catch (err) {\n        console.error('Unexpected error enhancing dealers with social media:', err);\n        return data; // Return original data if there's an error\n      }\n    };\n\n    // Apply the enhancement\n    const enhancedData = await enhanceWithSocialMediaLinks(data as ShowDetailResponse);\n    return enhancedData;\n  };\n  \n  // Use React Query to fetch and cache the show details\n  const { \n    data,\n    isLoading,\n    isError,\n    error,\n    refetch\n  } = useQuery({\n    queryKey: ['showDetails', showId],\n    queryFn: fetchShowDetails,\n    staleTime: 60 * 1000, // Consider data fresh for 1 minute\n    retry: 1, // Only retry once on failure\n  });\n  \n  // Check if the current user is the show organizer\n  const isCurrentUserOrganizer = user?.id === data?.show?.organizer_id;\n  \n  // Check if the user has a show organizer role\n  const isShowOrganizer = user?.role === 'SHOW_ORGANIZER';\n  \n  // Check if the show is a favorite\n  const checkIfFavorite = async () => {\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session?.user?.id) return false;\n      \n      const { data, error } = await supabase\n        .from('user_favorite_shows')\n        .select()\n        .eq('user_id', session.user.id)\n        .eq('show_id', showId)\n        .single();\n        \n      return !error && !!data;\n    } catch (error) {\n      console.error('Error checking favorite status:', error);\n      return false;\n    }\n  };\n  \n  // Use a query to check if the show is a favorite\n  const { \n    data: isFavorite = false,\n    refetch: refetchFavorite\n  } = useQuery({\n    queryKey: ['showFavorite', showId, user?.id],\n    queryFn: checkIfFavorite,\n    enabled: !!user?.id, // Only run if user is logged in\n  });\n  \n  // Mutation for toggling favorite status\n  const toggleFavoriteMutation = useMutation({\n    mutationFn: async () => {\n      const { data: { session }, error: sessionError } = await supabase.auth.getSession();\n      if (sessionError || !session?.user) {\n        throw new Error('Please sign in to save favorites');\n      }\n      const userId = session.user.id;\n\n      if (isFavorite) {\n        const { error } = await supabase\n          .from('user_favorite_shows')\n          .delete()\n          .eq('user_id', userId)\n          .eq('show_id', showId);\n        if (error) throw error;\n        return false; // Not a favorite anymore\n      } else {\n        const { error } = await supabase\n          .from('user_favorite_shows')\n          .insert([{ user_id: userId, show_id: showId }]);\n        if (error) throw error;\n        return true; // Now a favorite\n      }\n    },\n    onSuccess: (newFavoriteStatus) => {\n      // Update the cache\n      queryClient.setQueryData(['showFavorite', showId, user?.id], newFavoriteStatus);\n      // Invalidate the show details to update the favorite count\n      queryClient.invalidateQueries({ queryKey: ['showDetails', showId] });\n    },\n    onError: (error) => {\n      const appError = handleSupabaseError(error);\n      console.error('ðŸš¨ UNEXPECTED ERROR in toggleFavorite:', appError);\n      Alert.alert('Error', 'An unexpected error occurred while updating favorites.');\n    }\n  });\n  \n  // Helper function to toggle favorite status\n  const toggleFavorite = async () => {\n    if (!user) {\n      Alert.alert('Sign In Required', 'Please sign in to save favorites');\n      return;\n    }\n    \n    toggleFavoriteMutation.mutate();\n  };\n  \n  // Helper function to format show date\n  const formatShowDate = (show: ShowDetails) => {\n    if (!show.start_date) return '';\n    \n    const startDate = new Date(show.start_date);\n    const options: Intl.DateTimeFormatOptions = { \n      weekday: 'long', \n      year: 'numeric', \n      month: 'long', \n      day: 'numeric' \n    };\n    \n    return startDate.toLocaleDateString('en-US', options);\n  };\n  \n  // Helper function to share the show\n  const shareShow = async () => {\n    if (!data?.show) return;\n    \n    try {\n      const show = data.show;\n      const message = `Check out this card show: ${show.title}\\n\\nWhen: ${formatShowDate(show)}\\nWhere: ${show.location || show.address}\\n\\nShared from Card Show Finder app`;\n      await Share.share({ message, title: show.title });\n    } catch (error) {\n      console.error('Error sharing:', error);\n    }\n  };\n  \n  // Helper function to open the map location\n  const openMapLocation = () => {\n    if (!data?.show) return;\n    \n    const address = data.show.address || data.show.location || '';\n    const encodedAddress = encodeURIComponent(address);\n    const url = `https://maps.apple.com/?q=${encodedAddress}`;\n    \n    Linking.openURL(url).catch(() => {\n      const googleUrl = `https://www.google.com/maps/search/?api=1&query=${encodedAddress}`;\n      Linking.openURL(googleUrl);\n    });\n  };\n  \n  // Helper function for claiming a show (placeholder)\n  const handleClaimShow = () => {\n    Alert.alert(\"Claim Show\", \"This feature is coming soon!\");\n  };\n  \n  return {\n    // Data from the query\n    show: data?.show || null,\n    organizer: data?.organizer || null,\n    participatingDealers: data?.participatingDealers || [],\n    \n    // Status\n    loading: isLoading,\n    error: isError ? (error as Error)?.message || 'An error occurred' : null,\n    isFavorite,\n    isShowOrganizer,\n    isCurrentUserOrganizer,\n    isClaimingShow: false, // Placeholder, can be implemented as needed\n    \n    // Functions\n    fetchShowDetails: refetch,\n    toggleFavorite,\n    shareShow,\n    openMapLocation,\n    handleClaimShow\n  };\n};\n\nexport default useShowDetailQuery;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,QAAQ,EAAEC,WAAW,EAAEC,cAAc,QAAQ,uBAAuB;AAC7E,SAASC,KAAK,EAAEC,KAAK,EAAEC,OAAO,QAAQ,cAAc;AACpD,SAASC,QAAQ,QAAQ,aAAa;AACtC,SAASC,OAAO,QAAQ,yBAAyB;AACjD,SAASC,mBAAmB,QAAQ,0BAA0B;AAACC,aAAA,GAAAC,CAAA;AA0D/D,OAAO,IAAMC,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAIC,MAAc,EAAK;EAAA,IAAAC,qBAAA,EAAAC,UAAA;EAAAL,aAAA,GAAAM,CAAA;EACpD,IAAMC,WAAW,IAAAP,aAAA,GAAAC,CAAA,OAAGR,cAAc,CAAC,CAAC;EACpC,IAAMe,WAAW,IAAAR,aAAA,GAAAC,CAAA,OAAGH,OAAO,CAAC,CAAC;EAC7B,IAAMW,IAAI,IAAAT,aAAA,GAAAC,CAAA,OAAG,CAAAD,aAAA,GAAAU,CAAA,WAAAN,qBAAA,GAAAI,WAAW,CAACG,SAAS,qBAArBP,qBAAA,CAAuBK,IAAI,MAAAT,aAAA,GAAAU,CAAA,UAAI,IAAI;EAACV,aAAA,GAAAC,CAAA;EAGjD,IAAMW,gBAAgB;IAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,aAAY;MAAAd,aAAA,GAAAM,CAAA;MACnC,IAAAS,KAAA,IAAAf,aAAA,GAAAC,CAAA,aAA8BJ,QAAQ,CAACmB,GAAG,CAAC,wBAAwB,EAAE;UACnEC,OAAO,EAAEd;QACX,CAAC,CAAC;QAFMe,IAAI,GAAAH,KAAA,CAAJG,IAAI;QAAEC,KAAK,GAAAJ,KAAA,CAALI,KAAK;MAEhBnB,aAAA,GAAAC,CAAA;MAEH,IAAIkB,KAAK,EAAE;QAAAnB,aAAA,GAAAU,CAAA;QAAAV,aAAA,GAAAC,CAAA;QACT,MAAM,IAAImB,KAAK,CAACD,KAAK,CAACE,OAAO,CAAC;MAChC,CAAC;QAAArB,aAAA,GAAAU,CAAA;MAAA;MAAAV,aAAA,GAAAC,CAAA;MAED,IAAI,CAAAD,aAAA,GAAAU,CAAA,WAACQ,IAAI,MAAAlB,aAAA,GAAAU,CAAA,UAAIQ,IAAI,CAACC,KAAK,GAAE;QAAAnB,aAAA,GAAAU,CAAA;QAAAV,aAAA,GAAAC,CAAA;QACvB,MAAM,IAAImB,KAAK,CAAC,CAAApB,aAAA,GAAAU,CAAA,UAAAQ,IAAI,oBAAJA,IAAI,CAAEC,KAAK,MAAAnB,aAAA,GAAAU,CAAA,UAAI,6BAA6B,EAAC;MAC/D,CAAC;QAAAV,aAAA,GAAAU,CAAA;MAAA;MAAAV,aAAA,GAAAC,CAAA;MAGD,IAAMqB,2BAA2B;QAAA,IAAAC,KAAA,GAAAT,iBAAA,CAAG,WAAOI,IAAwB,EAAK;UAAAlB,aAAA,GAAAM,CAAA;UAEtE,IAAMkB,iBAAiB,IAAAxB,aAAA,GAAAC,CAAA,QAAGiB,IAAI,CAACO,oBAAoB,CAACC,MAAM,CACxD,UAAAC,MAAM,EACJ;YAAA3B,aAAA,GAAAM,CAAA;YAAAN,aAAA,GAAAC,CAAA;YAAA,QAAAD,aAAA,GAAAU,CAAA,UAAAiB,MAAM,CAACC,IAAI,KAAK,YAAY,MAAA5B,aAAA,GAAAU,CAAA,UAC5BiB,MAAM,CAACC,IAAI,KAAK,gBAAgB;UAAD,CACnC,CAAC;UAAC5B,aAAA,GAAAC,CAAA;UAEF,IAAIuB,iBAAiB,CAACK,MAAM,KAAK,CAAC,EAAE;YAAA7B,aAAA,GAAAU,CAAA;YAAAV,aAAA,GAAAC,CAAA;YAAA,OAAOiB,IAAI;UAAA,CAAC;YAAAlB,aAAA,GAAAU,CAAA;UAAA;UAAAV,aAAA,GAAAC,CAAA;UAEhD,IAAI;YAEF,IAAA6B,KAAA,IAAA9B,aAAA,GAAAC,CAAA,cAAwCJ,QAAQ,CAC7CkC,IAAI,CAAC,UAAU,CAAC,CAChBC,MAAM,CAAC,2EAA2E,CAAC,CACnFC,EAAE,CAAC,IAAI,EAAET,iBAAiB,CAACU,GAAG,CAAC,UAAAP,MAAM,EAAI;gBAAA3B,aAAA,GAAAM,CAAA;gBAAAN,aAAA,GAAAC,CAAA;gBAAA,OAAA0B,MAAM,CAACQ,EAAE;cAAD,CAAC,CAAC,CAAC;cAHzCC,QAAQ,GAAAN,KAAA,CAAdZ,IAAI;cAAYC,MAAK,GAAAW,KAAA,CAALX,KAAK;YAG2BnB,aAAA,GAAAC,CAAA;YAExD,IAAI,CAAAD,aAAA,GAAAU,CAAA,UAAAS,MAAK,MAAAnB,aAAA,GAAAU,CAAA,UAAI,CAAC0B,QAAQ,GAAE;cAAApC,aAAA,GAAAU,CAAA;cAAAV,aAAA,GAAAC,CAAA;cACtBoC,OAAO,CAAClB,KAAK,CAAC,qCAAqC,EAAEA,MAAK,CAAC;cAACnB,aAAA,GAAAC,CAAA;cAC5D,OAAOiB,IAAI;YACb,CAAC;cAAAlB,aAAA,GAAAU,CAAA;YAAA;YAGD,IAAM4B,UAAU,IAAAtC,aAAA,GAAAC,CAAA,QAAG,IAAIsC,GAAG,CAAC,CAAC;YAACvC,aAAA,GAAAC,CAAA;YAC7BmC,QAAQ,CAACI,OAAO,CAAC,UAAAC,OAAO,EAAI;cAAAzC,aAAA,GAAAM,CAAA;cAAAN,aAAA,GAAAC,CAAA;cAC1BqC,UAAU,CAACI,GAAG,CAACD,OAAO,CAACN,EAAE,EAAE;gBACzBQ,WAAW,EAAEF,OAAO,CAACG,YAAY;gBACjCC,YAAY,EAAEJ,OAAO,CAACK,aAAa;gBACnCC,UAAU,EAAEN,OAAO,CAACO,WAAW;gBAC/BC,UAAU,EAAER,OAAO,CAACS,WAAW;gBAC/BC,YAAY,EAAEV,OAAO,CAACW;cACxB,CAAC,CAAC;YACJ,CAAC,CAAC;YAGF,IAAMC,eAAe,IAAArD,aAAA,GAAAC,CAAA,QAAGiB,IAAI,CAACO,oBAAoB,CAACS,GAAG,CAAC,UAAAP,MAAM,EAAI;cAAA3B,aAAA,GAAAM,CAAA;cAAAN,aAAA,GAAAC,CAAA;cAC9D,IACE,CAAC,CAAAD,aAAA,GAAAU,CAAA,WAAAiB,MAAM,CAACC,IAAI,KAAK,YAAY,MAAA5B,aAAA,GAAAU,CAAA,WAAIiB,MAAM,CAACC,IAAI,KAAK,gBAAgB,OAAA5B,aAAA,GAAAU,CAAA,WACjE4B,UAAU,CAACgB,GAAG,CAAC3B,MAAM,CAACQ,EAAE,CAAC,GACzB;gBAAAnC,aAAA,GAAAU,CAAA;gBAAAV,aAAA,GAAAC,CAAA;gBACA,OAAAsD,MAAA,CAAAC,MAAA,KACK7B,MAAM,EACNW,UAAU,CAACmB,GAAG,CAAC9B,MAAM,CAACQ,EAAE,CAAC;cAEhC,CAAC;gBAAAnC,aAAA,GAAAU,CAAA;cAAA;cAAAV,aAAA,GAAAC,CAAA;cACD,OAAO0B,MAAM;YACf,CAAC,CAAC;YAAC3B,aAAA,GAAAC,CAAA;YAEH,OAAAsD,MAAA,CAAAC,MAAA,KACKtC,IAAI;cACPO,oBAAoB,EAAE4B;YAAe;UAEzC,CAAC,CAAC,OAAOK,GAAG,EAAE;YAAA1D,aAAA,GAAAC,CAAA;YACZoC,OAAO,CAAClB,KAAK,CAAC,uDAAuD,EAAEuC,GAAG,CAAC;YAAC1D,aAAA,GAAAC,CAAA;YAC5E,OAAOiB,IAAI;UACb;QACF,CAAC;QAAA,gBAxDKI,2BAA2BA,CAAAqC,EAAA;UAAA,OAAApC,KAAA,CAAAqC,KAAA,OAAAC,SAAA;QAAA;MAAA,GAwDhC;MAGD,IAAMC,YAAY,IAAA9D,aAAA,GAAAC,CAAA,cAASqB,2BAA2B,CAACJ,IAA0B,CAAC;MAAClB,aAAA,GAAAC,CAAA;MACnF,OAAO6D,YAAY;IACrB,CAAC;IAAA,gBA3EKlD,gBAAgBA,CAAA;MAAA,OAAAC,IAAA,CAAA+C,KAAA,OAAAC,SAAA;IAAA;EAAA,GA2ErB;EAGD,IAAAE,KAAA,IAAA/D,aAAA,GAAAC,CAAA,QAMIV,QAAQ,CAAC;MACXyE,QAAQ,EAAE,CAAC,aAAa,EAAE7D,MAAM,CAAC;MACjC8D,OAAO,EAAErD,gBAAgB;MACzBsD,SAAS,EAAE,EAAE,GAAG,IAAI;MACpBC,KAAK,EAAE;IACT,CAAC,CAAC;IAVAjD,IAAI,GAAA6C,KAAA,CAAJ7C,IAAI;IACJkD,SAAS,GAAAL,KAAA,CAATK,SAAS;IACTC,OAAO,GAAAN,KAAA,CAAPM,OAAO;IACPlD,KAAK,GAAA4C,KAAA,CAAL5C,KAAK;IACLmD,OAAO,GAAAP,KAAA,CAAPO,OAAO;EAST,IAAMC,sBAAsB,IAAAvE,aAAA,GAAAC,CAAA,QAAG,CAAAQ,IAAI,oBAAJA,IAAI,CAAE0B,EAAE,OAAKjB,IAAI,aAAAb,UAAA,GAAJa,IAAI,CAAEsD,IAAI,qBAAVnE,UAAA,CAAYoE,YAAY;EAGpE,IAAMC,eAAe,IAAA1E,aAAA,GAAAC,CAAA,QAAG,CAAAQ,IAAI,oBAAJA,IAAI,CAAEmB,IAAI,MAAK,gBAAgB;EAAC5B,aAAA,GAAAC,CAAA;EAGxD,IAAM0E,eAAe;IAAA,IAAAC,KAAA,GAAA9D,iBAAA,CAAG,aAAY;MAAAd,aAAA,GAAAM,CAAA;MAAAN,aAAA,GAAAC,CAAA;MAClC,IAAI;QAAA,IAAA4E,aAAA;QACF,IAAAC,KAAA,IAAA9E,aAAA,GAAAC,CAAA,cAAoCJ,QAAQ,CAACkF,IAAI,CAACC,UAAU,CAAC,CAAC;UAA9CC,OAAO,GAAAH,KAAA,CAAf5D,IAAI,CAAI+D,OAAO;QAAwCjF,aAAA,GAAAC,CAAA;QAC/D,IAAI,EAACgF,OAAO,aAAAJ,aAAA,GAAPI,OAAO,CAAExE,IAAI,aAAboE,aAAA,CAAe1C,EAAE,GAAE;UAAAnC,aAAA,GAAAU,CAAA;UAAAV,aAAA,GAAAC,CAAA;UAAA,OAAO,KAAK;QAAA,CAAC;UAAAD,aAAA,GAAAU,CAAA;QAAA;QAErC,IAAAwE,KAAA,IAAAlF,aAAA,GAAAC,CAAA,cAA8BJ,QAAQ,CACnCkC,IAAI,CAAC,qBAAqB,CAAC,CAC3BC,MAAM,CAAC,CAAC,CACRmD,EAAE,CAAC,SAAS,EAAEF,OAAO,CAACxE,IAAI,CAAC0B,EAAE,CAAC,CAC9BgD,EAAE,CAAC,SAAS,EAAEhF,MAAM,CAAC,CACrBiF,MAAM,CAAC,CAAC;UALHlE,KAAI,GAAAgE,KAAA,CAAJhE,IAAI;UAAEC,OAAK,GAAA+D,KAAA,CAAL/D,KAAK;QAKPnB,aAAA,GAAAC,CAAA;QAEZ,OAAO,CAAAD,aAAA,GAAAU,CAAA,YAACS,OAAK,MAAAnB,aAAA,GAAAU,CAAA,WAAI,CAAC,CAACQ,KAAI;MACzB,CAAC,CAAC,OAAOC,KAAK,EAAE;QAAAnB,aAAA,GAAAC,CAAA;QACdoC,OAAO,CAAClB,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;QAACnB,aAAA,GAAAC,CAAA;QACxD,OAAO,KAAK;MACd;IACF,CAAC;IAAA,gBAjBK0E,eAAeA,CAAA;MAAA,OAAAC,KAAA,CAAAhB,KAAA,OAAAC,SAAA;IAAA;EAAA,GAiBpB;EAGD,IAAAwB,KAAA,IAAArF,aAAA,GAAAC,CAAA,QAGIV,QAAQ,CAAC;MACXyE,QAAQ,EAAE,CAAC,cAAc,EAAE7D,MAAM,EAAEM,IAAI,oBAAJA,IAAI,CAAE0B,EAAE,CAAC;MAC5C8B,OAAO,EAAEU,eAAe;MACxBW,OAAO,EAAE,CAAC,EAAC7E,IAAI,YAAJA,IAAI,CAAE0B,EAAE;IACrB,CAAC,CAAC;IAAAoD,UAAA,GAAAF,KAAA,CANAnE,IAAI;IAAEsE,UAAU,GAAAD,UAAA,eAAAvF,aAAA,GAAAU,CAAA,WAAG,KAAK,IAAA6E,UAAA;IACfE,eAAe,GAAAJ,KAAA,CAAxBf,OAAO;EAQT,IAAMoB,sBAAsB,IAAA1F,aAAA,GAAAC,CAAA,QAAGT,WAAW,CAAC;IACzCmG,UAAU;MAAA,IAAAC,WAAA,GAAA9E,iBAAA,CAAE,aAAY;QAAAd,aAAA,GAAAM,CAAA;QACtB,IAAAuF,KAAA,IAAA7F,aAAA,GAAAC,CAAA,cAAyDJ,QAAQ,CAACkF,IAAI,CAACC,UAAU,CAAC,CAAC;UAAnEC,OAAO,GAAAY,KAAA,CAAf3E,IAAI,CAAI+D,OAAO;UAAWa,YAAY,GAAAD,KAAA,CAAnB1E,KAAK;QAAoDnB,aAAA,GAAAC,CAAA;QACpF,IAAI,CAAAD,aAAA,GAAAU,CAAA,WAAAoF,YAAY,MAAA9F,aAAA,GAAAU,CAAA,WAAI,EAACuE,OAAO,YAAPA,OAAO,CAAExE,IAAI,IAAE;UAAAT,aAAA,GAAAU,CAAA;UAAAV,aAAA,GAAAC,CAAA;UAClC,MAAM,IAAImB,KAAK,CAAC,kCAAkC,CAAC;QACrD,CAAC;UAAApB,aAAA,GAAAU,CAAA;QAAA;QACD,IAAMqF,MAAM,IAAA/F,aAAA,GAAAC,CAAA,QAAGgF,OAAO,CAACxE,IAAI,CAAC0B,EAAE;QAACnC,aAAA,GAAAC,CAAA;QAE/B,IAAIuF,UAAU,EAAE;UAAAxF,aAAA,GAAAU,CAAA;UACd,IAAAsF,KAAA,IAAAhG,aAAA,GAAAC,CAAA,cAAwBJ,QAAQ,CAC7BkC,IAAI,CAAC,qBAAqB,CAAC,CAC3BkE,MAAM,CAAC,CAAC,CACRd,EAAE,CAAC,SAAS,EAAEY,MAAM,CAAC,CACrBZ,EAAE,CAAC,SAAS,EAAEhF,MAAM,CAAC;YAJhBgB,OAAK,GAAA6E,KAAA,CAAL7E,KAAK;UAIYnB,aAAA,GAAAC,CAAA;UACzB,IAAIkB,OAAK,EAAE;YAAAnB,aAAA,GAAAU,CAAA;YAAAV,aAAA,GAAAC,CAAA;YAAA,MAAMkB,OAAK;UAAA,CAAC;YAAAnB,aAAA,GAAAU,CAAA;UAAA;UAAAV,aAAA,GAAAC,CAAA;UACvB,OAAO,KAAK;QACd,CAAC,MAAM;UAAAD,aAAA,GAAAU,CAAA;UACL,IAAAwF,MAAA,IAAAlG,aAAA,GAAAC,CAAA,cAAwBJ,QAAQ,CAC7BkC,IAAI,CAAC,qBAAqB,CAAC,CAC3BoE,MAAM,CAAC,CAAC;cAAEC,OAAO,EAAEL,MAAM;cAAE9E,OAAO,EAAEd;YAAO,CAAC,CAAC,CAAC;YAFzCgB,OAAK,GAAA+E,MAAA,CAAL/E,KAAK;UAEqCnB,aAAA,GAAAC,CAAA;UAClD,IAAIkB,OAAK,EAAE;YAAAnB,aAAA,GAAAU,CAAA;YAAAV,aAAA,GAAAC,CAAA;YAAA,MAAMkB,OAAK;UAAA,CAAC;YAAAnB,aAAA,GAAAU,CAAA;UAAA;UAAAV,aAAA,GAAAC,CAAA;UACvB,OAAO,IAAI;QACb;MACF,CAAC;MAAA,SAtBD0F,UAAUA,CAAA;QAAA,OAAAC,WAAA,CAAAhC,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAV8B,UAAU;IAAA,GAsBT;IACDU,SAAS,EAAE,SAAXA,SAASA,CAAGC,iBAAiB,EAAK;MAAAtG,aAAA,GAAAM,CAAA;MAAAN,aAAA,GAAAC,CAAA;MAEhCM,WAAW,CAACgG,YAAY,CAAC,CAAC,cAAc,EAAEpG,MAAM,EAAEM,IAAI,oBAAJA,IAAI,CAAE0B,EAAE,CAAC,EAAEmE,iBAAiB,CAAC;MAACtG,aAAA,GAAAC,CAAA;MAEhFM,WAAW,CAACiG,iBAAiB,CAAC;QAAExC,QAAQ,EAAE,CAAC,aAAa,EAAE7D,MAAM;MAAE,CAAC,CAAC;IACtE,CAAC;IACDsG,OAAO,EAAE,SAATA,OAAOA,CAAGtF,KAAK,EAAK;MAAAnB,aAAA,GAAAM,CAAA;MAClB,IAAMoG,QAAQ,IAAA1G,aAAA,GAAAC,CAAA,QAAGF,mBAAmB,CAACoB,KAAK,CAAC;MAACnB,aAAA,GAAAC,CAAA;MAC5CoC,OAAO,CAAClB,KAAK,CAAC,wCAAwC,EAAEuF,QAAQ,CAAC;MAAC1G,aAAA,GAAAC,CAAA;MAClEP,KAAK,CAACiH,KAAK,CAAC,OAAO,EAAE,wDAAwD,CAAC;IAChF;EACF,CAAC,CAAC;EAAC3G,aAAA,GAAAC,CAAA;EAGH,IAAM2G,cAAc;IAAA,IAAAC,MAAA,GAAA/F,iBAAA,CAAG,aAAY;MAAAd,aAAA,GAAAM,CAAA;MAAAN,aAAA,GAAAC,CAAA;MACjC,IAAI,CAACQ,IAAI,EAAE;QAAAT,aAAA,GAAAU,CAAA;QAAAV,aAAA,GAAAC,CAAA;QACTP,KAAK,CAACiH,KAAK,CAAC,kBAAkB,EAAE,kCAAkC,CAAC;QAAC3G,aAAA,GAAAC,CAAA;QACpE;MACF,CAAC;QAAAD,aAAA,GAAAU,CAAA;MAAA;MAAAV,aAAA,GAAAC,CAAA;MAEDyF,sBAAsB,CAACoB,MAAM,CAAC,CAAC;IACjC,CAAC;IAAA,gBAPKF,cAAcA,CAAA;MAAA,OAAAC,MAAA,CAAAjD,KAAA,OAAAC,SAAA;IAAA;EAAA,GAOnB;EAAC7D,aAAA,GAAAC,CAAA;EAGF,IAAM8G,cAAc,GAAG,SAAjBA,cAAcA,CAAIvC,IAAiB,EAAK;IAAAxE,aAAA,GAAAM,CAAA;IAAAN,aAAA,GAAAC,CAAA;IAC5C,IAAI,CAACuE,IAAI,CAACwC,UAAU,EAAE;MAAAhH,aAAA,GAAAU,CAAA;MAAAV,aAAA,GAAAC,CAAA;MAAA,OAAO,EAAE;IAAA,CAAC;MAAAD,aAAA,GAAAU,CAAA;IAAA;IAEhC,IAAMuG,SAAS,IAAAjH,aAAA,GAAAC,CAAA,QAAG,IAAIiH,IAAI,CAAC1C,IAAI,CAACwC,UAAU,CAAC;IAC3C,IAAMG,OAAmC,IAAAnH,aAAA,GAAAC,CAAA,QAAG;MAC1CmH,OAAO,EAAE,MAAM;MACfC,IAAI,EAAE,SAAS;MACfC,KAAK,EAAE,MAAM;MACbC,GAAG,EAAE;IACP,CAAC;IAACvH,aAAA,GAAAC,CAAA;IAEF,OAAOgH,SAAS,CAACO,kBAAkB,CAAC,OAAO,EAAEL,OAAO,CAAC;EACvD,CAAC;EAACnH,aAAA,GAAAC,CAAA;EAGF,IAAMwH,SAAS;IAAA,IAAAC,MAAA,GAAA5G,iBAAA,CAAG,aAAY;MAAAd,aAAA,GAAAM,CAAA;MAAAN,aAAA,GAAAC,CAAA;MAC5B,IAAI,EAACiB,IAAI,YAAJA,IAAI,CAAEsD,IAAI,GAAE;QAAAxE,aAAA,GAAAU,CAAA;QAAAV,aAAA,GAAAC,CAAA;QAAA;MAAM,CAAC;QAAAD,aAAA,GAAAU,CAAA;MAAA;MAAAV,aAAA,GAAAC,CAAA;MAExB,IAAI;QACF,IAAMuE,IAAI,IAAAxE,aAAA,GAAAC,CAAA,QAAGiB,IAAI,CAACsD,IAAI;QACtB,IAAMnD,OAAO,IAAArB,aAAA,GAAAC,CAAA,QAAG,6BAA6BuE,IAAI,CAACmD,KAAK,aAAaZ,cAAc,CAACvC,IAAI,CAAC,YAAY,CAAAxE,aAAA,GAAAU,CAAA,WAAA8D,IAAI,CAACoD,QAAQ,MAAA5H,aAAA,GAAAU,CAAA,WAAI8D,IAAI,CAACqD,OAAO,uCAAsC;QAAC7H,aAAA,GAAAC,CAAA;QACxK,MAAMN,KAAK,CAACmI,KAAK,CAAC;UAAEzG,OAAO,EAAPA,OAAO;UAAEsG,KAAK,EAAEnD,IAAI,CAACmD;QAAM,CAAC,CAAC;MACnD,CAAC,CAAC,OAAOxG,KAAK,EAAE;QAAAnB,aAAA,GAAAC,CAAA;QACdoC,OAAO,CAAClB,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;MACxC;IACF,CAAC;IAAA,gBAVKsG,SAASA,CAAA;MAAA,OAAAC,MAAA,CAAA9D,KAAA,OAAAC,SAAA;IAAA;EAAA,GAUd;EAAC7D,aAAA,GAAAC,CAAA;EAGF,IAAM8H,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAS;IAAA/H,aAAA,GAAAM,CAAA;IAAAN,aAAA,GAAAC,CAAA;IAC5B,IAAI,EAACiB,IAAI,YAAJA,IAAI,CAAEsD,IAAI,GAAE;MAAAxE,aAAA,GAAAU,CAAA;MAAAV,aAAA,GAAAC,CAAA;MAAA;IAAM,CAAC;MAAAD,aAAA,GAAAU,CAAA;IAAA;IAExB,IAAMmH,OAAO,IAAA7H,aAAA,GAAAC,CAAA,QAAG,CAAAD,aAAA,GAAAU,CAAA,WAAAQ,IAAI,CAACsD,IAAI,CAACqD,OAAO,MAAA7H,aAAA,GAAAU,CAAA,WAAIQ,IAAI,CAACsD,IAAI,CAACoD,QAAQ,MAAA5H,aAAA,GAAAU,CAAA,WAAI,EAAE;IAC7D,IAAMsH,cAAc,IAAAhI,aAAA,GAAAC,CAAA,QAAGgI,kBAAkB,CAACJ,OAAO,CAAC;IAClD,IAAMK,GAAG,IAAAlI,aAAA,GAAAC,CAAA,QAAG,6BAA6B+H,cAAc,EAAE;IAAChI,aAAA,GAAAC,CAAA;IAE1DL,OAAO,CAACuI,OAAO,CAACD,GAAG,CAAC,CAACE,KAAK,CAAC,YAAM;MAAApI,aAAA,GAAAM,CAAA;MAC/B,IAAM+H,SAAS,IAAArI,aAAA,GAAAC,CAAA,QAAG,mDAAmD+H,cAAc,EAAE;MAAChI,aAAA,GAAAC,CAAA;MACtFL,OAAO,CAACuI,OAAO,CAACE,SAAS,CAAC;IAC5B,CAAC,CAAC;EACJ,CAAC;EAACrI,aAAA,GAAAC,CAAA;EAGF,IAAMqI,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAS;IAAAtI,aAAA,GAAAM,CAAA;IAAAN,aAAA,GAAAC,CAAA;IAC5BP,KAAK,CAACiH,KAAK,CAAC,YAAY,EAAE,8BAA8B,CAAC;EAC3D,CAAC;EAAC3G,aAAA,GAAAC,CAAA;EAEF,OAAO;IAELuE,IAAI,EAAE,CAAAxE,aAAA,GAAAU,CAAA,WAAAQ,IAAI,oBAAJA,IAAI,CAAEsD,IAAI,MAAAxE,aAAA,GAAAU,CAAA,WAAI,IAAI;IACxB6H,SAAS,EAAE,CAAAvI,aAAA,GAAAU,CAAA,WAAAQ,IAAI,oBAAJA,IAAI,CAAEqH,SAAS,MAAAvI,aAAA,GAAAU,CAAA,WAAI,IAAI;IAClCe,oBAAoB,EAAE,CAAAzB,aAAA,GAAAU,CAAA,WAAAQ,IAAI,oBAAJA,IAAI,CAAEO,oBAAoB,MAAAzB,aAAA,GAAAU,CAAA,WAAI,EAAE;IAGtD8H,OAAO,EAAEpE,SAAS;IAClBjD,KAAK,EAAEkD,OAAO,IAAArE,aAAA,GAAAU,CAAA,WAAG,CAAAV,aAAA,GAAAU,CAAA,WAACS,KAAK,oBAALA,KAAK,CAAYE,OAAO,MAAArB,aAAA,GAAAU,CAAA,WAAI,mBAAmB,MAAAV,aAAA,GAAAU,CAAA,WAAG,IAAI;IACxE8E,UAAU,EAAVA,UAAU;IACVd,eAAe,EAAfA,eAAe;IACfH,sBAAsB,EAAtBA,sBAAsB;IACtBkE,cAAc,EAAE,KAAK;IAGrB7H,gBAAgB,EAAE0D,OAAO;IACzBsC,cAAc,EAAdA,cAAc;IACda,SAAS,EAATA,SAAS;IACTM,eAAe,EAAfA,eAAe;IACfO,eAAe,EAAfA;EACF,CAAC;AACH,CAAC;AAED,eAAepI,kBAAkB","ignoreList":[]}