1a1e5dca794fcb2197b82742bb1a9b41
import _asyncToGenerator from "@babel/runtime/helpers/asyncToGenerator";
import { env as _env } from "expo/virtual/env";
function cov_2672s7zqdg() {
  var path = "/Users/kevin/card-show-finder/src/services/stripePaymentService.ts";
  var hash = "638e5c33e8a944f896951da429102b18e789af1c";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/kevin/card-show-finder/src/services/stripePaymentService.ts",
    statementMap: {
      "0": {
        start: {
          line: 46,
          column: 31
        },
        end: {
          line: 46,
          column: 77
        }
      },
      "1": {
        start: {
          line: 47,
          column: 35
        },
        end: {
          line: 47,
          column: 111
        }
      },
      "2": {
        start: {
          line: 56,
          column: 32
        },
        end: {
          line: 63,
          column: 1
        }
      },
      "3": {
        start: {
          line: 57,
          column: 2
        },
        end: {
          line: 60,
          column: 3
        }
      },
      "4": {
        start: {
          line: 58,
          column: 4
        },
        end: {
          line: 58,
          column: 97
        }
      },
      "5": {
        start: {
          line: 59,
          column: 4
        },
        end: {
          line: 59,
          column: 17
        }
      },
      "6": {
        start: {
          line: 62,
          column: 2
        },
        end: {
          line: 62,
          column: 14
        }
      },
      "7": {
        start: {
          line: 75,
          column: 49
        },
        end: {
          line: 174,
          column: 1
        }
      },
      "8": {
        start: {
          line: 81,
          column: 15
        },
        end: {
          line: 81,
          column: 60
        }
      },
      "9": {
        start: {
          line: 81,
          column: 44
        },
        end: {
          line: 81,
          column: 59
        }
      },
      "10": {
        start: {
          line: 82,
          column: 2
        },
        end: {
          line: 84,
          column: 3
        }
      },
      "11": {
        start: {
          line: 83,
          column: 4
        },
        end: {
          line: 83,
          column: 69
        }
      },
      "12": {
        start: {
          line: 86,
          column: 2
        },
        end: {
          line: 173,
          column: 3
        }
      },
      "13": {
        start: {
          line: 94,
          column: 8
        },
        end: {
          line: 94,
          column: 40
        }
      },
      "14": {
        start: {
          line: 96,
          column: 24
        },
        end: {
          line: 96,
          column: 45
        }
      },
      "15": {
        start: {
          line: 98,
          column: 21
        },
        end: {
          line: 111,
          column: 6
        }
      },
      "16": {
        start: {
          line: 113,
          column: 4
        },
        end: {
          line: 116,
          column: 5
        }
      },
      "17": {
        start: {
          line: 114,
          column: 24
        },
        end: {
          line: 114,
          column: 45
        }
      },
      "18": {
        start: {
          line: 115,
          column: 6
        },
        end: {
          line: 115,
          column: 77
        }
      },
      "19": {
        start: {
          line: 118,
          column: 77
        },
        end: {
          line: 118,
          column: 98
        }
      },
      "20": {
        start: {
          line: 121,
          column: 33
        },
        end: {
          line: 128,
          column: 6
        }
      },
      "21": {
        start: {
          line: 130,
          column: 4
        },
        end: {
          line: 142,
          column: 5
        }
      },
      "22": {
        start: {
          line: 131,
          column: 6
        },
        end: {
          line: 131,
          column: 65
        }
      },
      "23": {
        start: {
          line: 132,
          column: 6
        },
        end: {
          line: 140,
          column: 9
        }
      },
      "24": {
        start: {
          line: 141,
          column: 6
        },
        end: {
          line: 141,
          column: 86
        }
      },
      "25": {
        start: {
          line: 145,
          column: 36
        },
        end: {
          line: 145,
          column: 63
        }
      },
      "26": {
        start: {
          line: 147,
          column: 4
        },
        end: {
          line: 163,
          column: 5
        }
      },
      "27": {
        start: {
          line: 149,
          column: 6
        },
        end: {
          line: 151,
          column: 7
        }
      },
      "28": {
        start: {
          line: 150,
          column: 8
        },
        end: {
          line: 150,
          column: 66
        }
      },
      "29": {
        start: {
          line: 152,
          column: 6
        },
        end: {
          line: 152,
          column: 71
        }
      },
      "30": {
        start: {
          line: 153,
          column: 6
        },
        end: {
          line: 161,
          column: 9
        }
      },
      "31": {
        start: {
          line: 162,
          column: 6
        },
        end: {
          line: 162,
          column: 82
        }
      },
      "32": {
        start: {
          line: 166,
          column: 4
        },
        end: {
          line: 166,
          column: 65
        }
      },
      "33": {
        start: {
          line: 168,
          column: 4
        },
        end: {
          line: 168,
          column: 59
        }
      },
      "34": {
        start: {
          line: 171,
          column: 4
        },
        end: {
          line: 171,
          column: 73
        }
      },
      "35": {
        start: {
          line: 172,
          column: 4
        },
        end: {
          line: 172,
          column: 84
        }
      },
      "36": {
        start: {
          line: 184,
          column: 41
        },
        end: {
          line: 231,
          column: 1
        }
      },
      "37": {
        start: {
          line: 189,
          column: 2
        },
        end: {
          line: 230,
          column: 3
        }
      },
      "38": {
        start: {
          line: 198,
          column: 23
        },
        end: {
          line: 198,
          column: 48
        }
      },
      "39": {
        start: {
          line: 201,
          column: 20
        },
        end: {
          line: 201,
          column: 90
        }
      },
      "40": {
        start: {
          line: 204,
          column: 4
        },
        end: {
          line: 204,
          column: 87
        }
      },
      "41": {
        start: {
          line: 207,
          column: 4
        },
        end: {
          line: 214,
          column: 7
        }
      },
      "42": {
        start: {
          line: 217,
          column: 4
        },
        end: {
          line: 217,
          column: 81
        }
      },
      "43": {
        start: {
          line: 221,
          column: 4
        },
        end: {
          line: 229,
          column: 7
        }
      },
      "44": {
        start: {
          line: 240,
          column: 42
        },
        end: {
          line: 261,
          column: 1
        }
      },
      "45": {
        start: {
          line: 245,
          column: 20
        },
        end: {
          line: 255,
          column: 21
        }
      },
      "46": {
        start: {
          line: 257,
          column: 2
        },
        end: {
          line: 260,
          column: 3
        }
      },
      "47": {
        start: {
          line: 258,
          column: 4
        },
        end: {
          line: 258,
          column: 75
        }
      },
      "48": {
        start: {
          line: 259,
          column: 4
        },
        end: {
          line: 259,
          column: 68
        }
      },
      "49": {
        start: {
          line: 268,
          column: 19
        },
        end: {
          line: 275,
          column: 1
        }
      },
      "50": {
        start: {
          line: 269,
          column: 20
        },
        end: {
          line: 269,
          column: 71
        }
      },
      "51": {
        start: {
          line: 271,
          column: 2
        },
        end: {
          line: 274,
          column: 3
        }
      },
      "52": {
        start: {
          line: 272,
          column: 4
        },
        end: {
          line: 272,
          column: 63
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 56,
            column: 32
          },
          end: {
            line: 56,
            column: 33
          }
        },
        loc: {
          start: {
            line: 56,
            column: 47
          },
          end: {
            line: 63,
            column: 1
          }
        },
        line: 56
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 75,
            column: 49
          },
          end: {
            line: 75,
            column: 50
          }
        },
        loc: {
          start: {
            line: 80,
            column: 35
          },
          end: {
            line: 174,
            column: 1
          }
        },
        line: 80
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 81,
            column: 39
          },
          end: {
            line: 81,
            column: 40
          }
        },
        loc: {
          start: {
            line: 81,
            column: 44
          },
          end: {
            line: 81,
            column: 59
          }
        },
        line: 81
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 184,
            column: 41
          },
          end: {
            line: 184,
            column: 42
          }
        },
        loc: {
          start: {
            line: 188,
            column: 20
          },
          end: {
            line: 231,
            column: 1
          }
        },
        line: 188
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 240,
            column: 42
          },
          end: {
            line: 240,
            column: 43
          }
        },
        loc: {
          start: {
            line: 244,
            column: 20
          },
          end: {
            line: 261,
            column: 1
          }
        },
        line: 244
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 268,
            column: 19
          },
          end: {
            line: 268,
            column: 20
          }
        },
        loc: {
          start: {
            line: 268,
            column: 69
          },
          end: {
            line: 275,
            column: 1
          }
        },
        line: 268
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 57,
            column: 2
          },
          end: {
            line: 60,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 57,
            column: 2
          },
          end: {
            line: 60,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 57
      },
      "1": {
        loc: {
          start: {
            line: 82,
            column: 2
          },
          end: {
            line: 84,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 82,
            column: 2
          },
          end: {
            line: 84,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 82
      },
      "2": {
        loc: {
          start: {
            line: 103,
            column: 12
          },
          end: {
            line: 103,
            column: 73
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 103,
            column: 26
          },
          end: {
            line: 103,
            column: 68
          }
        }, {
          start: {
            line: 103,
            column: 71
          },
          end: {
            line: 103,
            column: 73
          }
        }],
        line: 103
      },
      "3": {
        loc: {
          start: {
            line: 113,
            column: 4
          },
          end: {
            line: 116,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 113,
            column: 4
          },
          end: {
            line: 116,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 113
      },
      "4": {
        loc: {
          start: {
            line: 115,
            column: 22
          },
          end: {
            line: 115,
            column: 75
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 115,
            column: 22
          },
          end: {
            line: 115,
            column: 37
          }
        }, {
          start: {
            line: 115,
            column: 41
          },
          end: {
            line: 115,
            column: 75
          }
        }],
        line: 115
      },
      "5": {
        loc: {
          start: {
            line: 130,
            column: 4
          },
          end: {
            line: 142,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 130,
            column: 4
          },
          end: {
            line: 142,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 130
      },
      "6": {
        loc: {
          start: {
            line: 147,
            column: 4
          },
          end: {
            line: 163,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 147,
            column: 4
          },
          end: {
            line: 163,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 147
      },
      "7": {
        loc: {
          start: {
            line: 149,
            column: 6
          },
          end: {
            line: 151,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 149,
            column: 6
          },
          end: {
            line: 151,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 149
      },
      "8": {
        loc: {
          start: {
            line: 172,
            column: 36
          },
          end: {
            line: 172,
            column: 81
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 172,
            column: 36
          },
          end: {
            line: 172,
            column: 49
          }
        }, {
          start: {
            line: 172,
            column: 53
          },
          end: {
            line: 172,
            column: 81
          }
        }],
        line: 172
      },
      "9": {
        loc: {
          start: {
            line: 201,
            column: 20
          },
          end: {
            line: 201,
            column: 90
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 201,
            column: 45
          },
          end: {
            line: 201,
            column: 64
          }
        }, {
          start: {
            line: 201,
            column: 67
          },
          end: {
            line: 201,
            column: 90
          }
        }],
        line: 201
      },
      "10": {
        loc: {
          start: {
            line: 257,
            column: 2
          },
          end: {
            line: 260,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 257,
            column: 2
          },
          end: {
            line: 260,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 257
      },
      "11": {
        loc: {
          start: {
            line: 271,
            column: 2
          },
          end: {
            line: 274,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 271,
            column: 2
          },
          end: {
            line: 274,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 271
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "638e5c33e8a944f896951da429102b18e789af1c"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    cov_2672s7zqdg = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2672s7zqdg();
import { supabase } from '../supabase';
import { SUBSCRIPTION_PLANS, calculateExpiryDate } from './subscriptionTypes';
import { UserRole } from './userRoleService';
var STRIPE_PUBLISHABLE_KEY = (cov_2672s7zqdg().s[0]++, _env.EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY);
var SUPABASE_EDGE_FUNCTION_URL = (cov_2672s7zqdg().s[1]++, `${_env.EXPO_PUBLIC_SUPABASE_URL}/functions/v1/create-payment-intent`);
cov_2672s7zqdg().s[2]++;
export var initializeStripe = function initializeStripe() {
  cov_2672s7zqdg().f[0]++;
  cov_2672s7zqdg().s[3]++;
  if (!STRIPE_PUBLISHABLE_KEY) {
    cov_2672s7zqdg().b[0][0]++;
    cov_2672s7zqdg().s[4]++;
    console.error('Stripe publishable key is not set. Please check your environment variables.');
    cov_2672s7zqdg().s[5]++;
    return false;
  } else {
    cov_2672s7zqdg().b[0][1]++;
  }
  cov_2672s7zqdg().s[6]++;
  return true;
};
cov_2672s7zqdg().s[7]++;
export var createPaymentSheetForSubscription = function () {
  var _ref = _asyncToGenerator(function* (userId, planId, initPaymentSheet, presentPaymentSheet) {
    cov_2672s7zqdg().f[1]++;
    var plan = (cov_2672s7zqdg().s[8]++, SUBSCRIPTION_PLANS.find(function (p) {
      cov_2672s7zqdg().f[2]++;
      cov_2672s7zqdg().s[9]++;
      return p.id === planId;
    }));
    cov_2672s7zqdg().s[10]++;
    if (!plan) {
      cov_2672s7zqdg().b[1][0]++;
      cov_2672s7zqdg().s[11]++;
      return {
        success: false,
        error: 'Subscription plan not found.'
      };
    } else {
      cov_2672s7zqdg().b[1][1]++;
    }
    cov_2672s7zqdg().s[12]++;
    try {
      var _ref2 = (cov_2672s7zqdg().s[13]++, yield supabase.auth.getSession()),
        session = _ref2.data.session;
      var accessToken = (cov_2672s7zqdg().s[14]++, session == null ? void 0 : session.access_token);
      var response = (cov_2672s7zqdg().s[15]++, yield fetch(SUPABASE_EDGE_FUNCTION_URL, {
        method: 'POST',
        headers: Object.assign({
          'Content-Type': 'application/json'
        }, accessToken ? (cov_2672s7zqdg().b[2][0]++, {
          Authorization: `Bearer ${accessToken}`
        }) : (cov_2672s7zqdg().b[2][1]++, {})),
        body: JSON.stringify({
          amount: plan.price * 100,
          currency: 'usd',
          userId: userId,
          planId: plan.id
        })
      }));
      cov_2672s7zqdg().s[16]++;
      if (!response.ok) {
        cov_2672s7zqdg().b[3][0]++;
        var errorBody = (cov_2672s7zqdg().s[17]++, yield response.json());
        cov_2672s7zqdg().s[18]++;
        throw new Error((cov_2672s7zqdg().b[4][0]++, errorBody.error) || (cov_2672s7zqdg().b[4][1]++, 'Failed to create payment intent.'));
      } else {
        cov_2672s7zqdg().b[3][1]++;
      }
      var _ref3 = (cov_2672s7zqdg().s[19]++, yield response.json()),
        paymentIntent = _ref3.paymentIntent,
        ephemeralKey = _ref3.ephemeralKey,
        customer = _ref3.customer;
      var _ref4 = (cov_2672s7zqdg().s[20]++, yield initPaymentSheet({
          merchantDisplayName: 'Card Show Finder, LLC.',
          customerId: customer,
          customerEphemeralKeySecret: ephemeralKey,
          paymentIntentClientSecret: paymentIntent,
          allowsDelayedPaymentMethods: true,
          returnURL: 'cardshowfinder://stripe-redirect'
        })),
        initError = _ref4.error;
      cov_2672s7zqdg().s[21]++;
      if (initError) {
        cov_2672s7zqdg().b[5][0]++;
        cov_2672s7zqdg().s[22]++;
        console.error('Stripe initPaymentSheet error:', initError);
        cov_2672s7zqdg().s[23]++;
        yield logPayment({
          user_id: userId,
          plan_id: plan.id,
          amount: plan.price,
          currency: 'usd',
          status: 'failed',
          transaction_id: paymentIntent,
          error_message: `Init Error: ${initError.message}`
        });
        cov_2672s7zqdg().s[24]++;
        return {
          success: false,
          error: `Initialization failed: ${initError.message}`
        };
      } else {
        cov_2672s7zqdg().b[5][1]++;
      }
      var _ref5 = (cov_2672s7zqdg().s[25]++, yield presentPaymentSheet()),
        presentError = _ref5.error;
      cov_2672s7zqdg().s[26]++;
      if (presentError) {
        cov_2672s7zqdg().b[6][0]++;
        cov_2672s7zqdg().s[27]++;
        if (presentError.code === 'Canceled') {
          cov_2672s7zqdg().b[7][0]++;
          cov_2672s7zqdg().s[28]++;
          return {
            success: false,
            error: 'Payment was canceled.'
          };
        } else {
          cov_2672s7zqdg().b[7][1]++;
        }
        cov_2672s7zqdg().s[29]++;
        console.error('Stripe presentPaymentSheet error:', presentError);
        cov_2672s7zqdg().s[30]++;
        yield logPayment({
          user_id: userId,
          plan_id: plan.id,
          amount: plan.price,
          currency: 'usd',
          status: 'failed',
          transaction_id: paymentIntent,
          error_message: `Present Error: ${presentError.message}`
        });
        cov_2672s7zqdg().s[31]++;
        return {
          success: false,
          error: `Payment failed: ${presentError.message}`
        };
      } else {
        cov_2672s7zqdg().b[6][1]++;
      }
      cov_2672s7zqdg().s[32]++;
      yield processSubscriptionUpdate(userId, plan, paymentIntent);
      cov_2672s7zqdg().s[33]++;
      return {
        success: true,
        transactionId: paymentIntent
      };
    } catch (error) {
      cov_2672s7zqdg().s[34]++;
      console.error('An unexpected error occurred during payment:', error);
      cov_2672s7zqdg().s[35]++;
      return {
        success: false,
        error: (cov_2672s7zqdg().b[8][0]++, error.message) || (cov_2672s7zqdg().b[8][1]++, 'An unknown error occurred.')
      };
    }
  });
  return function createPaymentSheetForSubscription(_x, _x2, _x3, _x4) {
    return _ref.apply(this, arguments);
  };
}();
cov_2672s7zqdg().s[36]++;
export var processSubscriptionUpdate = function () {
  var _ref6 = _asyncToGenerator(function* (userId, plan, transactionId) {
    cov_2672s7zqdg().f[3]++;
    cov_2672s7zqdg().s[37]++;
    try {
      var expiryDate = (cov_2672s7zqdg().s[38]++, calculateExpiryDate(plan));
      var newRole = (cov_2672s7zqdg().s[39]++, plan.type === 'dealer' ? (cov_2672s7zqdg().b[9][0]++, UserRole.MVP_DEALER) : (cov_2672s7zqdg().b[9][1]++, UserRole.SHOW_ORGANIZER));
      cov_2672s7zqdg().s[40]++;
      yield updateUserProfileWithSubscription(userId, newRole, expiryDate.toISOString());
      cov_2672s7zqdg().s[41]++;
      yield logPayment({
        user_id: userId,
        plan_id: plan.id,
        amount: plan.price,
        currency: 'usd',
        status: 'succeeded',
        transaction_id: transactionId
      });
    } catch (error) {
      cov_2672s7zqdg().s[42]++;
      console.error('Failed to process subscription update after payment:', error);
      cov_2672s7zqdg().s[43]++;
      yield logPayment({
        user_id: userId,
        plan_id: plan.id,
        amount: plan.price,
        currency: 'usd',
        status: 'failed',
        transaction_id: transactionId,
        error_message: 'Post-payment profile update failed.'
      });
    }
  });
  return function processSubscriptionUpdate(_x5, _x6, _x7) {
    return _ref6.apply(this, arguments);
  };
}();
cov_2672s7zqdg().s[44]++;
var updateUserProfileWithSubscription = function () {
  var _ref7 = _asyncToGenerator(function* (userId, newRole, expiryDateISO) {
    cov_2672s7zqdg().f[4]++;
    var _ref8 = (cov_2672s7zqdg().s[45]++, yield supabase.from('profiles').update({
        role: newRole,
        subscription_status: 'active',
        payment_status: 'paid',
        subscription_expiry: expiryDateISO,
        updated_at: new Date().toISOString()
      }).eq('id', userId)),
      error = _ref8.error;
    cov_2672s7zqdg().s[46]++;
    if (error) {
      cov_2672s7zqdg().b[10][0]++;
      cov_2672s7zqdg().s[47]++;
      console.error('Error updating user profile with subscription:', error);
      cov_2672s7zqdg().s[48]++;
      throw new Error('Failed to update user profile after payment.');
    } else {
      cov_2672s7zqdg().b[10][1]++;
    }
  });
  return function updateUserProfileWithSubscription(_x8, _x9, _x0) {
    return _ref7.apply(this, arguments);
  };
}();
cov_2672s7zqdg().s[49]++;
var logPayment = function () {
  var _ref9 = _asyncToGenerator(function* (paymentData) {
    cov_2672s7zqdg().f[5]++;
    var _ref0 = (cov_2672s7zqdg().s[50]++, yield supabase.from('payments').insert(paymentData)),
      error = _ref0.error;
    cov_2672s7zqdg().s[51]++;
    if (error) {
      cov_2672s7zqdg().b[11][0]++;
      cov_2672s7zqdg().s[52]++;
      console.error('Error logging payment transaction:', error);
    } else {
      cov_2672s7zqdg().b[11][1]++;
    }
  });
  return function logPayment(_x1) {
    return _ref9.apply(this, arguments);
  };
}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdXBhYmFzZSIsIlNVQlNDUklQVElPTl9QTEFOUyIsImNhbGN1bGF0ZUV4cGlyeURhdGUiLCJVc2VyUm9sZSIsIlNUUklQRV9QVUJMSVNIQUJMRV9LRVkiLCJjb3ZfMjY3MnM3enFkZyIsInMiLCJfZW52IiwiRVhQT19QVUJMSUNfU1RSSVBFX1BVQkxJU0hBQkxFX0tFWSIsIlNVUEFCQVNFX0VER0VfRlVOQ1RJT05fVVJMIiwiRVhQT19QVUJMSUNfU1VQQUJBU0VfVVJMIiwiaW5pdGlhbGl6ZVN0cmlwZSIsImYiLCJiIiwiY29uc29sZSIsImVycm9yIiwiY3JlYXRlUGF5bWVudFNoZWV0Rm9yU3Vic2NyaXB0aW9uIiwiX3JlZiIsIl9hc3luY1RvR2VuZXJhdG9yIiwidXNlcklkIiwicGxhbklkIiwiaW5pdFBheW1lbnRTaGVldCIsInByZXNlbnRQYXltZW50U2hlZXQiLCJwbGFuIiwiZmluZCIsInAiLCJpZCIsInN1Y2Nlc3MiLCJfcmVmMiIsImF1dGgiLCJnZXRTZXNzaW9uIiwic2Vzc2lvbiIsImRhdGEiLCJhY2Nlc3NUb2tlbiIsImFjY2Vzc190b2tlbiIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiT2JqZWN0IiwiYXNzaWduIiwiQXV0aG9yaXphdGlvbiIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYW1vdW50IiwicHJpY2UiLCJjdXJyZW5jeSIsIm9rIiwiZXJyb3JCb2R5IiwianNvbiIsIkVycm9yIiwiX3JlZjMiLCJwYXltZW50SW50ZW50IiwiZXBoZW1lcmFsS2V5IiwiY3VzdG9tZXIiLCJfcmVmNCIsIm1lcmNoYW50RGlzcGxheU5hbWUiLCJjdXN0b21lcklkIiwiY3VzdG9tZXJFcGhlbWVyYWxLZXlTZWNyZXQiLCJwYXltZW50SW50ZW50Q2xpZW50U2VjcmV0IiwiYWxsb3dzRGVsYXllZFBheW1lbnRNZXRob2RzIiwicmV0dXJuVVJMIiwiaW5pdEVycm9yIiwibG9nUGF5bWVudCIsInVzZXJfaWQiLCJwbGFuX2lkIiwic3RhdHVzIiwidHJhbnNhY3Rpb25faWQiLCJlcnJvcl9tZXNzYWdlIiwibWVzc2FnZSIsIl9yZWY1IiwicHJlc2VudEVycm9yIiwiY29kZSIsInByb2Nlc3NTdWJzY3JpcHRpb25VcGRhdGUiLCJ0cmFuc2FjdGlvbklkIiwiX3giLCJfeDIiLCJfeDMiLCJfeDQiLCJhcHBseSIsImFyZ3VtZW50cyIsIl9yZWY2IiwiZXhwaXJ5RGF0ZSIsIm5ld1JvbGUiLCJ0eXBlIiwiTVZQX0RFQUxFUiIsIlNIT1dfT1JHQU5JWkVSIiwidXBkYXRlVXNlclByb2ZpbGVXaXRoU3Vic2NyaXB0aW9uIiwidG9JU09TdHJpbmciLCJfeDUiLCJfeDYiLCJfeDciLCJfcmVmNyIsImV4cGlyeURhdGVJU08iLCJfcmVmOCIsImZyb20iLCJ1cGRhdGUiLCJyb2xlIiwic3Vic2NyaXB0aW9uX3N0YXR1cyIsInBheW1lbnRfc3RhdHVzIiwic3Vic2NyaXB0aW9uX2V4cGlyeSIsInVwZGF0ZWRfYXQiLCJEYXRlIiwiZXEiLCJfeDgiLCJfeDkiLCJfeDAiLCJfcmVmOSIsInBheW1lbnREYXRhIiwiX3JlZjAiLCJpbnNlcnQiLCJfeDEiXSwic291cmNlcyI6WyJzdHJpcGVQYXltZW50U2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdHJpcGVQcm92aWRlciwgdXNlU3RyaXBlIH0gZnJvbSAnQHN0cmlwZS9zdHJpcGUtcmVhY3QtbmF0aXZlJztcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnLi4vc3VwYWJhc2UnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uUGxhbiwgU1VCU0NSSVBUSU9OX1BMQU5TLCBjYWxjdWxhdGVFeHBpcnlEYXRlIH0gZnJvbSAnLi9zdWJzY3JpcHRpb25UeXBlcyc7XG5pbXBvcnQgeyBVc2VyUm9sZSB9IGZyb20gJy4vdXNlclJvbGVTZXJ2aWNlJztcblxuLy8gLS0tIFR5cGUgRGVmaW5pdGlvbnMgLS0tXG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgb3V0Y29tZSBvZiBhIHBheW1lbnQgb3BlcmF0aW9uLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZVBheW1lbnRSZXN1bHQge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBlcnJvcj86IHN0cmluZztcbiAgdHJhbnNhY3Rpb25JZD86IHN0cmluZztcbn1cblxuLyoqXG4gKiBEZWZpbmVzIHRoZSBleHBlY3RlZCBKU09OIHJlc3BvbnNlIGZyb20gdGhlIGJhY2tlbmQgKFN1cGFiYXNlIEVkZ2UgRnVuY3Rpb24pXG4gKiB3aGVuIGNyZWF0aW5nIGEgcGF5bWVudCBpbnRlbnQuXG4gKi9cbmludGVyZmFjZSBQYXltZW50SW50ZW50UmVzcG9uc2Uge1xuICBwYXltZW50SW50ZW50OiBzdHJpbmc7IC8vIFRoZSBQYXltZW50IEludGVudCBjbGllbnQgc2VjcmV0XG4gIGVwaGVtZXJhbEtleTogc3RyaW5nOyAgLy8gVGhlIEVwaGVtZXJhbCBLZXkgc2VjcmV0IGZvciB0aGUgY3VzdG9tZXJcbiAgY3VzdG9tZXI6IHN0cmluZzsgICAgICAvLyBUaGUgU3RyaXBlIEN1c3RvbWVyIElEXG4gIHB1Ymxpc2hhYmxlS2V5OiBzdHJpbmc7IC8vIFRoZSBTdHJpcGUgcHVibGlzaGFibGUga2V5XG59XG5cbi8qKlxuICogRGVmaW5lcyB0aGUgc3RydWN0dXJlIGZvciBsb2dnaW5nIGEgcGF5bWVudCB0cmFuc2FjdGlvbiBpbiBTdXBhYmFzZS5cbiAqL1xuaW50ZXJmYWNlIFBheW1lbnRMb2cge1xuICBpZD86IHN0cmluZztcbiAgdXNlcl9pZDogc3RyaW5nO1xuICBwbGFuX2lkOiBzdHJpbmc7XG4gIGFtb3VudDogbnVtYmVyO1xuICBjdXJyZW5jeTogc3RyaW5nO1xuICBzdGF0dXM6ICdzdWNjZWVkZWQnIHwgJ2ZhaWxlZCcgfCAncGVuZGluZyc7XG4gIHRyYW5zYWN0aW9uX2lkOiBzdHJpbmc7IC8vIFN0cmlwZSBQYXltZW50IEludGVudCBJRFxuICBlcnJvcl9tZXNzYWdlPzogc3RyaW5nO1xuICBjcmVhdGVkX2F0Pzogc3RyaW5nO1xufVxuXG4vLyAtLS0gQ29uc3RhbnRzIC0tLVxuXG4vLyBJdCdzIGNydWNpYWwgdG8gbG9hZCB0aGlzIGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGVzIGFuZCBub3QgaGFyZGNvZGUgaXQuXG5jb25zdCBTVFJJUEVfUFVCTElTSEFCTEVfS0VZID0gcHJvY2Vzcy5lbnYuRVhQT19QVUJMSUNfU1RSSVBFX1BVQkxJU0hBQkxFX0tFWTtcbmNvbnN0IFNVUEFCQVNFX0VER0VfRlVOQ1RJT05fVVJMID0gYCR7cHJvY2Vzcy5lbnYuRVhQT19QVUJMSUNfU1VQQUJBU0VfVVJMfS9mdW5jdGlvbnMvdjEvY3JlYXRlLXBheW1lbnQtaW50ZW50YDtcblxuLy8gLS0tIFNlcnZpY2UgSW1wbGVtZW50YXRpb24gLS0tXG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIFN0cmlwZSBTREsuXG4gKiBUaGlzIHNob3VsZCBiZSBjYWxsZWQgb25jZSBhdCB0aGUgcm9vdCBvZiB5b3VyIGFwcGxpY2F0aW9uLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgaW5pdGlhbGl6YXRpb24gd2FzIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGluaXRpYWxpemVTdHJpcGUgPSAoKTogYm9vbGVhbiA9PiB7XG4gIGlmICghU1RSSVBFX1BVQkxJU0hBQkxFX0tFWSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N0cmlwZSBwdWJsaXNoYWJsZSBrZXkgaXMgbm90IHNldC4gUGxlYXNlIGNoZWNrIHlvdXIgZW52aXJvbm1lbnQgdmFyaWFibGVzLicpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBUaGUgU3RyaXBlUHJvdmlkZXIgY29tcG9uZW50IGhhbmRsZXMgaW5pdGlhbGl6YXRpb24uIFRoaXMgZnVuY3Rpb24gaXMgZm9yIHZhbGlkYXRpb24uXG4gIHJldHVybiB0cnVlO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuZCBwcmVzZW50cyB0aGUgU3RyaXBlIFBheW1lbnQgU2hlZXQgZm9yIGEgZ2l2ZW4gc3Vic2NyaXB0aW9uIHBsYW4uXG4gKiBUaGlzIGZ1bmN0aW9uIG9yY2hlc3RyYXRlcyB0aGUgZW50aXJlIGNsaWVudC1zaWRlIHBheW1lbnQgZmxvdy5cbiAqXG4gKiBAcGFyYW0gdXNlcklkIC0gVGhlIElEIG9mIHRoZSB1c2VyIHB1cmNoYXNpbmcgdGhlIHN1YnNjcmlwdGlvbi5cbiAqIEBwYXJhbSBwbGFuSWQgLSBUaGUgSUQgb2YgdGhlIHN1YnNjcmlwdGlvbiBwbGFuIGJlaW5nIHB1cmNoYXNlZC5cbiAqIEBwYXJhbSBpbml0UGF5bWVudFNoZWV0IC0gVGhlIGBpbml0UGF5bWVudFNoZWV0YCBmdW5jdGlvbiBmcm9tIHRoZSBgdXNlU3RyaXBlYCBob29rLlxuICogQHBhcmFtIHByZXNlbnRQYXltZW50U2hlZXQgLSBUaGUgYHByZXNlbnRQYXltZW50U2hlZXRgIGZ1bmN0aW9uIGZyb20gdGhlIGB1c2VTdHJpcGVgIGhvb2suXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxTdHJpcGVQYXltZW50UmVzdWx0Pn0gVGhlIHJlc3VsdCBvZiB0aGUgcGF5bWVudCBvcGVyYXRpb24uXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVQYXltZW50U2hlZXRGb3JTdWJzY3JpcHRpb24gPSBhc3luYyAoXG4gIHVzZXJJZDogc3RyaW5nLFxuICBwbGFuSWQ6IHN0cmluZyxcbiAgaW5pdFBheW1lbnRTaGVldDogKHBhcmFtczogYW55KSA9PiBQcm9taXNlPGFueT4sXG4gIHByZXNlbnRQYXltZW50U2hlZXQ6ICgpID0+IFByb21pc2U8YW55PlxuKTogUHJvbWlzZTxTdHJpcGVQYXltZW50UmVzdWx0PiA9PiB7XG4gIGNvbnN0IHBsYW4gPSBTVUJTQ1JJUFRJT05fUExBTlMuZmluZChwID0+IHAuaWQgPT09IHBsYW5JZCk7XG4gIGlmICghcGxhbikge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1N1YnNjcmlwdGlvbiBwbGFuIG5vdCBmb3VuZC4nIH07XG4gIH1cblxuICB0cnkge1xuICAgIC8vIDEuIENyZWF0ZSBhIHBheW1lbnQgaW50ZW50IG9uIHRoZSBzZXJ2ZXIgKHZpYSBTdXBhYmFzZSBFZGdlIEZ1bmN0aW9uKVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBSZXRyaWV2ZSB0aGUgY3VycmVudCBhY2Nlc3MtdG9rZW4gZnJvbSBTdXBhYmFzZSBhdXRoIHNlc3Npb25cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGNvbnN0IHtcbiAgICAgIGRhdGE6IHsgc2Vzc2lvbiB9LFxuICAgIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcblxuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gc2Vzc2lvbj8uYWNjZXNzX3Rva2VuO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChTVVBBQkFTRV9FREdFX0ZVTkNUSU9OX1VSTCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIC8vIFBhc3MgdGhlIGFjY2VzcyB0b2tlbiBvbmx5IGlmIHdlIGFjdHVhbGx5IGhhdmUgb25lXG4gICAgICAgIC4uLihhY2Nlc3NUb2tlbiA/IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAgfSA6IHt9KSxcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGFtb3VudDogcGxhbi5wcmljZSAqIDEwMCwgLy8gU3RyaXBlIGV4cGVjdHMgYW1vdW50IGluIGNlbnRzXG4gICAgICAgIGN1cnJlbmN5OiAndXNkJyxcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIHBsYW5JZDogcGxhbi5pZCxcbiAgICAgIH0pLFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgZXJyb3JCb2R5ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yQm9keS5lcnJvciB8fCAnRmFpbGVkIHRvIGNyZWF0ZSBwYXltZW50IGludGVudC4nKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHBheW1lbnRJbnRlbnQsIGVwaGVtZXJhbEtleSwgY3VzdG9tZXIgfTogUGF5bWVudEludGVudFJlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgLy8gMi4gSW5pdGlhbGl6ZSB0aGUgUGF5bWVudCBTaGVldFxuICAgIGNvbnN0IHsgZXJyb3I6IGluaXRFcnJvciB9ID0gYXdhaXQgaW5pdFBheW1lbnRTaGVldCh7XG4gICAgICBtZXJjaGFudERpc3BsYXlOYW1lOiAnQ2FyZCBTaG93IEZpbmRlciwgTExDLicsXG4gICAgICBjdXN0b21lcklkOiBjdXN0b21lcixcbiAgICAgIGN1c3RvbWVyRXBoZW1lcmFsS2V5U2VjcmV0OiBlcGhlbWVyYWxLZXksXG4gICAgICBwYXltZW50SW50ZW50Q2xpZW50U2VjcmV0OiBwYXltZW50SW50ZW50LFxuICAgICAgYWxsb3dzRGVsYXllZFBheW1lbnRNZXRob2RzOiB0cnVlLFxuICAgICAgcmV0dXJuVVJMOiAnY2FyZHNob3dmaW5kZXI6Ly9zdHJpcGUtcmVkaXJlY3QnLCAvLyBDdXN0b20gVVJMIHNjaGVtZVxuICAgIH0pO1xuXG4gICAgaWYgKGluaXRFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3RyaXBlIGluaXRQYXltZW50U2hlZXQgZXJyb3I6JywgaW5pdEVycm9yKTtcbiAgICAgIGF3YWl0IGxvZ1BheW1lbnQoe1xuICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgIHBsYW5faWQ6IHBsYW4uaWQsXG4gICAgICAgIGFtb3VudDogcGxhbi5wcmljZSxcbiAgICAgICAgY3VycmVuY3k6ICd1c2QnLFxuICAgICAgICBzdGF0dXM6ICdmYWlsZWQnLFxuICAgICAgICB0cmFuc2FjdGlvbl9pZDogcGF5bWVudEludGVudCxcbiAgICAgICAgZXJyb3JfbWVzc2FnZTogYEluaXQgRXJyb3I6ICR7aW5pdEVycm9yLm1lc3NhZ2V9YCxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgSW5pdGlhbGl6YXRpb24gZmFpbGVkOiAke2luaXRFcnJvci5tZXNzYWdlfWAgfTtcbiAgICB9XG5cbiAgICAvLyAzLiBQcmVzZW50IHRoZSBQYXltZW50IFNoZWV0XG4gICAgY29uc3QgeyBlcnJvcjogcHJlc2VudEVycm9yIH0gPSBhd2FpdCBwcmVzZW50UGF5bWVudFNoZWV0KCk7XG5cbiAgICBpZiAocHJlc2VudEVycm9yKSB7XG4gICAgICAvLyBVc2VyIGNhbmNlbGxlZCBvciBwYXltZW50IGZhaWxlZFxuICAgICAgaWYgKHByZXNlbnRFcnJvci5jb2RlID09PSAnQ2FuY2VsZWQnKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1BheW1lbnQgd2FzIGNhbmNlbGVkLicgfTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N0cmlwZSBwcmVzZW50UGF5bWVudFNoZWV0IGVycm9yOicsIHByZXNlbnRFcnJvcik7XG4gICAgICBhd2FpdCBsb2dQYXltZW50KHtcbiAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICBwbGFuX2lkOiBwbGFuLmlkLFxuICAgICAgICBhbW91bnQ6IHBsYW4ucHJpY2UsXG4gICAgICAgIGN1cnJlbmN5OiAndXNkJyxcbiAgICAgICAgc3RhdHVzOiAnZmFpbGVkJyxcbiAgICAgICAgdHJhbnNhY3Rpb25faWQ6IHBheW1lbnRJbnRlbnQsXG4gICAgICAgIGVycm9yX21lc3NhZ2U6IGBQcmVzZW50IEVycm9yOiAke3ByZXNlbnRFcnJvci5tZXNzYWdlfWAsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYFBheW1lbnQgZmFpbGVkOiAke3ByZXNlbnRFcnJvci5tZXNzYWdlfWAgfTtcbiAgICB9XG5cbiAgICAvLyA0LiBQYXltZW50IHN1Y2NlZWRlZCwgcHJvY2VzcyB0aGUgc3Vic2NyaXB0aW9uXG4gICAgYXdhaXQgcHJvY2Vzc1N1YnNjcmlwdGlvblVwZGF0ZSh1c2VySWQsIHBsYW4sIHBheW1lbnRJbnRlbnQpO1xuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgdHJhbnNhY3Rpb25JZDogcGF5bWVudEludGVudCB9O1xuXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkIGR1cmluZyBwYXltZW50OicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQuJyB9O1xuICB9XG59O1xuXG4vKipcbiAqIEhhbmRsZXMgdGhlIGxvZ2ljIGFmdGVyIGEgc3VjY2Vzc2Z1bCBwYXltZW50OiBjYWxjdWxhdGVzIGV4cGlyeSwgdXBkYXRlcyB0aGUgdXNlcidzIHByb2ZpbGUsXG4gKiBhbmQgbG9ncyB0aGUgdHJhbnNhY3Rpb24uXG4gKlxuICogQHBhcmFtIHVzZXJJZCAtIFRoZSBJRCBvZiB0aGUgdXNlci5cbiAqIEBwYXJhbSBwbGFuIC0gVGhlIHN1YnNjcmlwdGlvbiBwbGFuIHRoYXQgd2FzIHB1cmNoYXNlZC5cbiAqIEBwYXJhbSB0cmFuc2FjdGlvbklkIC0gVGhlIFN0cmlwZSBQYXltZW50IEludGVudCBJRCBmb3IgbG9nZ2luZy5cbiAqL1xuZXhwb3J0IGNvbnN0IHByb2Nlc3NTdWJzY3JpcHRpb25VcGRhdGUgPSBhc3luYyAoXG4gIHVzZXJJZDogc3RyaW5nLFxuICBwbGFuOiBTdWJzY3JpcHRpb25QbGFuLFxuICB0cmFuc2FjdGlvbklkOiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4gPT4ge1xuICB0cnkge1xuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgZXhwaXJ5IGRhdGUgZm9yIHRoZSAqKnBhaWQqKiBzdWJzY3JpcHRpb24uXG4gICAgICogV2UgaW50ZW50aW9uYWxseSBpZ25vcmUgYW55IGZyZWUtdHJpYWwgZGF0YSBoZXJlIGJlY2F1c2UgYW4gdXBncmFkZVxuICAgICAqIHNob3VsZCB0ZXJtaW5hdGUgdGhlIHRyaWFsIGFuZCBzdGFydCB0aGUgcGFpZCBwZXJpb2QgaW1tZWRpYXRlbHkuXG4gICAgICogVGhlIGhlbHBlciBpbiBgc3Vic2NyaXB0aW9uVHlwZXNgIGFscmVhZHkgZW5jb2RlczpcbiAgICAgKiAgIOKAoiBBbm51YWwgIOKGkiArMzY1IGRheXNcbiAgICAgKiAgIOKAoiBNb250aGx5IOKGkiArMzAgIGRheXNcbiAgICAgKi9cbiAgICBjb25zdCBleHBpcnlEYXRlID0gY2FsY3VsYXRlRXhwaXJ5RGF0ZShwbGFuKTtcblxuICAgIC8vIERldGVybWluZSB0aGUgbmV3IHJvbGUgYmFzZWQgb24gdGhlIHN1YnNjcmlwdGlvbiB0eXBlXG4gICAgY29uc3QgbmV3Um9sZSA9IHBsYW4udHlwZSA9PT0gJ2RlYWxlcicgPyBVc2VyUm9sZS5NVlBfREVBTEVSIDogVXNlclJvbGUuU0hPV19PUkdBTklaRVI7XG5cbiAgICAvLyBVcGRhdGUgdXNlciBwcm9maWxlIGluIFN1cGFiYXNlXG4gICAgYXdhaXQgdXBkYXRlVXNlclByb2ZpbGVXaXRoU3Vic2NyaXB0aW9uKHVzZXJJZCwgbmV3Um9sZSwgZXhwaXJ5RGF0ZS50b0lTT1N0cmluZygpKTtcblxuICAgIC8vIExvZyB0aGUgc3VjY2Vzc2Z1bCBwYXltZW50XG4gICAgYXdhaXQgbG9nUGF5bWVudCh7XG4gICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICBwbGFuX2lkOiBwbGFuLmlkLFxuICAgICAgYW1vdW50OiBwbGFuLnByaWNlLFxuICAgICAgY3VycmVuY3k6ICd1c2QnLFxuICAgICAgc3RhdHVzOiAnc3VjY2VlZGVkJyxcbiAgICAgIHRyYW5zYWN0aW9uX2lkOiB0cmFuc2FjdGlvbklkLFxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHByb2Nlc3Mgc3Vic2NyaXB0aW9uIHVwZGF0ZSBhZnRlciBwYXltZW50OicsIGVycm9yKTtcbiAgICAvLyBFdmVuIGlmIHBvc3QtcGF5bWVudCBwcm9jZXNzaW5nIGZhaWxzLCB0aGUgcGF5bWVudCB3YXMgc3VjY2Vzc2Z1bC5cbiAgICAvLyBUaGlzIHNob3VsZCBiZSBoYW5kbGVkIHdpdGggYSByZWNvbmNpbGlhdGlvbiBwcm9jZXNzIG9yIG1vbml0b3JpbmcuXG4gICAgLy8gRm9yIG5vdywgd2UgbG9nIHRoZSBlcnJvci5cbiAgICBhd2FpdCBsb2dQYXltZW50KHtcbiAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgIHBsYW5faWQ6IHBsYW4uaWQsXG4gICAgICBhbW91bnQ6IHBsYW4ucHJpY2UsXG4gICAgICBjdXJyZW5jeTogJ3VzZCcsXG4gICAgICBzdGF0dXM6ICdmYWlsZWQnLCAvLyBMb2cgYXMgJ2ZhaWxlZCcgdG8gaW5kaWNhdGUgYSBwcm9jZXNzaW5nIGZhaWx1cmUgcG9zdC1wYXltZW50XG4gICAgICB0cmFuc2FjdGlvbl9pZDogdHJhbnNhY3Rpb25JZCxcbiAgICAgIGVycm9yX21lc3NhZ2U6ICdQb3N0LXBheW1lbnQgcHJvZmlsZSB1cGRhdGUgZmFpbGVkLicsXG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgdXNlcidzIHByb2ZpbGUgaW4gdGhlIFN1cGFiYXNlICdwcm9maWxlcycgdGFibGUgd2l0aCBuZXcgc3Vic2NyaXB0aW9uIGRldGFpbHMuXG4gKlxuICogQHBhcmFtIHVzZXJJZCAtIFRoZSB1c2VyJ3MgSUQuXG4gKiBAcGFyYW0gbmV3Um9sZSAtIFRoZSBuZXcgcm9sZSB0byBhc3NpZ24gdG8gdGhlIHVzZXIuXG4gKiBAcGFyYW0gZXhwaXJ5RGF0ZUlTTyAtIFRoZSBJU08gc3RyaW5nIG9mIHRoZSBzdWJzY3JpcHRpb24gZXhwaXJ5IGRhdGUuXG4gKi9cbmNvbnN0IHVwZGF0ZVVzZXJQcm9maWxlV2l0aFN1YnNjcmlwdGlvbiA9IGFzeW5jIChcbiAgdXNlcklkOiBzdHJpbmcsXG4gIG5ld1JvbGU6IFVzZXJSb2xlLFxuICBleHBpcnlEYXRlSVNPOiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4gPT4ge1xuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdwcm9maWxlcycpXG4gICAgLnVwZGF0ZSh7XG4gICAgICByb2xlOiBuZXdSb2xlLFxuICAgICAgc3Vic2NyaXB0aW9uX3N0YXR1czogJ2FjdGl2ZScsXG4gICAgICAvLyBNYXJrIHRoZSB1c2VyIGFzIGhhdmluZyBjb21wbGV0ZWQgcGF5bWVudCBzbyBVSSBkb2VzIG5vdCBzaG93IOKAnFRyaWFs4oCdIGJhbm5lcnNcbiAgICAgIHBheW1lbnRfc3RhdHVzOiAncGFpZCcsXG4gICAgICBzdWJzY3JpcHRpb25fZXhwaXJ5OiBleHBpcnlEYXRlSVNPLFxuICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIH0pXG4gICAgLmVxKCdpZCcsIHVzZXJJZCk7XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgdXNlciBwcm9maWxlIHdpdGggc3Vic2NyaXB0aW9uOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgdXNlciBwcm9maWxlIGFmdGVyIHBheW1lbnQuJyk7XG4gIH1cbn07XG5cbi8qKlxuICogTG9ncyBhIHBheW1lbnQgdHJhbnNhY3Rpb24gdG8gdGhlICdwYXltZW50cycgdGFibGUgaW4gU3VwYWJhc2UuXG4gKlxuICogQHBhcmFtIHBheW1lbnREYXRhIC0gVGhlIHBheW1lbnQgZGV0YWlscyB0byBsb2cuXG4gKi9cbmNvbnN0IGxvZ1BheW1lbnQgPSBhc3luYyAocGF5bWVudERhdGE6IFBheW1lbnRMb2cpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncGF5bWVudHMnKS5pbnNlcnQocGF5bWVudERhdGEpO1xuXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvZ2dpbmcgcGF5bWVudCB0cmFuc2FjdGlvbjonLCBlcnJvcik7XG4gICAgLy8gVGhpcyBpcyBhIG5vbi1jcml0aWNhbCBlcnJvciBmb3IgdGhlIHVzZXIgZmxvdywgYnV0IGltcG9ydGFudCBmb3IgYW5hbHl0aWNzL2RlYnVnZ2luZy5cbiAgfVxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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